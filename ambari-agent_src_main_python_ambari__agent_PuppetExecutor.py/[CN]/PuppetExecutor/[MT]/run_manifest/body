def run_manifest(self, command, file, tmpoutfile, tmperrfile):
    result = {}
    taskId = 0
    timeout = command['commandParams']['command_timeout']
    if command.has_key('taskId'):
        taskId = command['taskId']
    puppetEnv = os.environ
    repo_manifest_list = self.generate_repo_manifests(command, self.tmpDir, self.modulesdir, taskId)
    puppetFiles = list(repo_manifest_list)
    puppetFiles.append(file)
    for puppetFile in puppetFiles:
        self.runPuppetFile(puppetFile, result, puppetEnv, tmpoutfile, tmperrfile, timeout)
        if (not self.isSuccessfull(result['exitcode'])):
            break
    if self.isSuccessfull(result['exitcode']):
        self.reposInstalled = True
    logger.info(('ExitCode : ' + str(result['exitcode'])))
    return result
