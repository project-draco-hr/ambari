{
  AlertSummaryDTO summary=null;
  String clusterName=(String)resource.getPropertyValue(m_clusterPropertyId);
  if (null == clusterName) {
    return;
  }
  String typeId=null == m_typeIdPropertyId ? null : (String)resource.getPropertyValue(m_typeIdPropertyId);
  Cluster cluster=s_clusters.get().getCluster(clusterName);
switch (m_resourceType.getInternalType()) {
case Cluster:
    summary=s_dao.findCurrentCounts(cluster.getClusterId(),null,null);
  break;
case Service:
summary=s_dao.findCurrentCounts(cluster.getClusterId(),typeId,null);
break;
case Host:
summary=s_dao.findCurrentCounts(cluster.getClusterId(),null,typeId);
break;
default :
break;
}
if (null != summary) {
Map<AlertState,Integer> map=new HashMap<AlertState,Integer>();
map.put(AlertState.OK,Integer.valueOf(summary.getOkCount()));
map.put(AlertState.WARNING,Integer.valueOf(summary.getWarningCount()));
map.put(AlertState.CRITICAL,Integer.valueOf(summary.getCriticalCount()));
map.put(AlertState.UNKNOWN,Integer.valueOf(summary.getUnknownCount()));
setResourceProperty(resource,"alerts_summary",map,requestedIds);
}
}
