{
  if (checkMetricStore()) {
    failures=0;
    if (LOG.isDebugEnabled()) {
      LOG.debug("Successfully got metrics from TimelineMetricStore");
    }
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Failed to get metrics from TimelineMetricStore");
    }
    failures++;
  }
  if (failures >= configuration.getTimelineMetricsServiceWatcherMaxFailures()) {
    String msg="Error getting metrics from TimelineMetricStore. " + "Shutting down by TimelineMetricStoreWatcher.";
    LOG.fatal(msg);
    ExitUtil.terminate(-1,msg);
  }
}
