{
  List<StatusCommand> cmds=new ArrayList<StatusCommand>();
  for (  Cluster cl : fsm.getClustersForHost(hostname)) {
    List<ServiceComponentHost> roleList=cl.getServiceComponentHosts(hostname);
    for (    ServiceComponentHost sch : roleList) {
      String serviceName=sch.getServiceName();
      if (LOG.isDebugEnabled()) {
        LOG.debug("Live status will include status of service " + serviceName + " of cluster "+ cl.getClusterName());
      }
      Map<String,Config> configs=sch.getDesiredConfigs();
      Map<String,Map<String,String>> configurations=new TreeMap<String,Map<String,String>>();
      for (      Config config : configs.values()) {
        if (config.getType().equals("global"))         configurations.put(config.getType(),config.getProperties());
      }
      StatusCommand statusCmd=new StatusCommand();
      statusCmd.setClusterName(cl.getClusterName());
      statusCmd.setServiceName(serviceName);
      statusCmd.setComponentName(sch.getServiceComponentName());
      statusCmd.setConfigurations(configurations);
      cmds.add(statusCmd);
    }
  }
  return cmds;
}
