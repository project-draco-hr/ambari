{
  LogHistory log=logHistoryList.get(key);
  if (log == null) {
    log=new LogHistory();
    logHistoryList.put(key,log);
  }
  if ((System.currentTimeMillis() - log.lastLogTime) > logInterval) {
    log.lastLogTime=System.currentTimeMillis();
    int counter=log.counter;
    log.counter=0;
    if (counter > 0) {
      message+=". Messages suppressed before: " + counter;
    }
    if (e == null) {
      callerLogger.log(level,message);
    }
 else {
      callerLogger.log(level,message,e);
    }
    return true;
  }
 else {
    log.counter++;
  }
  return false;
}
