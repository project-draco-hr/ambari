{
  this.serviceInfo=serviceInfo;
  this.stackContext=stackContext;
  this.serviceDirectory=serviceDirectory;
  this.isCommonService=isCommonService;
  serviceInfo.setMetricsFile(serviceDirectory.getMetricsFile(serviceInfo.getName()));
  serviceInfo.setAlertsFile(serviceDirectory.getAlertsFile());
  serviceInfo.setKerberosDescriptorFile(serviceDirectory.getKerberosDescriptorFile());
  serviceInfo.setWidgetsDescriptorFile(serviceDirectory.getWidgetsDescriptorFile(serviceInfo.getName()));
  serviceInfo.setSchemaVersion(AmbariMetaInfo.SCHEMA_VERSION_2);
  serviceInfo.setServicePackageFolder(serviceDirectory.getPackageDir());
  serviceInfo.setServiceUpgradesFolder(serviceDirectory.getUpgradesDir());
  serviceInfo.setAdvisorFile(serviceDirectory.getAdvisorFile());
  serviceInfo.setAdvisorName(serviceDirectory.getAdvisorName(serviceInfo.getName()));
  populateComponentModules();
  populateConfigurationModules();
  populateThemeModules();
  populateQuickLinksConfigurationModules();
  validateServiceInfo();
}
