{
  ConfigurationDirectory configDirectory=serviceDirectory.getConfigurationDirectory(serviceInfo.getConfigDir());
  if (configDirectory != null) {
    for (    ConfigurationModule config : configDirectory.getConfigurationModules()) {
      if (!serviceInfo.getExcludedConfigTypes().contains(config.getConfigType())) {
        ConfigurationInfo info=config.getModuleInfo();
        serviceInfo.getProperties().addAll(info.getProperties());
        serviceInfo.setTypeAttributes(config.getConfigType(),info.getAttributes());
        configurationModules.put(config.getConfigType(),config);
      }
    }
    for (    String excludedType : serviceInfo.getExcludedConfigTypes()) {
      if (!configurationModules.containsKey(excludedType)) {
        ConfigurationInfo configInfo=new ConfigurationInfo(Collections.<PropertyInfo>emptyList(),Collections.<String,String>emptyMap());
        ConfigurationModule config=new ConfigurationModule(excludedType,configInfo);
        config.setDeleted(true);
        configurationModules.put(excludedType,config);
      }
    }
  }
}
