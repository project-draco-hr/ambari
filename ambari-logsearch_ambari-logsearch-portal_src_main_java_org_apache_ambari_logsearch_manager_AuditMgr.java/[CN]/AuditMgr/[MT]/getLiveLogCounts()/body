{
  VNameValueList nameValueList=new VNameValueList();
  SolrQuery solrQuery=new SolrQuery();
  solrQuery.setParam("event","/audit/logs/live/count");
  try {
    Date[] timeRange=ManageStartEndTime.getStartEndTime();
    String startDate=dateUtil.convertGivenDateFormatToSolrDateFormat(timeRange[0]);
    String endDate=dateUtil.convertGivenDateFormatToSolrDateFormat(timeRange[1]);
    queryGenerator.setMainQuery(solrQuery,null);
    queryGenerator.setFacetRange(solrQuery,LogSearchConstants.AUDIT_EVTTIME,startDate,endDate,"+2MINUTE");
    List<RangeFacet.Count> listCount;
    QueryResponse response=auditSolrDao.process(solrQuery);
    List<RangeFacet> rangeFacet=response.getFacetRanges();
    if (rangeFacet == null) {
      return convertObjToString(nameValueList);
    }
    RangeFacet range=rangeFacet.get(0);
    if (range == null) {
      return convertObjToString(nameValueList);
    }
    listCount=range.getCounts();
    List<VNameValue> nameValues=new ArrayList<VNameValue>();
    int count=0;
    for (    RangeFacet.Count cnt : listCount) {
      VNameValue nameValue=new VNameValue();
      nameValue.setName("" + count);
      nameValue.setValue("" + cnt.getCount());
      nameValues.add(nameValue);
      count++;
    }
    nameValueList.setVNameValues(nameValues);
    return convertObjToString(nameValueList);
  }
 catch (  SolrException|SolrServerException|ParseException|IOException e) {
    logger.error("Error during solrQuery=" + solrQuery,e);
    throw restErrorUtil.createRESTException(MessageEnums.SOLR_ERROR.getMessage().getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
