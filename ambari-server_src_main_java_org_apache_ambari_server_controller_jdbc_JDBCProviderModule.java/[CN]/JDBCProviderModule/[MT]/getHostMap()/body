{
  Map<String,String> hostMap=new HashMap<String,String>();
  ResourceProvider hostProvider=getResourceProvider(Resource.Type.Host);
  ObjectMapper mapper=new ObjectMapper();
  Request request=PropertyHelper.getReadRequest(Collections.singleton(HOST_ATTRIBUTES_PROPERTY_ID));
  Set<Resource> hosts=hostProvider.getResources(request,null);
  for (  Resource host : hosts) {
    String attributes=(String)host.getPropertyValue(HOST_ATTRIBUTES_PROPERTY_ID);
    if (attributes != null && !attributes.startsWith("[]")) {
      try {
        Map<String,String> attributeMap=mapper.readValue(attributes,new TypeReference<Map<String,String>>(){
        }
);
        hostMap.put(attributeMap.get("privateFQDN"),attributeMap.get("publicFQDN"));
      }
 catch (      IOException e) {
        throw new IllegalStateException("Can't read hosts " + attributes,e);
      }
    }
  }
  return hostMap;
}
