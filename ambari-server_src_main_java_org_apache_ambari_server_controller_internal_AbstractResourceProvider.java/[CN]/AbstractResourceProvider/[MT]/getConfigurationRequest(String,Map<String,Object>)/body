{
  ConfigurationRequest config=null;
  for (  Entry<String,Object> entry : properties.entrySet()) {
    String absCategory=PropertyHelper.getPropertyCategory(entry.getKey());
    String propName=PropertyHelper.getPropertyName(entry.getKey());
    if (absCategory.startsWith(parentCategory + "/desired_config")) {
      config=(null == config) ? new ConfigurationRequest() : config;
      if (propName.equals("type"))       config.setType(entry.getValue().toString());
 else       if (propName.equals("tag"))       config.setVersionTag(entry.getValue().toString());
 else       if (propName.equals("selected")) {
        config.setSelected(Boolean.parseBoolean(entry.getValue().toString()));
      }
 else       if (absCategory.endsWith("/properties")) {
        config.getProperties().put(propName,entry.getValue().toString());
      }
    }
  }
  return config;
}
