{
  Map<String,Object> clusterProperties=new HashMap<String,Object>();
  clusterProperties.put(CLUSTER_NAME_PROPERTY_ID,clusterName);
  clusterProperties.put(CLUSTER_DESIRED_CONFIGS_PROPERTY_ID + "/type",type);
  clusterProperties.put(CLUSTER_DESIRED_CONFIGS_PROPERTY_ID + "/tag","1");
  for (  Map.Entry<String,String> entry : properties.entrySet()) {
    clusterProperties.put(CLUSTER_DESIRED_CONFIGS_PROPERTY_ID + "/properties/" + entry.getKey(),entry.getValue());
  }
  if (propertiesAttributes != null) {
    for (    Map.Entry<String,Map<String,String>> attribute : propertiesAttributes.entrySet()) {
      String attributeName=attribute.getKey();
      for (      Map.Entry<String,String> attributeOccurrence : attribute.getValue().entrySet()) {
        clusterProperties.put(CLUSTER_DESIRED_CONFIGS_PROPERTY_ID + "/properties_attributes/" + attributeName+ "/"+ attributeOccurrence.getKey(),attributeOccurrence.getValue());
      }
    }
  }
  getManagementController().updateClusters(Collections.singleton(getRequest(clusterProperties)),null);
}
