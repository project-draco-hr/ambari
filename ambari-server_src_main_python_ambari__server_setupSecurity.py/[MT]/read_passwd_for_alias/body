def read_passwd_for_alias(alias, masterKey=''):
    if alias:
        jdk_path = find_jdk()
        if (jdk_path is None):
            print_error_msg(('No JDK found, please run the "setup" command to install a JDK automatically or install any JDK manually to ' + JDK_INSTALL_DIR))
            return 1
        tempFileName = 'ambari.passwd'
        passwd = ''
        tempDir = tempfile.gettempdir()
        tempFilePath = ((tempDir + os.sep) + tempFileName)
        file = open(tempFilePath, 'w+')
        os.chmod(tempFilePath, (stat.S_IREAD | stat.S_IWRITE))
        file.close()
        if ((masterKey is None) or (masterKey == '')):
            masterKey = 'None'
        command = SECURITY_PROVIDER_GET_CMD.format(jdk_path, get_conf_dir(), get_ambari_classpath(), alias, tempFilePath, masterKey)
        (retcode, stdout, stderr) = run_os_command(command)
        print_info_msg(('Return code from credential provider get passwd: ' + str(retcode)))
        if (retcode != 0):
            print ('ERROR: Unable to read password from store. alias = ' + alias)
        else:
            passwd = open(tempFilePath, 'r').read()
        os.remove(tempFilePath)
        return passwd
    else:
        print_error_msg('Alias is unreadable.')
