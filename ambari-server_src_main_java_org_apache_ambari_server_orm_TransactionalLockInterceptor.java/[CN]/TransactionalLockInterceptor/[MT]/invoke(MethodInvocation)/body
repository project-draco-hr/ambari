{
  TransactionalLock annotation=methodInvocation.getMethod().getAnnotation(TransactionalLock.class);
  LockArea lockArea=annotation.lockArea();
  LockType lockType=annotation.lockType();
  ReadWriteLock rwLock=transactionLocks.getLock(lockArea);
  Lock lock=lockType == LockType.READ ? rwLock.readLock() : rwLock.writeLock();
  lock.lock();
  try {
    Object object=methodInvocation.proceed();
    return object;
  }
  finally {
    lock.unlock();
  }
}
