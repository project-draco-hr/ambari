{
  final Set<LdapUserDto> users=new HashSet<LdapUserDto>();
  final LdapTemplate ldapTemplate=loadLdapTemplate();
  String baseDn=ldapServerProperties.getBaseDN();
  for (  Object dto : ldapTemplate.search(baseDn,filter.encode(),new LdapUserContextMapper(ldapServerProperties))) {
    if (dto != null) {
      users.add((LdapUserDto)dto);
    }
  }
  return users;
}
