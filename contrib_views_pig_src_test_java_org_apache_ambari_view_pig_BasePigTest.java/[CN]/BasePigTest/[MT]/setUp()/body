{
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  properties=new HashMap<String,String>();
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  pigStorageFile=new File("./target/BasePigTest/storage.dat").getAbsoluteFile();
  properties.put("dataworker.storagePath",pigStorageFile.toString());
  properties.put("dataworker.webhcat.url","localhost:50111/templeton/v1");
  properties.put("dataworker.webhcat.user","admin");
  properties.put("dataworker.scripts.path","/tmp/.pigscripts");
  properties.put("dataworker.jobs.path","/tmp/.pigjobs");
  setupProperties(properties,baseDir);
  expect(context.getProperties()).andReturn(properties).anyTimes();
  expect(context.getUsername()).andReturn("ambari-qa").anyTimes();
  replay(handler,context);
}
