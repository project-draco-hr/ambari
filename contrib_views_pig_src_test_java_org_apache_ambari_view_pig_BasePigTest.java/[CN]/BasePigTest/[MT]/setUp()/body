{
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  Map<String,String> properties=new HashMap<String,String>();
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  pigStorageFile=new File("./target/BasePigTest/storage.dat").getAbsoluteFile();
  properties.put("dataworker.storagePath",pigStorageFile.toString());
  properties.put("dataworker.templeton_url","localhost:50111/templeton/v1");
  properties.put("dataworker.templeton_user","admin");
  properties.put("dataworker.userScriptsPath","/tmp/.pigscripts");
  properties.put("dataworker.pigJobsPath","/tmp/.pigjobs");
  setupProperties(properties,baseDir);
  expect(context.getProperties()).andReturn(properties).anyTimes();
  expect(context.getUsername()).andReturn("ambari-qa").anyTimes();
  replay(handler,context);
}
