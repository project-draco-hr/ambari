{
  installDependencies();
  handler=mock(HeartBeatHandler.class);
  response.setResponseStatus(RegistrationStatus.OK);
  hresponse.setResponseId(0L);
  componentsResponse.setClusterName("dummycluster");
  try {
    when(handler.handleRegistration(any(Register.class))).thenReturn(response);
    when(handler.handleHeartBeat(any(HeartBeat.class))).thenReturn(hresponse);
    when(handler.handleComponents(any(String.class))).thenReturn(componentsResponse);
  }
 catch (  Exception ex) {
  }
  requestStaticInjection(AgentResource.class);
  os_family=mock(OsFamily.class);
  actionManager=mock(ActionManager.class);
  ambariMetaInfo=mock(AmbariMetaInfo.class);
  actionDBAccessor=mock(ActionDBAccessor.class);
  sessionManager=mock(SessionManager.class);
  bind(OsFamily.class).toInstance(os_family);
  bind(ActionDBAccessor.class).toInstance(actionDBAccessor);
  bind(ActionManager.class).toInstance(actionManager);
  bind(SessionManager.class).toInstance(sessionManager);
  bind(AgentCommand.class).to(ExecutionCommand.class);
  bind(HeartBeatHandler.class).toInstance(handler);
  bind(AmbariMetaInfo.class).toInstance(ambariMetaInfo);
  bind(DBAccessor.class).toInstance(mock(DBAccessor.class));
  bind(HostRoleCommandDAO.class).toInstance(mock(HostRoleCommandDAO.class));
  bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
  bind(HostDAO.class).toInstance(createNiceMock(HostDAO.class));
  bind(Clusters.class).toInstance(createNiceMock(Clusters.class));
  bind(PersistedState.class).toInstance(createNiceMock(PersistedState.class));
}
