{
  Map<String,UpgradePack> upgrades=ambariMetaInfo.getUpgradePacks("foo","bar");
  assertTrue(upgrades.isEmpty());
  upgrades=ambariMetaInfo.getUpgradePacks("HDP","2.1.1");
  assertTrue(upgrades.containsKey("upgrade_bucket_test"));
  UpgradePack upgrade=upgrades.get("upgrade_bucket_test");
  assertNotNull(upgrade);
  Cluster cluster=makeCluster();
  UpgradeHelper helper=new UpgradeHelper();
  List<UpgradeGroupHolder> groups=helper.createUpgrade(cluster,m_masterHostResolver,upgrade);
  assertEquals(1,groups.size());
  UpgradeGroupHolder group=groups.iterator().next();
  assertEquals(7,group.items.size());
}
