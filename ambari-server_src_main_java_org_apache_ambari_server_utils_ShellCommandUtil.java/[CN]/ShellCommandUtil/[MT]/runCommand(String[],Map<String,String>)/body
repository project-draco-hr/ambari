{
  ProcessBuilder builder=new ProcessBuilder(args);
  if (vars != null) {
    Map<String,String> env=builder.environment();
    env.putAll(vars);
  }
  Process process;
  if (WINDOWS) {
synchronized (WindowsProcessLaunchLock) {
      process=builder.start();
    }
  }
 else {
    process=builder.start();
  }
  process.waitFor();
  String stdout=streamToString(process.getInputStream());
  String stderr=streamToString(process.getErrorStream());
  int exitCode=process.exitValue();
  return new Result(exitCode,stdout,stderr);
}
