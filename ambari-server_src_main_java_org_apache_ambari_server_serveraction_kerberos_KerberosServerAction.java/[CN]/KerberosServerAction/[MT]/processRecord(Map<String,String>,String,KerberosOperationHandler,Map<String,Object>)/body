{
  CommandReport commandReport=null;
  if (record != null) {
    String principal=record.get(KerberosActionDataFile.PRINCIPAL);
    String host=record.get(KerberosActionDataFile.HOSTNAME);
    if (principal != null) {
      String evaluatedPrincipal=principal.replace("_HOST",host).replace("_REALM",defaultRealm);
      String message=String.format("Processing identity for %s",evaluatedPrincipal);
      actionLog.writeStdOut(message);
      LOG.info(message);
      commandReport=processIdentity(record,evaluatedPrincipal,operationHandler,requestSharedDataContext);
    }
  }
  return commandReport;
}
