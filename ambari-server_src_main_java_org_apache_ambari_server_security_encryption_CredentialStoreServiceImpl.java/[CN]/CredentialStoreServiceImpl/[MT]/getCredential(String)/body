{
  char[] credential=null;
  KeyStore ks=loadCredentialStore();
  if (ks != null && alias != null && !alias.isEmpty()) {
    try {
      LOG.debug("keystore = " + ks.aliases());
      LOG.debug("masterkey = " + new String(masterService.getMasterSecret()));
      Key key=ks.getKey(alias,masterService.getMasterSecret());
      if (key == null) {
        throw new AmbariException("Credential not found for alias: " + alias);
      }
      credential=new String(key.getEncoded()).toCharArray();
    }
 catch (    UnrecoverableKeyException e) {
      e.printStackTrace();
    }
catch (    KeyStoreException e) {
      e.printStackTrace();
    }
catch (    NoSuchAlgorithmException e) {
      e.printStackTrace();
    }
  }
  return credential;
}
