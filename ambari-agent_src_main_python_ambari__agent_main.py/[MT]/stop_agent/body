def stop_agent():
    pid = (-1)
    try:
        f = open(ProcessHelper.pidfile, 'r')
        pid = f.read()
        pid = int(pid)
        f.close()
        kill_process_group(pid, signal.SIGTERM)
        time.sleep(5)
        if os.path.exists(ProcessHelper.pidfile):
            raise Exception('PID file still exists.')
        os._exit(0)
    except Exception:
        if (pid == (-1)):
            print 'Agent process is not running'
        else:
            kill_process_group(pid, signal.SIGKILL)
        os._exit(1)
