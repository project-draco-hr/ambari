def test_write_host_check_report_empty(self):
    tmpfile = tempfile.mktemp()
    config = ConfigParser.RawConfigParser()
    config.add_section('agent')
    config.set('agent', 'prefix', os.path.dirname(tmpfile))
    handler = HostCheckReportFileHandler(config)
    dict = {}
    dict['hostHealth'] = {}
    dict['existingUsers'] = []
    dict['alternatives'] = []
    dict['stackFoldersAndFiles'] = []
    dict['hostHealth']['activeJavaProcs'] = []
    dict['installedPackages'] = []
    dict['existingRepos'] = []
    handler.writeHostCheckFile(dict)
    configValidator = ConfigParser.RawConfigParser()
    configPath = os.path.join(os.path.dirname(tmpfile), HostCheckReportFileHandler.HOST_CHECK_FILE)
    configValidator.read(configPath)
    users = configValidator.get('users', 'usr_list')
    self.assertEquals(users, '')
    names = configValidator.get('alternatives', 'symlink_list')
    targets = configValidator.get('alternatives', 'target_list')
    self.assertEquals(names, '')
    self.assertEquals(targets, '')
    paths = configValidator.get('directories', 'dir_list')
    self.assertEquals(paths, '')
    procs = configValidator.get('processes', 'proc_list')
    self.assertEquals(procs, '')
    pkgs = configValidator.get('packages', 'pkg_list')
    self.assertEquals(pkgs, '')
    repos = configValidator.get('repositories', 'repo_list')
    self.assertEquals(repos, '')
    time = configValidator.get('metadata', 'created')
    self.assertTrue((time != None))
