{
  long timestamp=0;
  Assert.assertEquals(startState,impl.getState());
  ServiceComponentHostEvent installEvent=createEvent(impl,++timestamp,startEvent);
  long startTime=timestamp;
  impl.handleEvent(installEvent);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(-1,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostEvent installEvent2=createEvent(impl,++timestamp,startEvent);
  boolean exceptionThrown=false;
  try {
    impl.handleEvent(installEvent2);
  }
 catch (  Exception e) {
    exceptionThrown=true;
  }
  Assert.assertTrue("Exception not thrown on invalid event",exceptionThrown);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(-1,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostOpInProgressEvent inProgressEvent1=new ServiceComponentHostOpInProgressEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  impl.handleEvent(inProgressEvent1);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(timestamp,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostOpInProgressEvent inProgressEvent2=new ServiceComponentHostOpInProgressEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  impl.handleEvent(inProgressEvent2);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(timestamp,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostOpFailedEvent failEvent=new ServiceComponentHostOpFailedEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  long endTime=timestamp;
  impl.handleEvent(failEvent);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(timestamp,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(endTime,impl.getLastOpEndTime());
  Assert.assertEquals(failedState,impl.getState());
  ServiceComponentHostOpRestartedEvent restartEvent=new ServiceComponentHostOpRestartedEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  startTime=timestamp;
  impl.handleEvent(restartEvent);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(-1,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostOpInProgressEvent inProgressEvent3=new ServiceComponentHostOpInProgressEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  impl.handleEvent(inProgressEvent3);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(timestamp,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(-1,impl.getLastOpEndTime());
  Assert.assertEquals(inProgressState,impl.getState());
  ServiceComponentHostOpSucceededEvent succeededEvent=new ServiceComponentHostOpSucceededEvent(impl.getServiceComponentName(),impl.getHostName(),++timestamp);
  endTime=timestamp;
  impl.handleEvent(succeededEvent);
  Assert.assertEquals(startTime,impl.getLastOpStartTime());
  Assert.assertEquals(timestamp,impl.getLastOpLastUpdateTime());
  Assert.assertEquals(endTime,impl.getLastOpEndTime());
  Assert.assertEquals(completedState,impl.getState());
}
