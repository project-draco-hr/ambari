{
  this.injector=injector;
  injector.injectMembers(this);
  this.clusterEntity=clusterDAO.merge(clusterEntity);
  if (!clusterEntity.getClusterServiceEntities().isEmpty()) {
    for (    ClusterServiceEntity serviceEntity : clusterEntity.getClusterServiceEntities()) {
      services.put(serviceEntity.getServiceName(),serviceFactory.createExisting(this,serviceEntity));
    }
  }
  this.serviceComponentHosts=new HashMap<String,Map<String,Map<String,ServiceComponentHost>>>();
  this.serviceComponentHostsByHost=new HashMap<String,List<ServiceComponentHost>>();
  this.desiredStackVersion=new StackId();
  configs=new HashMap<String,Map<String,Config>>();
  if (!clusterEntity.getClusterConfigEntities().isEmpty()) {
    for (    ClusterConfigEntity entity : clusterEntity.getClusterConfigEntities()) {
      if (!configs.containsKey(entity.getType())) {
        configs.put(entity.getType(),new HashMap<String,Config>());
      }
      Config config=configFactory.createExisting(this,entity);
      configs.get(entity.getType()).put(entity.getTag(),config);
    }
  }
}
