{
  injector.injectMembers(this);
  this.clusterEntity=clusterEntity;
  this.serviceComponentHosts=new HashMap<String,Map<String,Map<String,ServiceComponentHost>>>();
  this.serviceComponentHostsByHost=new HashMap<String,List<ServiceComponentHost>>();
  this.desiredStackVersion=gson.fromJson(clusterEntity.getDesiredStackVersion(),StackId.class);
  configs=new HashMap<String,Map<String,Config>>();
  if (!clusterEntity.getClusterConfigEntities().isEmpty()) {
    for (    ClusterConfigEntity entity : clusterEntity.getClusterConfigEntities()) {
      if (!configs.containsKey(entity.getType())) {
        configs.put(entity.getType(),new HashMap<String,Config>());
      }
      Config config=configFactory.createExisting(this,entity);
      configs.get(entity.getType()).put(entity.getTag(),config);
    }
  }
}
