{
  loadConfigGroups();
  clusterGlobalLock.writeLock().lock();
  try {
    writeLock.lock();
    try {
      LOG.debug("Adding a new Config group" + ", clusterName = " + getClusterName() + ", groupName = "+ configGroup.getName()+ ", tag = "+ configGroup.getTag());
      if (clusterConfigGroups.containsKey(configGroup.getId())) {
        throw new AmbariException("Config group already exists" + ", clusterName = " + getClusterName() + ", groupName = "+ configGroup.getName()+ ", groupId = "+ configGroup.getId()+ ", tag = "+ configGroup.getTag());
      }
      clusterConfigGroups.put(configGroup.getId(),configGroup);
    }
  finally {
      writeLock.unlock();
    }
  }
  finally {
    clusterGlobalLock.writeLock().unlock();
  }
}
