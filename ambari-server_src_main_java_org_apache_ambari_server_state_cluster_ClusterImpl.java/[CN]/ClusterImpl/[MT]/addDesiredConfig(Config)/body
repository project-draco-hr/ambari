{
  Config currentDesired=getDesiredConfigByType(config.getType());
  if (null != currentDesired && currentDesired.getVersionTag().equals(config.getVersionTag())) {
    return;
  }
  Collection<ClusterConfigMappingEntity> entities=clusterEntity.getConfigMappingEntities();
  for (  ClusterConfigMappingEntity e : entities) {
    if (e.isSelected() > 0 && e.getType().equals(config.getType())) {
      e.setSelected(0);
    }
  }
  ClusterConfigMappingEntity entity=new ClusterConfigMappingEntity();
  entity.setClusterEntity(clusterEntity);
  entity.setClusterId(clusterEntity.getClusterId());
  entity.setCreateTimestamp(Long.valueOf(new java.util.Date().getTime()));
  entity.setSelected(1);
  entity.setType(config.getType());
  entity.setVersion(config.getVersionTag());
  entities.add(entity);
  clusterEntity.setConfigMappingEntities(entities);
  clusterDAO.merge(clusterEntity);
}
