{
  Map<String,DesiredConfig> map=new HashMap<String,DesiredConfig>();
  for (  ClusterConfigMappingEntity e : clusterEntity.getConfigMappingEntities()) {
    if (e.isSelected() > 0) {
      DesiredConfig c=new DesiredConfig();
      c.setServiceName(null);
      c.setVersion(e.getVersion());
      List<HostConfigMappingEntity> hostMappings=hostConfigMappingDAO.findSelectedHostsByType(clusterEntity.getClusterId().longValue(),e.getType());
      List<DesiredConfig.HostOverride> hosts=new ArrayList<DesiredConfig.HostOverride>();
      for (      HostConfigMappingEntity mappingEntity : hostMappings) {
        hosts.add(new DesiredConfig.HostOverride(mappingEntity.getHostName(),mappingEntity.getVersion()));
      }
      c.setHostOverrides(hosts);
      map.put(e.getType(),c);
    }
  }
  return map;
}
