{
  Collection<ClusterConfigMappingEntity> entities=clusterEntity.getConfigMappingEntities();
  for (  ClusterConfigMappingEntity e : entities) {
    if (e.isSelected() > 0 && e.getType().equals(type)) {
      e.setSelected(0);
    }
  }
  ClusterConfigMappingEntity entity=new ClusterConfigMappingEntity();
  entity.setClusterEntity(clusterEntity);
  entity.setClusterId(clusterEntity.getClusterId());
  entity.setCreateTimestamp(System.currentTimeMillis());
  entity.setSelected(1);
  entity.setUser(user);
  entity.setType(type);
  entity.setTag(tag);
  entities.add(entity);
  clusterDAO.merge(clusterEntity);
}
