{
  Map<Long,ConfigGroup> configGroups=new HashMap<Long,ConfigGroup>();
  Map<Long,ConfigGroup> configGroupMap=getConfigGroups();
  clusterGlobalLock.readLock().lock();
  try {
    HostEntity hostEntity=hostDAO.findByName(hostname);
    if (hostEntity != null) {
      Set<ConfigGroupHostMapping> hostMappingEntities=configGroupHostMappingDAO.findByHostId(hostEntity.getHostId());
      if (hostMappingEntities != null && !hostMappingEntities.isEmpty()) {
        for (        ConfigGroupHostMapping entity : hostMappingEntities) {
          ConfigGroup configGroup=configGroupMap.get(entity.getConfigGroupId());
          if (configGroup != null && !configGroups.containsKey(configGroup.getId())) {
            configGroups.put(configGroup.getId(),configGroup);
          }
        }
      }
    }
  }
  finally {
    clusterGlobalLock.readLock().unlock();
  }
  return configGroups;
}
