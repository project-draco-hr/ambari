{
  Map<Long,ConfigGroup> configGroupMap=getConfigGroups();
  Map<Long,ConfigGroup> configGroups=new HashMap<Long,ConfigGroup>();
  clusterGlobalLock.readLock().lock();
  try {
    readLock.lock();
    try {
      Set<ConfigGroupHostMapping> hostMappingEntities=configGroupHostMappingDAO.findByHost(hostname);
      if (hostMappingEntities != null && !hostMappingEntities.isEmpty()) {
        for (        ConfigGroupHostMapping entity : hostMappingEntities) {
          ConfigGroup configGroup=configGroupMap.get(entity.getConfigGroupId());
          if (configGroup != null && !configGroups.containsKey(configGroup.getId())) {
            configGroups.put(configGroup.getId(),configGroup);
          }
        }
      }
      return configGroups;
    }
  finally {
      readLock.unlock();
    }
  }
  finally {
    clusterGlobalLock.readLock().unlock();
  }
}
