{
  clusterGlobalLock.writeLock().lock();
  try {
    for (    ServiceComponentHost serviceComponentHost : serviceComponentHosts) {
      Service service=getService(serviceComponentHost.getServiceName());
      ServiceComponent serviceComponent=service.getServiceComponent(serviceComponentHost.getServiceComponentName());
      serviceComponent.addServiceComponentHost(serviceComponentHost);
    }
    persistServiceComponentHosts(serviceComponentHosts);
  }
  finally {
    clusterGlobalLock.writeLock().unlock();
  }
}
