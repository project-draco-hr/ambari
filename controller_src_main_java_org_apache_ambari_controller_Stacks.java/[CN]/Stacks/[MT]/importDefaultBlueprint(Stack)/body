{
  Blueprint blueprint;
  URL blueprintUrl;
  try {
    blueprintUrl=new URL(stack.getBlueprintLocationURL());
    ObjectMapper m=new ObjectMapper();
    InputStream is=blueprintUrl.openStream();
    blueprint=m.readValue(is,Blueprint.class);
    validateDefaultBlueprint(blueprint,stack);
  }
 catch (  WebApplicationException we) {
    throw we;
  }
catch (  Exception e) {
    this.stacks.get(stack.getName()).remove(stack.getStackRevision());
    if (this.stacks.get(stack.getName()).keySet().isEmpty()) {
      this.stacks.remove(stack.getName());
    }
    throw new WebApplicationException((new ExceptionResponse(e)).get());
  }
  return blueprint;
}
