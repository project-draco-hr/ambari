{
  Blueprint blueprint;
  try {
    URL blueprintUrl=new URL(stack.getBlueprintLocationURL());
    ObjectMapper m=new ObjectMapper();
    InputStream is=blueprintUrl.openStream();
    blueprint=m.readValue(is,Blueprint.class);
  }
 catch (  Exception e) {
    this.stacks.get(stack.getName()).remove(stack.getStackRevision());
    if (this.stacks.get(stack.getName()).keySet().isEmpty()) {
      this.stacks.remove(stack.getName());
    }
    throw new WebApplicationException(e,Response.Status.BAD_REQUEST);
  }
  return blueprint;
}
