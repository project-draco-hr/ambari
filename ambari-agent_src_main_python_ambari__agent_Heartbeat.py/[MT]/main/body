def main(argv=None):
    from ambari_agent.ActionQueue import ActionQueue
    from ambari_agent.AmbariConfig import AmbariConfig
    from ambari_agent.Controller import Controller
    cfg = AmbariConfig()
    if os.path.exists(AmbariConfig.getConfigFile()):
        cfg.read(AmbariConfig.getConfigFile())
    else:
        raise Exception('No config found, use default')
    ctl = Controller(cfg)
    actionQueue = ActionQueue(cfg, ctl)
    heartbeat = Heartbeat(actionQueue)
    print json.dumps(heartbeat.build('3', 3))
