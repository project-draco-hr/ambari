{
  File temporaryDirectory;
  File indexFile;
  KerberosActionDataFileBuilder kerberosActionDataFileBuilder=null;
  try {
    temporaryDirectory=File.createTempFile(".ambari_",".d");
  }
 catch (  IOException e) {
    throw new AmbariException("Unexpected error",e);
  }
  if (!temporaryDirectory.delete() || !temporaryDirectory.mkdirs()) {
    throw new AmbariException("Failed to create temporary directory");
  }
  dataDir=temporaryDirectory.getAbsolutePath();
  System.out.println("dataDir: " + dataDir);
  indexFile=new File(temporaryDirectory,KerberosActionDataFile.DATA_FILE_NAME);
  kerberosActionDataFileBuilder=new KerberosActionDataFileBuilder(indexFile);
  kerberosActionDataFileBuilder.addRecord("c6403.ambari.apache.org","HDFS","DATANODE","dn/_HOST@_REALM","hdfs-site/dfs.namenode.kerberos.principal","/etc/security/keytabs/dn.service.keytab","hdfs","r","hadoop","","hdfs-site/dfs.namenode.keytab.file");
  kerberosActionDataFileBuilder.close();
  File hostDirectory=new File(dataDir,"c6403.ambari.apache.org");
  if (hostDirectory.exists() || hostDirectory.mkdirs()) {
    File file=new File(hostDirectory,DigestUtils.sha1Hex("/etc/security/keytabs/dn.service.keytab"));
    if (!file.exists()) {
      file.createNewFile();
    }
    FileWriter fw=new FileWriter(file.getAbsoluteFile());
    BufferedWriter bw=new BufferedWriter(fw);
    bw.write("hello");
    bw.close();
  }
}
