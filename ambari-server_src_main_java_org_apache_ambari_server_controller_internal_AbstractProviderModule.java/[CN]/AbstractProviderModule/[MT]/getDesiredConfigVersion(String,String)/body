{
  ResourceProvider clusterResourceProvider=getResourceProvider(Resource.Type.Cluster);
  Predicate basePredicate=new PredicateBuilder().property(ClusterResourceProvider.CLUSTER_NAME_PROPERTY_ID).equals(clusterName).toPredicate();
  Set<Resource> clusterResource=null;
  try {
    clusterResource=clusterResourceProvider.getResources(PropertyHelper.getReadRequest(ClusterResourceProvider.CLUSTER_NAME_PROPERTY_ID,ClusterResourceProvider.CLUSTER_DESIRED_CONFIGS_PROPERTY_ID),basePredicate);
  }
 catch (  NoSuchResourceException e) {
    LOG.error("Resource for the desired config not found. " + e);
  }
  String versionTag="version1";
  if (clusterResource != null) {
    for (    Resource resource : clusterResource) {
      Map<String,Object> configs=resource.getPropertiesMap().get(ClusterResourceProvider.CLUSTER_DESIRED_CONFIGS_PROPERTY_ID);
      if (configs != null) {
        DesiredConfig config=(DesiredConfig)configs.get(configType);
        if (config != null) {
          versionTag=config.getVersion();
        }
      }
    }
  }
  return versionTag;
}
