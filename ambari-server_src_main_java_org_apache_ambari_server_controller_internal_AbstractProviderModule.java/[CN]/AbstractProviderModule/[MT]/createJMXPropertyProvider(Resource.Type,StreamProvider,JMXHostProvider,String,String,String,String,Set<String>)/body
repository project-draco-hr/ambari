{
  updateClusterVersion();
  Map<PropertyHelper.MetricsVersion,AbstractPropertyProvider> providers=new HashMap<PropertyHelper.MetricsVersion,AbstractPropertyProvider>();
  for (  PropertyHelper.MetricsVersion version : PropertyHelper.MetricsVersion.values()) {
    providers.put(version,new JMXPropertyProvider(PropertyHelper.getJMXPropertyIds(type,version),streamProvider,jmxHostProvider,clusterNamePropertyId,hostNamePropertyId,componentNamePropertyId,statePropertyId,healthyStates));
  }
  return new VersioningPropertyProvider(clusterVersionsMap,providers,clusterNamePropertyId);
}
