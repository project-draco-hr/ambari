{
  updateClusterVersion();
  Map<PropertyHelper.MetricsVersion,AbstractPropertyProvider> providers=new HashMap<PropertyHelper.MetricsVersion,AbstractPropertyProvider>();
  AbstractPropertyProvider lastProvider=null;
  for (  PropertyHelper.MetricsVersion version : PropertyHelper.MetricsVersion.values()) {
    lastProvider=new JMXPropertyProvider(PropertyHelper.getJMXPropertyIds(type,version),streamProvider,jmxHostProvider,clusterNamePropertyId,hostNamePropertyId,componentNamePropertyId,statePropertyId,healthyStates);
    providers.put(version,lastProvider);
  }
  return new VersioningPropertyProvider(clusterVersionsMap,providers,lastProvider,clusterNamePropertyId);
}
