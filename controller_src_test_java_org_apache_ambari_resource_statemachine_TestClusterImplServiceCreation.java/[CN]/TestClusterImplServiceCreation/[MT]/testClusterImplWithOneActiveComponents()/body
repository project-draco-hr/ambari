{
  ComponentPlugin pluginWActiveRole=mock(ComponentPlugin.class);
  String[] servicesWithActive={"abc"};
  when(pluginWActiveRole.getActiveRoles()).thenReturn(servicesWithActive);
  ComponentPlugin pluginWOActiveRole=mock(ComponentPlugin.class);
  String[] servicesNoActive={};
  when(pluginWOActiveRole.getActiveRoles()).thenReturn(servicesNoActive);
  ClusterImpl clusterImpl=buildClusterImplWithComponents(pluginWActiveRole,pluginWOActiveRole);
  assertEquals(clusterImpl.getServices().size(),1,"number of components with active service");
}
