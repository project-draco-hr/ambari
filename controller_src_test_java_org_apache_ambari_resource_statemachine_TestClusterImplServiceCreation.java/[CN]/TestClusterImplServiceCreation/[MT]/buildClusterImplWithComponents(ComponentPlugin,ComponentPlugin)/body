{
  ClusterDefinition cdef=mock(ClusterDefinition.class);
  when(cdef.getEnabledServices()).thenReturn(Arrays.asList("comp1","comp2"));
  Cluster cluster=mock(Cluster.class);
  when(cluster.getClusterDefinition(anyInt())).thenReturn(cdef);
  when(cluster.getComponentDefinition("comp1")).thenReturn(componentPlugin1);
  when(cluster.getComponentDefinition("comp2")).thenReturn(componentPlugin2);
  ClusterImpl clusterImpl=new ClusterImpl(cluster,1);
  return clusterImpl;
}
