{
  if (payload == null || !payload.containsKey(ServerAction.PayloadName.CLUSTER_NAME) || !payload.containsKey(ServerAction.PayloadName.CURRENT_STACK_VERSION)) {
    throw new AmbariException("Invalid payload.");
  }
  StackId currentStackId=new StackId(payload.get(ServerAction.PayloadName.CURRENT_STACK_VERSION));
  final Cluster cluster=clusters.getCluster(payload.get(ServerAction.PayloadName.CLUSTER_NAME));
  cluster.setCurrentStackVersion(currentStackId);
  cluster.refresh();
}
