{
  LOG.info("Dequeue all elements for hostname: " + hostname);
  Queue<AgentCommand> q=getQueue(hostname);
  if (q == null) {
    LOG.warn("No queue for host: " + hostname);
    return null;
  }
  List<AgentCommand> l=new ArrayList<AgentCommand>();
synchronized (q) {
    while (true) {
      try {
        l.add(q.remove());
      }
 catch (      NoSuchElementException ex) {
        return l;
      }
    }
  }
}
