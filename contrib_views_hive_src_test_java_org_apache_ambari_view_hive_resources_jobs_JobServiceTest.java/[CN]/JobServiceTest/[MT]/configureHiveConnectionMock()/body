{
  TGetOperationStatusResp statusResp=getOperationStatusResp();
  TOperationHandle operationHandle=getExecutionOperationHandle();
  Connection connection=createNiceMock(Connection.class);
  expect(connection.executeAsync(anyString())).andReturn(operationHandle).anyTimes();
  expect(connection.getLogs(anyObject(TOperationHandle.class))).andReturn("some logs").anyTimes();
  expect(connection.getOperationStatus(anyObject(TOperationHandle.class))).andReturn(statusResp).anyTimes();
  replay(connection);
  return connection;
}
