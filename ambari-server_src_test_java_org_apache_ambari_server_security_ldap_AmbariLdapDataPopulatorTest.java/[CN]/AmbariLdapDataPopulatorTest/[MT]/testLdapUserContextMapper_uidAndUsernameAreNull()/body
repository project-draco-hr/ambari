{
  LdapServerProperties ldapServerProperties=createNiceMock(LdapServerProperties.class);
  expect(ldapServerProperties.getUsernameAttribute()).andReturn("cn").once();
  DirContextAdapter adapter=createNiceMock(DirContextAdapter.class);
  expect(adapter.getStringAttribute("cn")).andReturn(null);
  expect(adapter.getStringAttribute("uid")).andReturn(null);
  replay(ldapServerProperties,adapter);
  Set<LdapUserDto> userResultSet=new HashSet<LdapUserDto>();
  AmbariLdapDataPopulator.LdapUserContextMapper ldapUserContextMapper=new AmbariLdapDataPopulator.LdapUserContextMapper(userResultSet,ldapServerProperties);
  ldapUserContextMapper.mapFromContext(adapter);
  assertEquals(0,userResultSet.size());
}
