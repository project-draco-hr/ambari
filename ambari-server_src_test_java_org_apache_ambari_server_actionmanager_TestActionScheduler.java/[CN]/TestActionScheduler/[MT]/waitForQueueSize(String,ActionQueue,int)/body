{
  while (true) {
    List<AgentCommand> ac=aq.dequeueAll(hostname);
    if (ac != null) {
      if (ac.size() == expectedQueueSize) {
        return ac;
      }
 else       if (ac.size() > expectedQueueSize) {
        Assert.fail("Expected size : " + expectedQueueSize + " Actual size="+ ac.size());
      }
    }
    Thread.sleep(100);
  }
}
