{
  Set<String> addedOperationIds=new HashSet<>();
  List<Job> allJobs=new LinkedList<Job>();
  List<HiveQueryId> queries=ats.getHiveQueryIdsList(username);
  for (  HiveQueryId atsHiveQuery : queries) {
    TezDagId atsTezDag=getTezDagFromHiveQueryId(atsHiveQuery);
    JobImpl atsJob;
    if (hasOperationId(atsHiveQuery)) {
      try {
        Job viewJob=getJobByOperationId(urlSafeBase64ToHexString(atsHiveQuery.operationId));
        saveJobInfoIfNeeded(atsHiveQuery,atsTezDag,viewJob);
        atsJob=mergeAtsJobWithViewJob(atsHiveQuery,atsTezDag,viewJob);
      }
 catch (      ItemNotFound itemNotFound) {
        atsJob=atsOnlyJob(atsHiveQuery,atsTezDag);
      }
    }
 else {
      atsJob=atsOnlyJob(atsHiveQuery,atsTezDag);
    }
    allJobs.add(atsJob);
    addedOperationIds.add(atsHiveQuery.operationId);
  }
  return allJobs;
}
