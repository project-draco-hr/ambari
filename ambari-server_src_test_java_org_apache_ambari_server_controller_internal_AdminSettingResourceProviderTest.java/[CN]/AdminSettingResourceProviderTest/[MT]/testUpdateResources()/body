{
  String name="motd";
  AdminSettingEntity oldEntity=newEntity(name);
  AdminSettingEntity updatedEntity=oldEntity.clone();
  updatedEntity.setContent("{text}");
  updatedEntity.setSettingType("new-type");
  Map<String,Object> properties=new HashMap<>();
  properties.put(ADMINSETTING_NAME_PROPERTY_ID,name);
  properties.put(ADMINSETTING_CONTENT_PROPERTY_ID,updatedEntity.getContent());
  properties.put(ADMINSETTING_SETTING_TYPE_PROPERTY_ID,updatedEntity.getSettingType());
  Request request=PropertyHelper.getUpdateRequest(properties,null);
  PredicateBuilder pb=new PredicateBuilder();
  Predicate predicate=pb.begin().property(ADMINSETTING_NAME_PROPERTY_ID).equals(name).end().toPredicate();
  Capture<AdminSettingEntity> capture=Capture.newInstance();
  expect(dao.findByName(name)).andReturn(oldEntity);
  expect(dao.merge(capture(capture))).andReturn(updatedEntity);
  mockControl.replay();
  RequestStatus response=resourceProvider.updateResources(request,predicate);
  AdminSettingEntity capturedEntity=capture.getValue();
  assertEquals(RequestStatus.Status.Complete,response.getStatus());
  assertEquals(updatedEntity.getId(),capturedEntity.getId());
  assertEquals(updatedEntity.getName(),capturedEntity.getName());
  assertEquals(updatedEntity.getSettingType(),capturedEntity.getSettingType());
  assertEquals(updatedEntity.getContent(),capturedEntity.getContent());
  assertEquals(updatedEntity.getUpdatedBy(),capturedEntity.getUpdatedBy());
}
