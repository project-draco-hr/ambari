def hostname():
    config = AmbariConfig.config
    try:
        scriptname = config.get('agent', 'hostname_script')
        try:
            osStat = subprocess.Popen([scriptname], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
            (out, err) = osStat.communicate()
            if ((0 == osStat.returncode) and (0 != len(out.strip()))):
                return out.strip()
            else:
                return socket.getfqdn()
        except:
            return socket.getfqdn()
    except:
        return socket.getfqdn()
