{
switch (requestType) {
case GET:
    return new GetRequest(headers,body,uriInfo,resource);
case PUT:
  return new PutRequest(headers,body,uriInfo,resource);
case DELETE:
return new DeleteRequest(headers,body,uriInfo,resource);
case POST:
return (uriInfo.getQueryParameters().isEmpty() || body == null) ? new PostRequest(headers,body,uriInfo,resource) : new QueryPostRequest(headers,body,uriInfo,resource);
default :
throw new IllegalArgumentException("Invalid request type: " + requestType);
}
}
