def test_update_open_files_ulimit(self):
    config = AmbariConfig()
    open_files_ulimit = 10240
    config.set_ulimit_open_files(open_files_ulimit)
    main.update_open_files_ulimit(config)
    (soft_limit, hard_limit) = resource.getrlimit(resource.RLIMIT_NOFILE)
    self.assertEquals(hard_limit, open_files_ulimit)
