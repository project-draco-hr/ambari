def as_user(command, user, env=SUDO_ENVIRONMENT_PLACEHOLDER):
    if isinstance(command, (list, tuple)):
        command = string_cmd_from_args_list(command)
    env = (get_environment_str(add_current_path_to_env(env)) if (env != SUDO_ENVIRONMENT_PLACEHOLDER) else SUDO_ENVIRONMENT_PLACEHOLDER)
    export_command = 'export {0} > /dev/null ; '.format(env)
    return '/usr/bin/sudo su {0} -l -s /bin/bash -c {1}'.format(user, quote_bash_args((export_command + command)))
