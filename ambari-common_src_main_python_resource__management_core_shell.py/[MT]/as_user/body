def as_user(command, user, env=None):
    if isinstance(command, (list, tuple)):
        command = string_cmd_from_args_list(command)
    export_env = ('export {0} ; '.format(get_environment_str(add_current_path_to_env(env))) if env else EXPORT_PLACEHOLDER)
    return '/usr/bin/sudo su {0} -l -s /bin/bash -c {1}'.format(user, quote_bash_args((export_env + command)))
