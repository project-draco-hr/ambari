{
  this.context=context;
  proxy=new Proxy(context.getURLStreamProvider());
  proxy.setUseAuthorization(true);
  proxy.setUsername(context.getProperties().get("ambari.server.username"));
  proxy.setPassword(context.getProperties().get("ambari.server.password"));
  HashMap<String,String> customHeaders=new HashMap<String,String>();
  customHeaders.put("X-Requested-By","view-capacity-scheduler");
  proxy.setCustomHeaders(customHeaders);
  baseUrl=context.getProperties().get("ambari.server.url");
  URL url=null;
  try {
    url=new URL(baseUrl);
  }
 catch (  MalformedURLException ex) {
    throw new ServiceFormattedException("Error in ambari.server.url property: " + ex.getMessage(),ex);
  }
  String clusterName=url.getFile();
  serverUrl=baseUrl.substring(0,baseUrl.length() - clusterName.length());
}
