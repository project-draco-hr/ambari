def configureAgent(server_hostname, user_run_as):
    ' Configure the agent so that it has all the configs knobs properly installed '
    osCommand = ['sed', '-i.bak', (('s/hostname=localhost/hostname=' + server_hostname) + '/g'), '/etc/ambari-agent/conf/ambari-agent.ini']
    ret = execOsCommand(osCommand)
    if (ret['exitstatus'] != 0):
        return ret
    osCommand = ['sed', '-i.bak', (('s/run_as_user=.*$/run_as_user=' + user_run_as) + '/g'), '/etc/ambari-agent/conf/ambari-agent.ini']
    ret = execOsCommand(osCommand)
    return ret
