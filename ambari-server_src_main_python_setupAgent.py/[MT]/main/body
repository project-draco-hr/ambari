def main(argv=None):
    scriptDir = os.path.realpath(os.path.dirname(argv[0]))
    onlyargs = argv[1:]
    passPhrase = onlyargs[0]
    hostName = onlyargs[1]
    projectVersion = None
    if (len(onlyargs) > 2):
        projectVersion = onlyargs[2]
    if ((projectVersion is None) or (projectVersion == 'null')):
        projectVersion = ''
    projectVersion = getOptimalVersion(projectVersion)
    if (projectVersion != ''):
        projectVersion = ('-' + projectVersion)
    if is_suse():
        installAgentSuse(projectVersion)
    else:
        installPreReq()
        installAgent(projectVersion)
    configureAgent(hostName)
    sys.exit(runAgent(passPhrase))
