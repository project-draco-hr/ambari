def getOptimalVersion(initialProjectVersion):
    optimalVersion = initialProjectVersion
    ret = findNearestAgentPackageVersion(optimalVersion)
    if ((ret['exitstatus'] == 0) and (ret['log'][0].strip() != '') and (ret['log'][0].strip() == initialProjectVersion)):
        optimalVersion = ret['log'][0].strip()
        retcode = 0
    else:
        ret = getAvaliableAgentPackageVersions()
        retcode = 1
        optimalVersion = ret['log']
    return {'exitstatus': retcode, 'log': optimalVersion, }
