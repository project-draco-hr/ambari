def assert_configure_secured(self):
    self.assertResourceCalled('Directory', '/usr/hdp/current/ranger-admin/conf', owner='ranger', group='ranger', create_parents=True)
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/ews/lib/mysql-connector-java-old.jar', action=['delete'])
    self.assertResourceCalled('File', '/tmp/mysql-connector-java.jar', content=DownloadSource('http://c6401.ambari.apache.org:8080/resources//mysql-connector-java.jar'), mode=420)
    self.assertResourceCalled('Execute', ('cp', '--remove-destination', '/tmp/mysql-connector-java.jar', '/usr/hdp/current/ranger-admin/ews/lib'), sudo=True, path=['/bin', '/usr/bin/'])
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/ews/lib/mysql-connector-java.jar', mode=420)
    self.assertResourceCalled('ModifyPropertiesFile', '/usr/hdp/current/ranger-admin/install.properties', properties=self.getConfig()['configurations']['admin-properties'], owner='ranger')
    self.assertResourceCalled('ModifyPropertiesFile', '/usr/hdp/current/ranger-admin/install.properties', owner='ranger', properties={'SQL_CONNECTOR_JAR': '/usr/hdp/current/ranger-admin/ews/lib/mysql-connector-java.jar', })
    self.assertResourceCalled('File', '/usr/lib/ambari-agent/DBConnectionVerification.jar', content=DownloadSource('http://c6401.ambari.apache.org:8080/resources/DBConnectionVerification.jar'), mode=420)
    self.assertResourceCalled('Execute', "/usr/jdk64/jdk1.7.0_45/bin/java -cp /usr/lib/ambari-agent/DBConnectionVerification.jar:/usr/hdp/current/ranger-admin/ews/lib/mysql-connector-java.jar:/usr/hdp/current/ranger-admin/ews/lib/* org.apache.ambari.server.DBConnectionVerification 'jdbc:mysql://c6401.ambari.apache.org:3306/ranger01' rangeradmin01 rangeradmin01 com.mysql.jdbc.Driver", path=['/usr/sbin:/sbin:/usr/local/bin:/bin:/usr/bin'], tries=5, try_sleep=10, environment={})
    self.assertResourceCalled('Execute', ('ln', '-sf', '/usr/hdp/current/ranger-admin/ews/webapp/WEB-INF/classes/conf', '/usr/hdp/current/ranger-admin/conf'), not_if='ls /usr/hdp/current/ranger-admin/conf', only_if='ls /usr/hdp/current/ranger-admin/ews/webapp/WEB-INF/classes/conf', sudo=True)
    self.assertResourceCalled('Directory', '/usr/hdp/current/ranger-admin/', owner='ranger', group='ranger', recursive_ownership=True)
    self.assertResourceCalled('Directory', '/var/run/ranger', mode=493, owner='ranger', group='hadoop', cd_access='a', create_parents=True)
    self.assertResourceCalled('Directory', '/var/log/ranger/admin', owner='ranger', group='ranger', create_parents=True, cd_access='a', mode=493)
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/conf/ranger-admin-env-logdir.sh', content='export RANGER_ADMIN_LOG_DIR=/var/log/ranger/admin', owner='ranger', group='ranger', mode=493)
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/conf/ranger-admin-default-site.xml', owner='ranger', group='ranger')
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/conf/security-applicationContext.xml', owner='ranger', group='ranger')
    self.assertResourceCalled('Execute', ('ln', '-sf', '/usr/hdp/current/ranger-admin/ews/ranger-admin-services.sh', '/usr/bin/ranger-admin'), not_if='ls /usr/bin/ranger-admin', only_if='ls /usr/hdp/current/ranger-admin/ews/ranger-admin-services.sh', sudo=True)
    self.assertResourceCalled('XmlConfig', 'ranger-admin-site.xml', owner='ranger', group='ranger', conf_dir='/usr/hdp/current/ranger-admin/conf', configurations=self.getConfig()['configurations']['ranger-admin-site'], configuration_attributes=self.getConfig()['configuration_attributes']['ranger-admin-site'], mode=420)
    self.assertResourceCalled('Directory', '/usr/hdp/current/ranger-admin/conf/ranger_jaas', owner='ranger', group='ranger', mode=448)
    self.assertResourceCalled('File', '/usr/hdp/current/ranger-admin/ews/webapp/WEB-INF/log4j.properties', owner='ranger', group='ranger', content=self.getConfig()['configurations']['admin-log4j']['content'], mode=420)
    self.assertResourceCalled('Execute', ('/usr/jdk64/jdk1.7.0_45/bin/java', '-cp', '/usr/hdp/current/ranger-admin/cred/lib/*', 'org.apache.ranger.credentialapi.buildks', 'create', 'rangeradmin', '-value', 'rangeradmin01', '-provider', 'jceks://file/etc/ranger/admin/rangeradmin.jceks'), environment={'JAVA_HOME': u'/usr/jdk64/jdk1.7.0_45', }, logoutput=True, sudo=True)
    self.assertResourceCalled('File', '/etc/ranger/admin/rangeradmin.jceks', owner='ranger', group='ranger', mode=416)
    self.assertResourceCalled('XmlConfig', 'core-site.xml', owner='ranger', group='ranger', conf_dir='/usr/hdp/current/ranger-admin/conf', configurations=self.getConfig()['configurations']['core-site'], configuration_attributes=self.getConfig()['configuration_attributes']['core-site'], mode=420)
