{
  if (stackToBeResolved.getModuleState() == ModuleState.INIT) {
    stackToBeResolved.resolve(null,allStacks,commonServices);
  }
 else   if (stackToBeResolved.getModuleState() == ModuleState.VISITED) {
    throw new AmbariException("Cycle detected while parsing stack definition");
  }
}
