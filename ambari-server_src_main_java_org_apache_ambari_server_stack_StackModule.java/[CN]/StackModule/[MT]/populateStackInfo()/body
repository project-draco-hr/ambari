{
  stackInfo.setName(stackDirectory.getStackDirName());
  stackInfo.setVersion(stackDirectory.getName());
  id=String.format("%s:%s",stackInfo.getName(),stackInfo.getVersion());
  LOG.debug("Adding new stack to known stacks" + ", stackName = " + stackInfo.getName() + ", stackVersion = "+ stackInfo.getVersion());
  StackMetainfoXml smx=stackDirectory.getMetaInfoFile();
  if (smx != null) {
    stackInfo.setMinUpgradeVersion(smx.getVersion().getUpgrade());
    stackInfo.setActive(smx.getVersion().isActive());
    stackInfo.setParentStackVersion(smx.getExtends());
    stackInfo.setStackHooksFolder(stackDirectory.getHooksDir());
    stackInfo.setRcoFileLocation(stackDirectory.getRcoFilePath());
    stackInfo.setKerberosDescriptorFileLocation(stackDirectory.getKerberosDescriptorFilePath());
    stackInfo.setUpgradesFolder(stackDirectory.getUpgradesDir());
    stackInfo.setUpgradePacks(stackDirectory.getUpgradePacks());
    stackInfo.setRoleCommandOrder(stackDirectory.getRoleCommandOrder());
    populateConfigurationModules();
  }
  try {
    populateServices();
  }
 catch (  Exception e) {
    LOG.error("Exception caught while populating services for stack: " + stackInfo.getName() + "-"+ stackInfo.getVersion());
    e.printStackTrace();
  }
}
