{
  Provider<EntityManager> entityManagerProvider=createNiceMock(Provider.class);
  EntityManager entityManager=createNiceMock(EntityManager.class);
  HostDAO hostDAO=createNiceMock(HostDAO.class);
  HostEntity hostEntity=createNiceMock(HostEntity.class);
  HostComponentStateEntity hostComponentStateEntity=createNiceMock(HostComponentStateEntity.class);
  expect(hostComponentStateEntity.getHostName()).andReturn("host1");
  expect(hostDAO.findByName("host1")).andReturn(hostEntity);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  expect(entityManager.merge(hostComponentStateEntity)).andReturn(hostComponentStateEntity).anyTimes();
  entityManager.remove(hostComponentStateEntity);
  hostEntity.removeHostComponentStateEntity(hostComponentStateEntity);
  expect(hostDAO.merge(hostEntity)).andReturn(hostEntity).anyTimes();
  replay(entityManagerProvider,entityManager,hostDAO,hostEntity,hostComponentStateEntity);
  HostComponentStateDAO dao=new HostComponentStateDAO();
  dao.entityManagerProvider=entityManagerProvider;
  dao.hostDAO=hostDAO;
  dao.remove(hostComponentStateEntity);
  verify(entityManagerProvider,entityManager,hostDAO,hostEntity,hostComponentStateEntity);
}
