{
  UserGroupInformation userGroupInformation=UserGroupInformation.getLoginUser();
  if (UserGroupInformation.isSecurityEnabled() && userGroupInformation != null && userGroupInformation.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.KERBEROS) {
    return getAuthenticatedConnection(spec,userGroupInformation);
  }
 else {
    return (HttpURLConnection)new URL(spec).openConnection();
  }
}
