{
  SolrClient mockSolrClient=EasyMock.strictMock(SolrClient.class);
  NamedList<Object> response=new NamedList<Object>();
  NamedList<Object> header=new NamedList<Object>();
  header.add("status",0);
  response.add("responseHeader",header);
  response.add("collections",new ArrayList<String>());
  EasyMock.expect(configMock.getSolrUrl()).andReturn(null);
  EasyMock.expect(configMock.getZkConnectString()).andReturn("dummyHost1:2181,dummyHost2:2181");
  EasyMock.expect(configMock.getConfigName()).andReturn("test_audit_logs_config_name");
  EasyMock.expect(configMock.getCollection()).andReturn("test_audit_logs_collection");
  EasyMock.expect(configMock.getSplitInterval()).andReturn("none");
  EasyMock.expect(configMock.getNumberOfShards()).andReturn(123);
  EasyMock.expect(configMock.getReplicationFactor()).andReturn(456);
  EasyMock.expect(configMock.getAliasNameIn()).andReturn("alias");
  EasyMock.expect(configMock.getRangerCollection()).andReturn("ranger_audit");
  EasyMock.expect(kerbConfigMock.isEnabled()).andReturn(false);
  EasyMock.expect(kerbConfigMock.getJaasFile()).andReturn("jaas_file");
  Capture<CollectionAdminRequest.Create> captureCreateRequest=EasyMock.newCapture(CaptureType.LAST);
  EasyMock.expect(mockSolrClient.request(EasyMock.anyObject(CollectionAdminRequest.List.class),EasyMock.anyString())).andReturn(response);
  mockSolrClient.request(EasyMock.capture(captureCreateRequest),EasyMock.anyString());
  EasyMock.expectLastCall().andReturn(response);
  EasyMock.replay(mockSolrClient,configMock,kerbConfigMock);
  dao.solrClient=mockSolrClient;
  dao.isZkConnectString=true;
  dao.postConstructor();
  EasyMock.verify(mockSolrClient);
  CollectionAdminRequest.Create createRequest=captureCreateRequest.getValue();
  Assert.assertEquals(createRequest.getConfigName(),"test_audit_logs_config_name");
  Assert.assertEquals(createRequest.getNumShards().intValue(),123);
  Assert.assertEquals(createRequest.getReplicationFactor().intValue(),456);
  Assert.assertEquals(createRequest.getCollectionName(),"test_audit_logs_collection");
}
