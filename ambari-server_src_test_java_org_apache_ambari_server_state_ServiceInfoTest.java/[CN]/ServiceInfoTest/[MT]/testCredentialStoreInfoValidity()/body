{
  String serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <supported>true</supported>\n"+ "          <enabled>false</enabled>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  Map<String,ServiceInfo> serviceInfoMap=getServiceInfo(serviceInfoXml);
  ServiceInfo serviceInfo=serviceInfoMap.get("RANGER");
  assertTrue(serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <supported>true</supported>\n"+ "          <enabled>true</enabled>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertTrue(serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <supported>false</supported>\n"+ "          <enabled>false</enabled>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertTrue(serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertTrue(serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <supported>false</supported>\n"+ "          <enabled>true</enabled>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertFalse("Credential store is enabled for a service that does not support it",serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertFalse("Credential store details not specified",serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <supported>true</supported>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertFalse("Credential store enabled not specified",serviceInfo.isValid());
  serviceInfoXml="<metainfo>\n" + "  <schemaVersion>2.0</schemaVersion>\n" + "  <services>\n"+ "    <service>\n"+ "      <name>RANGER</name>\n"+ "      <credential-store>\n"+ "          <enabled>true</enabled>\n"+ "      </credential-store>\n"+ "    </service>\n"+ "  </services>\n"+ "</metainfo>\n";
  serviceInfoMap=getServiceInfo(serviceInfoXml);
  serviceInfo=serviceInfoMap.get("RANGER");
  assertFalse("Credential store supported not specified",serviceInfo.isValid());
}
