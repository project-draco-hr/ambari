{
  BarGraphDataListResponse dataList=new BarGraphDataListResponse();
  SolrQuery solrQuery=queryGenerator.commonAuditFilterQuery(searchCriteria);
  String from=getFrom(searchCriteria.getStartTime());
  String to=getTo(searchCriteria.getEndTime());
  String unit=getUnit(searchCriteria.getUnit());
  List<BarGraphData> histogramData=new ArrayList<BarGraphData>();
  String jsonHistogramQuery=queryGenerator.buildJSONFacetTermTimeRangeQuery(LogSearchConstants.AUDIT_COMPONENT,LogSearchConstants.AUDIT_EVTTIME,from,to,unit).replace("\\","");
  try {
    SolrUtil.setJSONFacet(solrQuery,jsonHistogramQuery);
    SolrUtil.setRowCount(solrQuery,0);
    QueryResponse response=auditSolrDao.process(solrQuery);
    if (response == null) {
      return dataList;
    }
    SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
    if (jsonFacetResponse == null || jsonFacetResponse.toString().equals("{count=0}")) {
      return dataList;
    }
    extractValuesFromBucket(jsonFacetResponse,"x","y",histogramData);
    dataList.setGraphData(histogramData);
    return dataList;
  }
 catch (  SolrServerException|SolrException|IOException e) {
    logger.error(e);
    throw RESTErrorUtil.createRESTException(MessageEnums.SOLR_ERROR.getMessage().getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
