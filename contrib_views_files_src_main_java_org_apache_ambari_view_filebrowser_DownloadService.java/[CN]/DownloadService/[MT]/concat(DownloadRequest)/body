{
  StreamingOutput result=new StreamingOutput(){
    public void write(    OutputStream output) throws IOException, WebApplicationException {
      FSDataInputStream in=null;
      for (      String path : request.entries) {
        try {
          in=getApi(context).open(path);
          byte[] chunk=new byte[1024];
          while (in.read(chunk) != -1) {
            output.write(chunk);
          }
        }
 catch (        Exception ex) {
          ex.printStackTrace();
        }
 finally {
          if (in != null)           in.close();
        }
      }
    }
  }
;
  ResponseBuilder response=Response.ok(result);
  if (request.download) {
    response.header("Content-Disposition","inline; filename=\"concatResult.txt\"").type(MediaType.APPLICATION_OCTET_STREAM);
  }
 else {
    response.header("Content-Disposition","filename=\"concatResult.txt\"").type(MediaType.TEXT_PLAIN);
  }
  return response.build();
}
