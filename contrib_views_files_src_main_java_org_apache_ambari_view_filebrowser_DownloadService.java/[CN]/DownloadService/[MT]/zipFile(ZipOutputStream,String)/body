{
  try {
    zip.putNextEntry(new ZipEntry(path.substring(1)));
    FSDataInputStream in=getApi(context).open(path);
    byte[] chunk=new byte[1024];
    while (in.read(chunk) != -1) {
      zip.write(chunk);
    }
  }
 catch (  IOException ex) {
    String msg="Error zipping file " + path.substring(1) + ": "+ ex.getMessage();
    logger.error(msg);
    zip.write(ex.getMessage().getBytes());
    throw new ServiceFormattedException(ex.getMessage(),ex);
  }
 finally {
    zip.closeEntry();
  }
}
