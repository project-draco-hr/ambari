@patch('ambari_client.http_client.HttpClient')
def test_get_all_clusters_valid(self, http_client):
    '\n    Get all clusters.\n    This testcase checks if get_all_clusters returns a list of ModelList.\n    '
    http_client_mock = MagicMock()
    http_client.return_value = http_client_mock
    mocked_code = '200'
    mocked_content = 'text/plain'
    expected_output = {'items': [{'cluster_name': u'test1', 'version': u'HDP-1.2.1', }], }
    linestring = open('json/get_all_clusters.json', 'r').read()
    mocked_response = linestring
    http_client_mock.invoke.return_value = (mocked_response, mocked_code, mocked_content)
    client = AmbariClient('localhost', 8080, 'admin', 'admin', version=1, client=http_client_mock)
    all_clusters = client.get_all_clusters()
    self.assertEqual(len(all_clusters), 1, 'There should be a cluster from the response')
    self.assertEqual(all_clusters.to_json_dict(), expected_output, 'to_json_dict should convert ModelList')
