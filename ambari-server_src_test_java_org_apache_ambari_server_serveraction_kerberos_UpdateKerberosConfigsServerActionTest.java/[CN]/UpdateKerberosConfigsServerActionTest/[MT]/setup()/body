{
  setupIndexDat();
  setupConfigDat();
  expect(controller.getClusters()).andReturn(clusters).once();
  replay(controller);
  configHelper.updateConfigType(anyObject(Cluster.class),anyObject(AmbariManagementController.class),anyObject(String.class),anyObject(Map.class),anyObject(Collection.class),anyObject(String.class),anyObject(String.class));
  expectLastCall().atLeastOnce();
  replay(configHelper);
  replay(cluster);
  expect(clusters.getCluster(anyObject(String.class))).andReturn(cluster).once();
  replay(clusters);
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(AmbariManagementController.class).toInstance(controller);
      bind(ConfigHelper.class).toInstance(configHelper);
    }
  }
);
  action=injector.getInstance(UpdateKerberosConfigsServerAction.class);
}
