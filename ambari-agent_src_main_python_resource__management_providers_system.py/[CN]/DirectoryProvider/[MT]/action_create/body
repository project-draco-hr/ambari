def action_create(self):
    path = self.resource.path
    if (not os.path.exists(path)):
        self.log.info(('Creating directory %s' % self.resource))
        if self.resource.recursive:
            os.makedirs(path, (self.resource.mode or 493))
        else:
            os.mkdir(path, (self.resource.mode or 493))
        self.resource.updated()
    if (not os.path.isdir(path)):
        raise Fail(('Applying %s failed, file %s already exists' % (self.resource, path)))
    if _ensure_metadata(path, self.resource.owner, self.resource.group, mode=self.resource.mode, log=self.log):
        self.resource.updated()
