def action_run(self):
    if self.resource.creates:
        if os.path.exists(self.resource.creates):
            return
    self.log.info(('Executing %s' % self.resource))
    if (self.resource.path != []):
        self.resource.environment['PATH'] = ':'.join(self.resource.path)
    for i in range(0, self.resource.tries):
        try:
            shell.checked_call(self.resource.command, logoutput=self.resource.logoutput, cwd=self.resource.cwd, env=self.resource.environment, preexec_fn=_preexec_fn(self.resource))
            break
        except Fail as ex:
            if (i == (self.resource.tries - 1)):
                raise ex
            else:
                self.log.info('Retrying after %d seconds. Reason: %s', self.resource.try_sleep, str(ex))
                time.sleep(self.resource.try_sleep)
    self.resource.updated()
