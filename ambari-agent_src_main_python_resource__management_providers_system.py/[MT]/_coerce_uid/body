def _coerce_uid(user):
    try:
        uid = int(user)
    except ValueError:
        try:
            uid = pwd.getpwnam(user).pw_uid
        except KeyError:
            raise Fail(("User %s doesn't exist." % user))
    return uid
