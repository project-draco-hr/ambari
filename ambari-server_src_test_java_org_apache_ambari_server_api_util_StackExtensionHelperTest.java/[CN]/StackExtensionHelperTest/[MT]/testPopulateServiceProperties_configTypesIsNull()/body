{
  File stackRoot=new File(stackRootStr);
  StackExtensionHelper helper=new StackExtensionHelper(injector,stackRoot);
  File config=new File(stackRootStr + "HDP/2.1.1/services/PIG/configuration/pig-properties.xml".replaceAll("/",File.separator));
  ServiceInfo serviceInfo=createNiceMock(ServiceInfo.class);
  List<PropertyInfo> properties=createMock(List.class);
  expect(serviceInfo.getConfigTypes()).andReturn(new HashMap<String,Map<String,Map<String,String>>>()).times(2);
  expect(serviceInfo.getProperties()).andReturn(properties).times(1);
  expect(properties.addAll((Collection)anyObject())).andReturn(true).times(1);
  replay(properties);
  replay(serviceInfo);
  helper.populateServiceProperties(config,serviceInfo);
  verify(properties,serviceInfo);
}
