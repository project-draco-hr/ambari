{
  LOG.debug("Received event {}",event);
  Cluster cluster=event.getCluster();
  StackId desiredStackId=cluster.getDesiredStackVersion();
  ServiceComponentHost sch=event.getServiceComponentHost();
  m_stackVersionLock.lock();
  try {
    String repoVersion=sch.recalculateHostVersionState();
    cluster.recalculateClusterVersionState(desiredStackId,repoVersion);
  }
 catch (  Exception e) {
    LOG.error("Unable to propagate version for ServiceHostComponent on component: {}, host: {}. Error: {}",sch.getServiceComponentName(),sch.getHostName(),e.getMessage());
  }
 finally {
    m_stackVersionLock.unlock();
  }
}
