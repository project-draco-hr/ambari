{
  Map<String,String> properties=new HashMap<String,String>(originalProperties);
  for (  Map.Entry<String,String> entry : newProperties.entrySet()) {
    if (!properties.containsKey(entry.getKey()) || updateIfExists) {
      properties.put(entry.getKey(),entry.getValue());
    }
  }
  return properties;
}
