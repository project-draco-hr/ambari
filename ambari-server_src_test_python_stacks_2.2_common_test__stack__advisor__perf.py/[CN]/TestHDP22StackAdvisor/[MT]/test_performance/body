@patch('socket.getfqdn')
def test_performance(self, getfqdn_method):
    getfqdn_method.side_effect = (lambda host='perf400-a-1.c.pramod-thangali.internal': host)
    testDirectory = os.path.dirname(os.path.abspath(__file__))
    old_stack_advisor_path = os.path.join(testDirectory, '../../../../../test/resources/stacks/old_stack_advisor.py')
    current_stack_advisor_path = os.path.join(testDirectory, '../../../../../main/resources/stacks/stack_advisor.py')
    for folder_name in ['1', '2']:
        stack_advisor_old = self.instantiate_stack_advisor(testDirectory, old_stack_advisor_path)
        services = json.load(open(os.path.join(testDirectory, (folder_name + '/services.json'))))
        hosts = json.load(open(os.path.join(testDirectory, (folder_name + '/hosts.json'))))
        start = time.time()
        recommendation_old = stack_advisor_old.recommendComponentLayout(services, hosts)
        time_taken = (time.time() - start)
        print ('time taken by old stack_advisor.py = ' + str(time_taken))
        stack_advisor = self.instantiate_stack_advisor(testDirectory, current_stack_advisor_path)
        start = time.time()
        recommendation = stack_advisor.recommendComponentLayout(services, hosts)
        time_taken = (time.time() - start)
        print ('time taken by current stack_advisor.py = ' + str(time_taken))
        self.assertEquals(recommendation, recommendation_old, (("current stack_advisor gives different results running on folder '" + folder_name) + "'"))
