{
  InMemoryDefaultTestModule defaultTestModule=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(Modules.override(defaultTestModule).with(new TestActionDBAccessorModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  injector.injectMembers(this);
  clusters.addHost(serverHostName);
  clusters.getHost(serverHostName).persist();
  clusters.addHost(hostName);
  clusters.getHost(hostName).persist();
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(clusterName,stackId);
  db=injector.getInstance(ActionDBAccessorImpl.class);
  am=new ActionManager(5000,1200000,new ActionQueue(),clusters,db,new HostsMap((String)null),injector.getInstance(UnitOfWork.class),injector.getInstance(RequestFactory.class),null,null);
  EasyMock.replay(injector.getInstance(AuditLogger.class));
}
