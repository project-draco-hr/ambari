{
  Injector injector=Guice.createInjector(new Module(){
    @Override public void configure(    Binder binder){
      binder.bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      binder.bind(Configuration.class).toInstance(configuration);
      binder.bind(TimelineMetricCacheEntryFactory.class).toInstance(cacheEntryFactory);
    }
  }
);
  return injector.getInstance(TimelineMetricCacheProvider.class);
}
