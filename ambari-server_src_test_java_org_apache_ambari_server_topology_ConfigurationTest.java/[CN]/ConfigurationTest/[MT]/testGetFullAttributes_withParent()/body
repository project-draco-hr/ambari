{
  Configuration configuration=createConfigurationWithParents_AttributesOnly();
  Map<String,Map<String,Map<String,String>>> fullAttributes=configuration.getFullAttributes();
  assertEquals(2,fullAttributes.size());
  Map<String,Map<String,String>> type1Attributes=fullAttributes.get("type1");
  assertEquals(4,type1Attributes.size());
  Map<String,String> attribute1Properties=type1Attributes.get("attribute1");
  assertEquals(5,attribute1Properties.size());
  assertEquals("val1.3",attribute1Properties.get("prop1"));
  assertEquals("val2.2",attribute1Properties.get("prop2"));
  assertEquals("val3.1",attribute1Properties.get("prop3"));
  assertEquals("val6.2",attribute1Properties.get("prop6"));
  assertEquals("val9.3",attribute1Properties.get("prop9"));
  Map<String,String> attribute2Properties=type1Attributes.get("attribute2");
  assertEquals(2,attribute2Properties.size());
  assertEquals("val4.3",attribute2Properties.get("prop4"));
  assertEquals("val5.1",attribute2Properties.get("prop5"));
  Map<String,String> attribute3Properties=type1Attributes.get("attribute3");
  assertEquals(2,attribute3Properties.size());
  assertEquals("val7.3",attribute3Properties.get("prop7"));
  assertEquals("val8.2",attribute3Properties.get("prop8"));
  Map<String,String> attribute4Properties=type1Attributes.get("attribute4");
  assertEquals(2,attribute4Properties.size());
  assertEquals("val10.3",attribute4Properties.get("prop10"));
  assertEquals("val11.3",attribute4Properties.get("prop11"));
  Map<String,Map<String,String>> type2Attributes=fullAttributes.get("type2");
  assertEquals(2,type2Attributes.size());
  Map<String,String> attribute100Properties=type2Attributes.get("attribute100");
  assertEquals(3,attribute100Properties.size());
  assertEquals("val100.3",attribute100Properties.get("prop100"));
  assertEquals("val101.1",attribute100Properties.get("prop101"));
  assertEquals("val102.3",attribute100Properties.get("prop102"));
  Map<String,String> attribute101Properties=type2Attributes.get("attribute101");
  assertEquals(2,attribute101Properties.size());
  assertEquals("val100.2",attribute101Properties.get("prop100"));
  assertEquals("val101.1",attribute101Properties.get("prop101"));
  Configuration expectedConfiguration=createConfigurationWithParents_AttributesOnly();
  assertEquals(expectedConfiguration.getAttributes(),configuration.getAttributes());
  assertEquals(expectedConfiguration.getParentConfiguration().getAttributes(),configuration.getParentConfiguration().getAttributes());
  assertEquals(expectedConfiguration.getParentConfiguration().getParentConfiguration().getAttributes(),configuration.getParentConfiguration().getParentConfiguration().getAttributes());
  assertEquals(EMPTY_PROPERTIES,configuration.getProperties());
  Collection<String> configTypes=configuration.getAllConfigTypes();
  assertEquals(2,configTypes.size());
  assertTrue(configTypes.containsAll(Arrays.asList("type1","type2")));
}
