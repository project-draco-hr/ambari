def run(self):
    with self:
        for resource in self.resource_list:
            self.log.debug(('Running resource %r' % resource))
            if ((resource.not_if is not None) and self._check_condition(resource.not_if)):
                self.log.debug(('Skipping %s due to not_if' % resource))
                continue
            if ((resource.only_if is not None) and (not self._check_condition(resource.only_if))):
                self.log.debug(('Skipping %s due to only_if' % resource))
                continue
            for action in resource.action:
                self.run_action(resource, action)
        while self.delayed_actions:
            (action, resource) = self.delayed_actions.pop()
            self.run_action(resource, action)
