{
  if (!hosts.containsKey(hostname)) {
    HostEntity hostEntity=hostDAO.findByName(hostname);
    if (hostEntity != null) {
      Host host=hostFactory.create(hostEntity,true);
      Set<Cluster> cSet=new HashSet<Cluster>();
      for (      ClusterEntity clusterEntity : hostEntity.getClusterEntities()) {
        if (clustersById.containsKey(clusterEntity.getClusterId())) {
          cSet.add(clustersById.get(clusterEntity.getClusterId()));
        }
 else {
          cSet.add(getClusterById(clusterEntity.getClusterId()));
        }
      }
      hosts.put(hostname,host);
      hostClusterMap.put(hostname,cSet);
    }
 else {
      throw new HostNotFoundException(hostname);
    }
  }
  return hosts.get(hostname);
}
