{
  for (  ClusterEntity clusterEntity : clusterDAO.findAll()) {
    Cluster currentCluster=clusterFactory.create(clusterEntity);
    clusters.put(clusterEntity.getClusterName(),currentCluster);
    clustersById.put(currentCluster.getClusterId(),currentCluster);
    clusterHostMap.put(currentCluster.getClusterName(),Collections.newSetFromMap(new ConcurrentHashMap<Host,Boolean>()));
  }
  for (  HostEntity hostEntity : hostDAO.findAll()) {
    Host host=hostFactory.create(hostEntity,true);
    hosts.put(hostEntity.getHostName(),host);
    hostsById.put(hostEntity.getHostId(),host);
    Set<Cluster> cSet=Collections.newSetFromMap(new ConcurrentHashMap<Cluster,Boolean>());
    hostClusterMap.put(hostEntity.getHostName(),cSet);
    for (    ClusterEntity clusterEntity : hostEntity.getClusterEntities()) {
      clusterHostMap.get(clusterEntity.getClusterName()).add(host);
      cSet.add(clusters.get(clusterEntity.getClusterName()));
    }
  }
}
