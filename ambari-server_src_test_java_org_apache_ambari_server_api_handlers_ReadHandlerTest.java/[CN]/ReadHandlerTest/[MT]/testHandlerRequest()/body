{
  Request request=createStrictMock(Request.class);
  ResourceDefinition resourceDefinition=createStrictMock(ResourceDefinition.class);
  Query query=createMock(Query.class);
  Predicate predicate=createMock(Predicate.class);
  Result result=createStrictMock(Result.class);
  Set<String> setPartialResponseFields=new HashSet<String>();
  setPartialResponseFields.add("foo");
  setPartialResponseFields.add("bar/c");
  setPartialResponseFields.add("bar/d/e");
  expect(request.getResourceDefinition()).andReturn(resourceDefinition);
  expect(resourceDefinition.getQuery()).andReturn(query);
  expect(request.getPartialResponseFields()).andReturn(setPartialResponseFields);
  query.addProperty(null,"foo");
  query.addProperty("bar","c");
  query.addProperty("bar/d","e");
  expect(request.getQueryPredicate()).andReturn(predicate);
  query.setUserPredicate(predicate);
  expect(query.execute()).andReturn(result);
  replay(request,resourceDefinition,query,predicate,result);
  ReadHandler handler=new ReadHandler();
  assertSame(result,handler.handleRequest(request));
  verify(request,resourceDefinition,query,predicate,result);
}
