{
  Request request=createStrictMock(Request.class);
  ResourceDefinition resourceDefinition=createStrictMock(ResourceDefinition.class);
  Query query=createMock(Query.class);
  Predicate predicate=createMock(Predicate.class);
  Result result=createStrictMock(Result.class);
  Map<PropertyId,TemporalInfo> mapPartialResponseFields=new HashMap<PropertyId,TemporalInfo>();
  mapPartialResponseFields.put(PropertyHelper.getPropertyId("foo"),null);
  mapPartialResponseFields.put(PropertyHelper.getPropertyId("bar/c"),null);
  mapPartialResponseFields.put(PropertyHelper.getPropertyId("bar/d/e"),null);
  expect(request.getResourceDefinition()).andReturn(resourceDefinition);
  expect(resourceDefinition.getQuery()).andReturn(query);
  expect(request.getFields()).andReturn(mapPartialResponseFields);
  query.addProperty(null,"foo",null);
  query.addProperty("bar","c",null);
  query.addProperty("bar/d","e",null);
  expect(request.getQueryPredicate()).andReturn(predicate);
  query.setUserPredicate(predicate);
  expect(query.execute()).andReturn(result);
  replay(request,resourceDefinition,query,predicate,result);
  ReadHandler handler=new ReadHandler();
  assertSame(result,handler.handleRequest(request));
  verify(request,resourceDefinition,query,predicate,result);
}
