{
  Set<Resource> resources=new HashSet<Resource>();
  ViewRegistry viewRegistry=ViewRegistry.getInstance();
  Set<String> requestedIds=getRequestPropertyIds(request,predicate);
  Set<Map<String,Object>> propertyMaps=getPropertyMaps(predicate);
  if (propertyMaps.isEmpty()) {
    propertyMaps.add(Collections.<String,Object>emptyMap());
  }
  for (  Map<String,Object> propertyMap : propertyMaps) {
    String viewName=(String)propertyMap.get(VIEW_NAME_PROPERTY_ID);
    for (    ViewDefinition viewDefinition : viewRegistry.getDefinitions()) {
      if (viewName == null || viewName.equals(viewDefinition.getName())) {
        Resource resource=new ResourceImpl(Resource.Type.View);
        setResourceProperty(resource,VIEW_NAME_PROPERTY_ID,viewDefinition.getName(),requestedIds);
        setResourceProperty(resource,LABEL_PROPERTY_ID,viewDefinition.getLabel(),requestedIds);
        setResourceProperty(resource,VERSION_PROPERTY_ID,viewDefinition.getVersion(),requestedIds);
        setResourceProperty(resource,PARAMETERS_PROPERTY_ID,viewDefinition.getConfiguration().getParameters(),requestedIds);
        setResourceProperty(resource,ARCHIVE_PROPERTY_ID,viewDefinition.getArchivePath(),requestedIds);
        resources.add(resource);
      }
    }
  }
  return resources;
}
