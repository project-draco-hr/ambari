{
  injector=Guice.createInjector(new SecurityModule());
  certMan=injector.getInstance(CertificateManager.class);
  try {
    File caConfig=new File("conf/unix/ca.config");
    File caConfigTest=new File(temp.getRoot().getAbsolutePath(),"ca.config");
    File newCertsDir=new File(temp.getRoot().getAbsolutePath(),"newcerts");
    newCertsDir.mkdirs();
    File indexTxt=new File(temp.getRoot().getAbsolutePath(),"index.txt");
    indexTxt.createNewFile();
    String content=IOUtils.toString(new FileInputStream(caConfig));
    content=content.replaceAll("/var/lib/ambari-server/keys/db",temp.getRoot().getAbsolutePath());
    IOUtils.write(content,new FileOutputStream(caConfigTest));
  }
 catch (  IOException e) {
    e.printStackTrace();
    fail();
  }
  certMan.initRootCert();
}
