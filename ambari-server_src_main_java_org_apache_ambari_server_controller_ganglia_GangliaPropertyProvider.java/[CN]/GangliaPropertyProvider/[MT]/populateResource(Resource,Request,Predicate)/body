{
  if (getPropertyIds().isEmpty()) {
    return true;
  }
  Set<PropertyId> ids=PropertyHelper.getRequestPropertyIds(getPropertyIds(),request,predicate);
  String hostName=PropertyHelper.fixHostName((String)resource.getPropertyValue(HOST_COMPONENT_HOST_NAME_PROPERTY_ID));
  String componentName=(String)resource.getPropertyValue(HOST_COMPONENT_COMPONENT_NAME_PROPERTY_ID);
  String gangliaClusterName=GANGLIA_CLUSTER_NAMES.get(componentName);
  if (gangliaClusterName == null) {
    return true;
  }
  for (  PropertyId propertyId : ids) {
    String property=propertyId.getName();
    TemporalInfo temporalInfo=request.getTemporalInfo(propertyId);
    String spec=getSpec(gangliaClusterName,hostName,property,temporalInfo.getStartTime(),temporalInfo.getEndTime(),temporalInfo.getStep());
    try {
      List<GangliaMetric> properties=new ObjectMapper().readValue(streamProvider.readFrom(spec),new TypeReference<List<GangliaMetric>>(){
      }
);
      resource.setProperty(propertyId,getTemporalValue(properties.get(0)));
    }
 catch (    IOException e) {
      throw new AmbariException("Can't get metrics : " + property,e);
    }
  }
  return true;
}
