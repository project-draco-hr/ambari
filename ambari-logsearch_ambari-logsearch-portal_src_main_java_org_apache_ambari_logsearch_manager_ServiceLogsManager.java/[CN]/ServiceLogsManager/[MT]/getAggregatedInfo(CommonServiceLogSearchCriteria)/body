{
  SolrQuery solrQuery=queryGenerator.commonServiceFilterQuery(searchCriteria);
  String hierarchy="host,type,level";
  GraphDataListResponse graphInfo=new GraphDataListResponse();
  try {
    SolrUtil.setMainQuery(solrQuery,null);
    SolrUtil.setFacetPivot(solrQuery,1,hierarchy);
    QueryResponse response=serviceLogsSolrDao.process(solrQuery);
    if (response == null) {
      return graphInfo;
    }
    List<List<PivotField>> hirarchicalPivotField=new ArrayList<List<PivotField>>();
    List<GraphData> dataList=new ArrayList<>();
    NamedList<List<PivotField>> namedList=response.getFacetPivot();
    if (namedList != null) {
      hirarchicalPivotField=namedList.getAll(hierarchy);
    }
    if (!hirarchicalPivotField.isEmpty()) {
      dataList=buidGraphData(hirarchicalPivotField.get(0));
    }
    if (!dataList.isEmpty()) {
      graphInfo.setGraphData(dataList);
    }
    return graphInfo;
  }
 catch (  SolrException|SolrServerException|IOException e) {
    logger.error("Error during solrQuery=" + solrQuery,e);
    throw RESTErrorUtil.createRESTException(MessageEnums.SOLR_ERROR.getMessage().getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
