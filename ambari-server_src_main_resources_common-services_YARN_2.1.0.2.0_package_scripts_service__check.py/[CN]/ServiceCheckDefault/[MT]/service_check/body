def service_check(self, env):
    import params
    env.set_params(params)
    if ((params.hdp_stack_version != '') and (compare_versions(params.hdp_stack_version, '2.2') >= 0)):
        path_to_distributed_shell_jar = '/usr/hdp/current/hadoop-yarn-client/hadoop-yarn-applications-distributedshell.jar'
    else:
        path_to_distributed_shell_jar = '/usr/lib/hadoop-yarn/hadoop-yarn-applications-distributedshell*.jar'
    yarn_distrubuted_shell_check_cmd = format('yarn org.apache.hadoop.yarn.applications.distributedshell.Client -shell_command ls -jar {path_to_distributed_shell_jar}')
    if params.security_enabled:
        kinit_cmd = format('{kinit_path_local} -kt {smoke_user_keytab} {smokeuser_principal};')
        smoke_cmd = format('{kinit_cmd} {yarn_distrubuted_shell_check_cmd}')
    else:
        smoke_cmd = yarn_distrubuted_shell_check_cmd
    Execute(smoke_cmd, tries=3, try_sleep=5, path='/usr/sbin:/sbin:/usr/local/bin:/bin:/usr/bin', user=params.smokeuser, logoutput=True)
