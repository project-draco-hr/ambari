{
  final Cluster cluster=clustersProvider.get().getCluster(request.getClusterName());
  Set<String> services=cluster.getServices().keySet();
  boolean serviceFound=false;
  for (  String service : requiredServices) {
    if (services.contains(service) && !requiredAll) {
      serviceFound=true;
    }
 else     if (!services.contains(service) && requiredAll) {
      return false;
    }
  }
  return !(!serviceFound && !requiredAll);
}
