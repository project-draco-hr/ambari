def test_recovery_required(self):
    rm = RecoveryManager(True, False)
    rm.update_current_status('NODEMANAGER', 'INSTALLED')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_desired_status('NODEMANAGER', 'STARTED')
    self.assertTrue(rm.requires_recovery('NODEMANAGER'))
    rm.update_current_status('NODEMANAGER', 'STARTED')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    self.assertTrue(rm.requires_recovery('NODEMANAGER'))
    rm.update_desired_status('NODEMANAGER', 'STARTED')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_current_status('NODEMANAGER', 'INSTALLED')
    rm.update_desired_status('NODEMANAGER', 'XYS')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_desired_status('NODEMANAGER', '')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    self.assertTrue(rm.requires_recovery('NODEMANAGER'))
    rm.update_desired_status('NODEMANAGER', 'STARTED')
    self.assertTrue(rm.requires_recovery('NODEMANAGER'))
    rm = RecoveryManager(True, True)
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'START')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    rm.update_current_status('NODEMANAGER', 'INSTALLED')
    rm.update_desired_status('NODEMANAGER', 'START')
    self.assertFalse(rm.requires_recovery('NODEMANAGER'))
    pass
