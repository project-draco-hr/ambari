@patch('time.time', MagicMock(side_effects=[1]))
def test_store_from_status_and_use(self):
    rm = RecoveryManager(True)
    command1 = copy.deepcopy(self.command)
    rm.store_or_update_command(command1)
    self.assertTrue(rm.command_exists('NODEMANAGER', 'EXECUTION_COMMAND'))
    install_command = rm.get_install_command('NODEMANAGER')
    start_command = rm.get_start_command('NODEMANAGER')
    self.assertEqual('INSTALL', install_command['roleCommand'])
    self.assertEqual('START', start_command['roleCommand'])
    self.assertEqual('AUTO_EXECUTION_COMMAND', install_command['commandType'])
    self.assertEqual('AUTO_EXECUTION_COMMAND', start_command['commandType'])
    self.assertEqual('NODEMANAGER', install_command['role'])
    self.assertEqual('NODEMANAGER', start_command['role'])
    self.assertEquals(install_command['configurations'], start_command['configurations'])
    self.assertEqual(2, install_command['taskId'])
    self.assertEqual(3, start_command['taskId'])
    self.assertEqual(None, rm.get_install_command('component2'))
    self.assertEqual(None, rm.get_start_command('component2'))
    self.assertTrue(rm.remove_command('NODEMANAGER'))
    self.assertFalse(rm.remove_command('NODEMANAGER'))
    self.assertEqual(None, rm.get_install_command('NODEMANAGER'))
    self.assertEqual(None, rm.get_start_command('NODEMANAGER'))
    self.assertEqual(None, rm.get_install_command('component2'))
    self.assertEqual(None, rm.get_start_command('component2'))
    rm.store_or_update_command(command1)
    self.assertTrue(rm.command_exists('NODEMANAGER', 'EXECUTION_COMMAND'))
    rm.set_paused(True)
    self.assertEqual(None, rm.get_install_command('NODEMANAGER'))
    self.assertEqual(None, rm.get_start_command('NODEMANAGER'))
    pass
