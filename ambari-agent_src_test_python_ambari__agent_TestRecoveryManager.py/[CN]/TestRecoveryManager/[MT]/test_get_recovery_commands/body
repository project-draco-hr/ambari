@patch.object(RecoveryManager, '_now_')
def test_get_recovery_commands(self, time_mock):
    time_mock.side_effect = [1000, 2000, 3000, 4000, 5000, 6000]
    rm = RecoveryManager(True)
    rm.update_config(10, 5, 1, 11, True, False)
    command1 = copy.deepcopy(self.command)
    rm.store_or_update_command(command1)
    rm.update_current_status('NODEMANAGER', 'INSTALLED')
    rm.update_desired_status('NODEMANAGER', 'STARTED')
    commands = rm.get_recovery_commands()
    self.assertEqual(1, len(commands))
    self.assertEqual('START', commands[0]['roleCommand'])
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'STARTED')
    commands = rm.get_recovery_commands()
    self.assertEqual(1, len(commands))
    self.assertEqual('INSTALL', commands[0]['roleCommand'])
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    commands = rm.get_recovery_commands()
    self.assertEqual(1, len(commands))
    self.assertEqual('INSTALL', commands[0]['roleCommand'])
    rm.update_config(2, 5, 1, 5, True, True)
    rm.update_current_status('NODEMANAGER', 'INIT')
    rm.update_desired_status('NODEMANAGER', 'INSTALLED')
    commands = rm.get_recovery_commands()
    self.assertEqual(0, len(commands))
    pass
