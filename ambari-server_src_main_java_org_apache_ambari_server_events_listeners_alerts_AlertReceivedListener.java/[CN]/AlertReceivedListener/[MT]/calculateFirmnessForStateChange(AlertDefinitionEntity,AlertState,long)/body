{
  if (state == AlertState.OK) {
    return AlertFirmness.HARD;
  }
  if (definition.getSourceType() == SourceType.AGGREGATE) {
    return AlertFirmness.HARD;
  }
  if (definition.getRepeatTolerance() <= 1) {
    return AlertFirmness.HARD;
  }
  if (definition.getRepeatTolerance() <= occurrences) {
    return AlertFirmness.HARD;
  }
  return AlertFirmness.SOFT;
}
