{
  String uuid=UUID.randomUUID().toString().replace("-","");
  this.cookie=uuid;
  this.username="admin" + uuid;
  AppCookieManager mockAppCookieManager=Mockito.mock(AppCookieManager.class);
  when(mockAppCookieManager.getAppCookie(anyString(),anyBoolean())).thenReturn(cookie);
  this.expectedResult="Dummy text from HTTP response";
  BufferedReader mockBufferedReader=Mockito.mock(BufferedReader.class);
  when(mockBufferedReader.readLine()).thenReturn(expectedResult).thenReturn(null);
  HttpImpersonatorImpl.FactoryHelper mockFactory=Mockito.mock(HttpImpersonatorImpl.FactoryHelper.class);
  when(mockFactory.makeBR(any(InputStreamReader.class))).thenReturn(mockBufferedReader);
  this.viewContext=Mockito.mock(ViewContext.class);
  when(this.viewContext.getUsername()).thenReturn(username);
  this.impersonator=new HttpImpersonatorImpl(this.viewContext,mockFactory);
  when(this.viewContext.getHttpImpersonator()).thenReturn(this.impersonator);
}
