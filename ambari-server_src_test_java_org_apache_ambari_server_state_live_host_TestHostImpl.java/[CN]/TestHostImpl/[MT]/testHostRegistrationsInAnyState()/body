{
  HostImpl host=new HostImpl("foo");
  long counter=0;
  registerHost(host);
  ensureHostUpdatesReceived(host);
  registerHost(host);
  ensureHostUpdatesReceived(host);
  sendHealthyHeartbeat(host,++counter);
  verifyHostState(host,HostState.HEALTHY);
  registerHost(host);
  ensureHostUpdatesReceived(host);
  sendUnhealthyHeartbeat(host,++counter);
  verifyHostState(host,HostState.UNHEALTHY);
  registerHost(host);
  ensureHostUpdatesReceived(host);
  timeoutHost(host);
  verifyHostState(host,HostState.HEARTBEAT_LOST);
  registerHost(host);
  ensureHostUpdatesReceived(host);
  host.setState(HostState.INIT);
  registerHost(host);
}
