{
  UserEntity userEntity=userDAO.findByPK(user.getUserId());
  if (userEntity == null) {
    throw new AmbariException("User " + user + " doesn't exist");
  }
  RoleEntity roleEntity=roleDAO.findByName(role);
  if (roleEntity == null) {
    throw new AmbariException("Role " + role + " doesn't exist");
  }
  if (userEntity.getRoleEntities().contains(roleEntity)) {
    userEntity.getRoleEntities().remove(roleEntity);
    roleEntity.getUserEntities().remove(userEntity);
    userDAO.merge(userEntity);
    roleDAO.merge(roleEntity);
  }
 else {
    throw new AmbariException("User " + user + " doesn't own role "+ role);
  }
}
