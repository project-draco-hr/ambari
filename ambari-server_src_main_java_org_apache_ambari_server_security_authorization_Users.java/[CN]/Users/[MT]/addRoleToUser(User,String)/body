{
  UserEntityPK pk=getPK(user);
  UserEntity userEntity=userDAO.findByPK(pk);
  if (userEntity == null) {
    throw new AmbariException("User " + user + " doesn't exist");
  }
  RoleEntity roleEntity=roleDAO.findByName(role);
  if (roleEntity == null) {
    throw new AmbariException("Role " + role + " doesn't exist");
  }
  if (!userEntity.getRoleEntities().contains(roleEntity)) {
    userEntity.getRoleEntities().add(roleEntity);
    userDAO.merge(userEntity);
  }
 else {
    throw new AmbariException("User " + user + " already owns role "+ role);
  }
}
