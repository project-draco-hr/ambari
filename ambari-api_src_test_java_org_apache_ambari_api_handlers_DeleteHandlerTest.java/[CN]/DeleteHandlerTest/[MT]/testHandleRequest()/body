{
  Request request=createMock(Request.class);
  ResourceDefinition resource=createMock(ResourceDefinition.class);
  PersistenceManager pm=createStrictMock(PersistenceManager.class);
  Map<PropertyId,String> resourceProperties=new HashMap<PropertyId,String>();
  expect(request.getResourceDefinition()).andReturn(resource);
  expect(request.getHttpBodyProperties()).andReturn(resourceProperties);
  resource.setProperties(resourceProperties);
  expect(request.getPersistenceManager()).andReturn(pm);
  pm.persist(resource);
  replay(request,resource,pm);
  Object returnVal=new DeleteHandler().handleRequest(request);
  assertNotNull(returnVal);
  verify(request,resource,pm);
}
