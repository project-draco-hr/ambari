def registerWithServer(self):
    retry = False
    firstTime = True
    registered = False
    id = (-1)
    ret = {}
    while (registered == False):
        try:
            data = json.dumps(self.register.build(id))
            req = urllib2.Request(self.registerUrl, data, {'Content-Type': 'application/json', })
            stream = urllib2.urlopen(req)
            response = stream.read()
            stream.close()
            ret = json.loads(response)
            logger.info(('Registered with the server with ' + pprint.pformat(ret)))
            registered = True
            pass
        except Exception as err:
            logger.info(('Unable to connect to: ' + self.registerUrl), exc_info=True)
            ' sleep for 30 seconds and then retry again '
            time.sleep(30)
            pass
        pass
    return ret
