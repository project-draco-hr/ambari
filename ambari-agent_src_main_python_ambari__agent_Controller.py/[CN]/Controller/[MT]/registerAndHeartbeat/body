def registerAndHeartbeat(self):
    registerResponse = self.registerWithServer()
    message = registerResponse['response']
    logger.info(('Response from server = ' + message))
    if self.isRegistered:
        for callback in self.registration_listeners:
            callback()
        time.sleep(self.netutil.HEARTBEAT_IDDLE_INTERVAL_SEC)
        self.heartbeatWithServer()
