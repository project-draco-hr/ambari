def read_file(filename):
    tmpf = tempfile.NamedTemporaryFile()
    shell.checked_call(['cp', '-f', filename, tmpf.name], sudo=True)
    with tmpf:
        with open(tmpf.name, 'rb') as fp:
            return fp.read()
