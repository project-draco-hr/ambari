{
  StackId stackId=cluster.getDesiredStackVersion();
  Map<String,List<RepositoryInfo>> repos=ambariMetaInfo.getRepository(stackId.getStackName(),stackId.getStackVersion());
  String repoInfo="";
  String family=os_family.find(host.getOsType());
  if (null == family)   family=host.getOsFamily();
  if (repos.containsKey(host.getOsType()))   repoInfo=gson.toJson(repos.get(host.getOsType()));
 else   if (null != family && repos.containsKey(family))   repoInfo=gson.toJson(repos.get(family));
 else {
    LOG.warn("Could not retrieve repo information for host" + ", hostname=" + host.getHostName() + ", clusterName="+ cluster.getClusterName()+ ", stackInfo="+ stackId.getStackId());
  }
  return repoInfo;
}
