{
  userDAO=Mockito.mock(UserDAO.class);
  createUser("activeUser",true);
  createUser("disabledUser",false);
  MemberDAO memberDao=Mockito.mock(MemberDAO.class);
  PrivilegeDAO privilegeDao=Mockito.mock(PrivilegeDAO.class);
  AuthorizationHelper authorizationHelper=new AuthorizationHelper();
  AmbariLocalUserDetailsService uds=new AmbariLocalUserDetailsService(null,null,authorizationHelper,userDAO,memberDao,privilegeDao);
  daoProvider=new DaoAuthenticationProvider();
  daoProvider.setUserDetailsService(uds);
  daoProvider.setPasswordEncoder(encoder);
  ldapPopulator=new AmbariLdapAuthoritiesPopulator(authorizationHelper,userDAO,memberDao,privilegeDao);
}
