{
  String stacks="src/test/resources/stacks";
  String version="src/test/resources/version";
  String sharedResourcesDir="src/test/resources/";
  if (System.getProperty("os.name").contains("Windows")) {
    stacks=ClassLoader.getSystemClassLoader().getResource("stacks").getPath();
    version=new File(new File(ClassLoader.getSystemClassLoader().getResource("").getPath()).getParent(),"version").getPath();
    sharedResourcesDir=ClassLoader.getSystemClassLoader().getResource("").getPath();
  }
  properties.setProperty(Configuration.SERVER_PERSISTENCE_TYPE_KEY,"in-memory");
  properties.setProperty(Configuration.METADATA_DIR_PATH,stacks);
  properties.setProperty(Configuration.SERVER_VERSION_FILE,version);
  properties.setProperty(Configuration.OS_VERSION_KEY,"centos5");
  properties.setProperty(Configuration.SHARED_RESOURCES_DIR_KEY,sharedResourcesDir);
  try {
    install(new BeanDefinitionsCachingTestControllerModule(properties));
    AuditLogger al=EasyMock.createNiceMock(AuditLogger.class);
    EasyMock.expect(al.isEnabled()).andReturn(false).anyTimes();
    bind(AuditLogger.class).toInstance(al);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
