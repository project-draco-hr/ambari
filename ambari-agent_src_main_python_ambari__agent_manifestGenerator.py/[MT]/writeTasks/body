def writeTasks(outputFile, roles):
    rolesToClassFile = open('rolesToClass.dict', 'r')
    rolesToClass = readDict(rolesToClassFile)
    rolesToClassFile.close()
    serviceStatesFile = open('serviceStates.dict', 'r')
    serviceStates = readDict(serviceStatesFile)
    serviceStatesFile.close()
    outputFile.write('node /default/ {\n ')
    writeStages(outputFile, len(roles))
    stageNum = 1
    for role in roles:
        rolename = role['role']
        command = role['cmd']
        taskParams = role['roleParams']
        taskParamsNormalized = normalizeTaskParams(taskParams)
        taskParamsPostfix = ''
        if (len(taskParamsNormalized) > 0):
            taskParamsPostfix = (', ' + taskParamsNormalized)
        className = rolesToClass[rolename]
        serviceState = serviceStates[command]
        outputFile.write((((((((("class {'" + className) + "':") + ' stage => ') + str(stageNum)) + ', service_state => ') + serviceState) + taskParamsPostfix) + '}\n'))
        stageNum = (stageNum + 1)
    outputFile.write('}\n')
