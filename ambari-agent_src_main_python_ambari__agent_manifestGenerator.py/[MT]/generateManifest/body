def generateManifest(parsedJson, fileName, modulesdir):
    hostname = parsedJson['hostname']
    clusterHostInfo = parsedJson['clusterHostInfo']
    params = parsedJson['params']
    configurations = parsedJson['configurations']
    xmlConfigurationsKeys = parsedJson['xml_configurations_keys']
    roles = parsedJson['roleCommands']
    manifest = open(fileName, 'w')
    writeImports(outputFile=manifest, modulesdir=modulesdir)
    writeNodes(manifest, clusterHostInfo)
    writeParams(manifest, params)
    xmlConfigurations = {}
    flatConfigurations = {}
    for configKey in configurations.iterkeys():
        if (configKey in xmlConfigurationsKeys):
            xmlConfigurations[configKey] = configurations[configKey]
        else:
            flatConfigurations[configKey] = configurations[configKey]
    writeXmlConfigurations(manifest, xmlConfigurations)
    writeFlatConfigurations(manifest, flatConfigurations)
    writeTasks(manifest, roles)
    manifest.close()
