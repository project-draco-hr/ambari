def generateManifest(parsedJson, fileName, modulesdir):
    logger.info('JSON Received:')
    logger.info(json.dumps(parsedJson, sort_keys=True, indent=4))
    hostname = parsedJson['hostname']
    clusterHostInfo = {}
    if ('clusterHostInfo' in parsedJson):
        if parsedJson['clusterHostInfo']:
            clusterHostInfo = parsedJson['clusterHostInfo']
    params = {}
    if ('hostLevelParams' in parsedJson):
        if parsedJson['hostLevelParams']:
            params = parsedJson['hostLevelParams']
    configurations = {}
    if ('configurations' in parsedJson):
        if parsedJson['configurations']:
            configurations = parsedJson['configurations']
    xmlConfigurationsKeys = xml_configurations_keys
    roleParams = {}
    if ('roleParams' in parsedJson):
        if parsedJson['roleParams']:
            roleParams = parsedJson['roleParams']
    roles = [{'role': parsedJson['role'], 'cmd': parsedJson['roleCommand'], 'roleParams': roleParams, }]
    manifest = open(fileName, 'w')
    writeImports(outputFile=manifest, modulesdir=modulesdir)
    writeNodes(manifest, clusterHostInfo)
    writeParams(manifest, params, modulesdir)
    xmlConfigurations = {}
    flatConfigurations = {}
    if configurations:
        for configKey in configurations.iterkeys():
            if (configKey in xmlConfigurationsKeys):
                xmlConfigurations[configKey] = configurations[configKey]
            else:
                flatConfigurations[configKey] = configurations[configKey]
    if xmlConfigurations:
        writeXmlConfigurations(manifest, xmlConfigurations)
    if flatConfigurations:
        writeFlatConfigurations(manifest, flatConfigurations)
    writeTasks(manifest, roles)
    manifest.close()
