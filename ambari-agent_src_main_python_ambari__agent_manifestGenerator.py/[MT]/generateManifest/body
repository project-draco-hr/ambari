def generateManifest(parsedJson, fileName, modulesdir):
    hostname = parsedJson['hostname']
    clusterHostInfo = parsedJson['clusterHostInfo']
    params = parsedJson['hostLevelParams']
    configurations = parsedJson['configurations']
    xmlConfigurationsKeys = xml_configurations_keys
    roles = [{'role': parsedJson['role'], 'cmd': parsedJson['roleCommand'], 'roleParams': parsedJson['roleParams'], }]
    manifest = open(fileName, 'w')
    writeImports(outputFile=manifest, modulesdir=modulesdir)
    writeNodes(manifest, clusterHostInfo)
    writeParams(manifest, params)
    xmlConfigurations = {}
    flatConfigurations = {}
    for configKey in configurations.iterkeys():
        if (configKey in xmlConfigurationsKeys):
            xmlConfigurations[configKey] = configurations[configKey]
        else:
            flatConfigurations[configKey] = configurations[configKey]
    writeXmlConfigurations(manifest, xmlConfigurations)
    writeFlatConfigurations(manifest, flatConfigurations)
    writeTasks(manifest, roles)
    manifest.close()
