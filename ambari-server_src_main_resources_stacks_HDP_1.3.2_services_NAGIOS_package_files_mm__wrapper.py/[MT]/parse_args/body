def parse_args(args):
    if ((not args) or (not (LIST_SEPARATOR in args)) or (args[0] not in MODES)):
        print_usage()
    else:
        mode = MODES.index(args[0])
        args = args[1:]
        hostnames = []
        command_line = []
        passed_separator = False
        for arg in args:
            if (not passed_separator):
                if (arg != LIST_SEPARATOR):
                    if (',' in arg):
                        hostnames += arg.split(',')
                    else:
                        hostnames.append(arg)
                else:
                    passed_separator = True
            elif (arg != LIST_SEPARATOR):
                command_line.append(arg)
            else:
                print ('Could not parse arguments: There is more than one %s argument.' % LIST_SEPARATOR)
                print_usage()
        if (not command_line):
            print 'No command provided.'
            print_usage()
        return (mode, hostnames, command_line)
