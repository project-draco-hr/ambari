{
  ConnectionFactory connectionFactory=createNiceMock(ConnectionFactory.class);
  Connection connection=createNiceMock(Connection.class);
  Statement statement=createNiceMock(Statement.class);
  expect(connectionFactory.getConnection()).andReturn(connection).once();
  expect(connection.createStatement()).andReturn(statement).once();
  expect(statement.execute("insert into Clusters (state, version, cluster_name) values ('initial', '1.0', 'MyCluster')")).andReturn(true).once();
  replay(connectionFactory,connection,statement);
  JDBCManagementController provider=new JDBCManagementController(connectionFactory);
  Map<PropertyId,String> properties=new HashMap<PropertyId,String>();
  PropertyId id=Properties.getPropertyId("cluster_name","Clusters");
  properties.put(id,"MyCluster");
  id=Properties.getPropertyId("version","Clusters");
  properties.put(id,"1.0");
  id=Properties.getPropertyId("state","Clusters");
  properties.put(id,"initial");
  Set<Map<PropertyId,String>> propertySet=new HashSet<Map<PropertyId,String>>();
  propertySet.add(properties);
  Request request=new RequestImpl(null,propertySet);
  provider.createClusters(request);
  verify(connectionFactory,connection,statement);
}
