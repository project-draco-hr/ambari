{
  ConnectionFactory connectionFactory=createNiceMock(ConnectionFactory.class);
  Connection connection=createNiceMock(Connection.class);
  Statement statement=createNiceMock(Statement.class);
  expect(connectionFactory.getConnection()).andReturn(connection).once();
  expect(connection.createStatement()).andReturn(statement).once();
  expect(statement.execute("update Clusters set state = 'running' where Clusters.cluster_name = \"MyCluster\"")).andReturn(true).once();
  replay(connectionFactory,connection,statement);
  JDBCManagementController provider=new JDBCManagementController(connectionFactory);
  Map<PropertyId,String> properties=new HashMap<PropertyId,String>();
  PropertyId id=Properties.getPropertyId("state","Clusters");
  properties.put(id,"running");
  Predicate predicate=new PredicateBuilder().property("cluster_name","Clusters").equals("MyCluster").toPredicate();
  Set<Map<PropertyId,String>> propertySet=new HashSet<Map<PropertyId,String>>();
  propertySet.add(properties);
  Request request=new RequestImpl(null,propertySet);
  provider.updateClusters(request,predicate);
  verify(connectionFactory,connection,statement);
}
