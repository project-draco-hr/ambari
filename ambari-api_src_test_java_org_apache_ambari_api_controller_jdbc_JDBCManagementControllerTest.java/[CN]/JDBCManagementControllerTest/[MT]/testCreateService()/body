{
  ConnectionFactory connectionFactory=createNiceMock(ConnectionFactory.class);
  Connection connection=createNiceMock(Connection.class);
  Statement statement=createNiceMock(Statement.class);
  expect(connectionFactory.getConnection()).andReturn(connection).once();
  expect(connection.createStatement()).andReturn(statement).once();
  expect(statement.execute("insert into ServiceInfo (service_name, cluster_name, state) values ('MyService', 'MyCluster', 'initial')")).andReturn(true).once();
  replay(connectionFactory,connection,statement);
  JDBCManagementController provider=new JDBCManagementController(connectionFactory);
  Map<PropertyId,String> properties=new HashMap<PropertyId,String>();
  PropertyId id=Properties.getPropertyId("cluster_name","ServiceInfo");
  properties.put(id,"MyCluster");
  id=Properties.getPropertyId("service_name","ServiceInfo");
  properties.put(id,"MyService");
  id=Properties.getPropertyId("state","ServiceInfo");
  properties.put(id,"initial");
  Set<Map<PropertyId,String>> propertySet=new HashSet<Map<PropertyId,String>>();
  propertySet.add(properties);
  Request request=new RequestImpl(null,propertySet);
  provider.createServices(request);
  verify(connectionFactory,connection,statement);
}
