{
  ConnectionFactory connectionFactory=createNiceMock(ConnectionFactory.class);
  Connection connection=createNiceMock(Connection.class);
  Statement statement=createNiceMock(Statement.class);
  expect(connectionFactory.getConnection()).andReturn(connection).once();
  expect(connection.createStatement()).andReturn(statement).once();
  expect(statement.execute("delete from Clusters where Clusters.cluster_name = \"MyCluster\"")).andReturn(true).once();
  replay(connectionFactory,connection,statement);
  JDBCManagementController provider=new JDBCManagementController(connectionFactory);
  Predicate predicate=new PredicateBuilder().property("cluster_name","Clusters").equals("MyCluster").toPredicate();
  provider.deleteServices(predicate);
  verify(connectionFactory,connection,statement);
}
