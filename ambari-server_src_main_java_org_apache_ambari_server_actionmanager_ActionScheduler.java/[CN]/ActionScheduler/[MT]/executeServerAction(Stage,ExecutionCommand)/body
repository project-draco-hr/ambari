{
  try {
    long now=System.currentTimeMillis();
    String hostName=cmd.getHostname();
    String roleName=cmd.getRole();
    s.setStartTime(hostName,roleName,now);
    s.setLastAttemptTime(hostName,roleName,now);
    s.incrementAttemptCount(hostName,roleName);
    s.setHostRoleStatus(hostName,roleName,HostRoleStatus.QUEUED);
    db.hostRoleScheduled(s,hostName,roleName);
    String actionName=cmd.getRoleParams().get(ServerAction.ACTION_NAME);
    this.serverActionManager.executeAction(actionName,cmd.getCommandParams());
    reportServerActionSuccess(s,cmd);
  }
 catch (  AmbariException e) {
    LOG.warn("Could not execute server action " + cmd.toString(),e);
    reportServerActionFailure(s,cmd,e.getMessage());
  }
}
