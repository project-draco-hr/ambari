def __new__(cls, name, env=None, provider=None, **kwargs):
    if isinstance(name, list):
        while (len(name) != 1):
            cls(name.pop(0), env, provider, **kwargs)
        name = name[0]
    env = (env or Environment.get_instance())
    provider = (provider or getattr(cls, 'provider', None))
    r_type = cls.__name__
    if (r_type not in env.resources):
        env.resources[r_type] = {}
    obj = super(Resource, cls).__new__(cls)
    env.resources[r_type][name] = obj
    env.resource_list.append(obj)
    return obj
