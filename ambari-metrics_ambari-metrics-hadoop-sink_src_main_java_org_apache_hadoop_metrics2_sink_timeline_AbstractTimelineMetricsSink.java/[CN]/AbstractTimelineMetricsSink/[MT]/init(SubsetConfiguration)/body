{
  this.conf=conf;
  LOG.info("Initializing Timeline metrics sink.");
  if (conf.getString("slave.host.name") != null) {
    hostName=conf.getString("slave.host.name");
  }
 else {
    try {
      hostName=DNS.getDefaultHost(conf.getString("dfs.datanode.dns.interface","default"),conf.getString("dfs.datanode.dns.nameserver","default"));
    }
 catch (    UnknownHostException uhe) {
      LOG.error(uhe);
      hostName="UNKNOWN.example.com";
    }
  }
  serviceName=getFirstConfigPrefix(conf);
  metricsServers=Servers.parse(conf.getString(COLLECTOR_HOST_PROPERTY),DEFAULT_PORT);
  if (metricsServers == null || metricsServers.isEmpty()) {
    LOG.error("No Metric collector configured.");
  }
 else {
    collectorUri="http://" + conf.getString(COLLECTOR_HOST_PROPERTY).trim() + "/ws/v1/timeline/metrics";
  }
}
