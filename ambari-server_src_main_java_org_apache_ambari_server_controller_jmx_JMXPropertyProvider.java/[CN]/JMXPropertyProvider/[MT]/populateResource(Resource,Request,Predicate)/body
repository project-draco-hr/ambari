{
  if (getPropertyIds().isEmpty()) {
    return true;
  }
  Set<PropertyId> ids=PropertyHelper.getRequestPropertyIds(getPropertyIds(),request,predicate);
  Map<String,String> hosts=mappingProvider.getHostMap();
  String hostName=hosts.get(PropertyHelper.fixHostName(resource.getPropertyValue(HOST_COMPONENT_HOST_NAME_PROPERTY_ID)));
  String port=JMX_PORTS.get(resource.getPropertyValue(HOST_COMPONENT_COMPONENT_NAME_PROPERTY_ID));
  if (hostName == null || port == null) {
    return true;
  }
  JMXMetrics metrics;
  String spec=getSpec(hostName + ":" + port);
  try {
    metrics=new ObjectMapper().readValue(streamProvider.readFrom(spec),JMXMetrics.class);
  }
 catch (  IOException e) {
    throw new AmbariException("Can't get metrics : " + spec,e);
  }
  for (  Map<String,String> propertyMap : metrics.getBeans()) {
    String category=propertyMap.get(CATEGORY_KEY);
    if (category != null) {
      for (      Map.Entry<String,String> entry : propertyMap.entrySet()) {
        PropertyId propertyId=PropertyHelper.getPropertyId(entry.getKey(),category);
        if (ids.contains(propertyId)) {
          resource.setProperty(propertyId,entry.getValue());
        }
      }
    }
  }
  return true;
}
