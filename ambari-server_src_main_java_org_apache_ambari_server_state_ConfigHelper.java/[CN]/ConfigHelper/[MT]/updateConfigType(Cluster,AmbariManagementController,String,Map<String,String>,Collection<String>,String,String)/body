{
  if ((configType != null) && (updates != null) && !updates.isEmpty()) {
    Config oldConfig=cluster.getDesiredConfigByType(configType);
    Map<String,String> oldConfigProperties;
    Map<String,String> properties=new HashMap<String,String>();
    if (oldConfig == null) {
      oldConfigProperties=null;
    }
 else {
      oldConfigProperties=oldConfig.getProperties();
      if (oldConfigProperties != null) {
        properties.putAll(oldConfig.getProperties());
      }
    }
    properties.putAll(updates);
    if (removals != null) {
      for (      String propertyName : removals) {
        properties.remove(propertyName);
      }
    }
    if ((oldConfigProperties == null) || !Maps.difference(oldConfigProperties,properties).areEqual()) {
      createConfigType(cluster,controller,configType,properties,authenticatedUserName,serviceVersionNote);
    }
  }
}
