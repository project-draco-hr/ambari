{
  StackInfo stack=ambariMetaInfo.getStackInfo(stackId.getStackName(),stackId.getStackVersion());
  Set<String> result=new HashSet<String>();
  for (  Service service : cluster.getServices().values()) {
    Set<PropertyInfo> stackProperties=ambariMetaInfo.getProperties(stack.getName(),stack.getVersion(),service.getName());
    for (    PropertyInfo stackProperty : stackProperties) {
      if (stackProperty.getPropertyTypes().contains(propertyType)) {
        String stackPropertyConfigType=fileNameToConfigType(stackProperty.getFilename());
        result.add(cluster.getDesiredConfigByType(stackPropertyConfigType).getProperties().get(stackProperty.getName()));
      }
    }
  }
  Set<PropertyInfo> stackProperties=ambariMetaInfo.getStackProperties(stack.getName(),stack.getVersion());
  for (  PropertyInfo stackProperty : stackProperties) {
    if (stackProperty.getPropertyTypes().contains(propertyType)) {
      String stackPropertyConfigType=fileNameToConfigType(stackProperty.getFilename());
      result.add(cluster.getDesiredConfigByType(stackPropertyConfigType).getProperties().get(stackProperty.getName()));
    }
  }
  return result;
}
