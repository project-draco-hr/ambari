{
  String tag="version1";
  if (cluster.getConfigsByType(configType) != null) {
    tag="version" + System.currentTimeMillis();
  }
  ConfigurationRequest configurationRequest=new ConfigurationRequest();
  configurationRequest.setClusterName(cluster.getClusterName());
  configurationRequest.setVersionTag(tag);
  configurationRequest.setType(configType);
  configurationRequest.setProperties(properties);
  configurationRequest.setPropertiesAttributes(propertyAttributes);
  configurationRequest.setServiceConfigVersionNote(serviceVersionNote);
  controller.createConfiguration(configurationRequest);
  Config baseConfig=cluster.getConfig(configurationRequest.getType(),configurationRequest.getVersionTag());
  if (baseConfig != null) {
    cluster.addDesiredConfig(authenticatedUserName,Collections.singleton(baseConfig),serviceVersionNote);
  }
}
