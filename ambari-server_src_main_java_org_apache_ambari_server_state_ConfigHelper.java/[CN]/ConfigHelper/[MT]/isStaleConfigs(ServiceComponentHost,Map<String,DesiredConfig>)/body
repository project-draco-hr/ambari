{
  Boolean stale=null;
  Lock readLock=transactionLocks.getLock(LockArea.STALE_CONFIG_CACHE).readLock();
  readLock.lock();
  try {
    if (STALE_CONFIGS_CACHE_ENABLED) {
      stale=staleConfigsCache.getIfPresent(sch);
    }
    if (stale == null) {
      Map<String,DesiredConfig> desiredConfigs=staleConfigCacheDesiredConfigs != null ? staleConfigCacheDesiredConfigs : requestDesiredConfigs;
      stale=calculateIsStaleConfigs(sch,desiredConfigs);
      staleConfigsCache.put(sch,stale);
      if (LOG.isDebugEnabled()) {
        LOG.debug("Cache configuration staleness for host {} and component {} as {}",sch.getHostName(),sch.getServiceComponentName(),stale);
      }
    }
    return stale;
  }
  finally {
    readLock.unlock();
  }
}
