{
  Map<String,Set<PropertyInfo>> defaultPropertiesByType=new HashMap<String,Set<PropertyInfo>>();
  Set<org.apache.ambari.server.state.PropertyInfo> stackConfigurationProperties=ambariMetaInfo.getStackProperties(stack.getStackName(),stack.getStackVersion());
  for (  PropertyInfo stackDefaultProperty : stackConfigurationProperties) {
    String type=ConfigHelper.fileNameToConfigType(stackDefaultProperty.getFilename());
    if (!defaultPropertiesByType.containsKey(type)) {
      defaultPropertiesByType.put(type,new HashSet<PropertyInfo>());
    }
    defaultPropertiesByType.get(type).add(stackDefaultProperty);
  }
  for (  String serviceName : cluster.getServices().keySet()) {
    Set<org.apache.ambari.server.state.PropertyInfo> serviceConfigurationProperties=ambariMetaInfo.getServiceProperties(stack.getStackName(),stack.getStackVersion(),serviceName);
    for (    PropertyInfo serviceDefaultProperty : serviceConfigurationProperties) {
      String type=ConfigHelper.fileNameToConfigType(serviceDefaultProperty.getFilename());
      if (!defaultPropertiesByType.containsKey(type)) {
        defaultPropertiesByType.put(type,new HashSet<PropertyInfo>());
      }
      defaultPropertiesByType.get(type).add(serviceDefaultProperty);
    }
  }
  return defaultPropertiesByType;
}
