{
  StackId stackId=cluster.getCurrentStackVersion();
  StackInfo stack=ambariMetaInfo.getStackInfo(stackId.getStackName(),stackId.getStackVersion());
  for (  ServiceInfo serviceInfo : stack.getServices()) {
    Set<PropertyInfo> stackProperties=ambariMetaInfo.getProperties(stack.getName(),stack.getVersion(),serviceInfo.getName());
    Set<PropertyInfo> stackLevelProperties=ambariMetaInfo.getStackProperties(stack.getName(),stack.getVersion());
    stackProperties.addAll(stackLevelProperties);
    for (    PropertyInfo stackProperty : stackProperties) {
      String stackPropertyConfigType=fileNameToConfigType(stackProperty.getFilename());
      if (stackProperty.getName().equals(propertyName) && stackPropertyConfigType.equals(configType)) {
        return stackProperty.getValue();
      }
    }
  }
  return null;
}
