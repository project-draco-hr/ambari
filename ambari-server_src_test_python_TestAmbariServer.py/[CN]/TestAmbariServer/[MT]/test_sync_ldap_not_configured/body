@patch.object(ambari_server, 'is_root')
@patch.object(ambari_server, 'is_server_runing')
@patch.object(ambari_server, 'get_ambari_properties')
def test_sync_ldap_not_configured(self, get_ambari_properties_method, is_server_runing_method, is_root_method):
    is_root_method.return_value = True
    is_server_runing_method.return_value = (True, None)
    configs = MagicMock()
    configs.get_property.return_value = None
    get_ambari_properties_method.return_value = configs
    try:
        ambari_server.sync_ldap()
        self.fail('Should throw exception if ldap is not configured')
    except FatalException as fe:
        self.assertTrue(('not configured' in fe.reason))
        pass
