@patch.object(OSCheck, 'get_os_family')
@patch.object(OSCheck, 'get_os_type')
@patch.object(OSCheck, 'get_os_major_version')
@patch('os.chdir')
@patch('ambari_commons.os_linux.os_run_os_command')
def test_install_jdk(self, run_os_command_mock, os_chdir_mock, get_os_major_version_mock, get_os_type_mock, get_os_family_mock):
    jdk_rel = JDKRelease('jdk1', 'JDK name', 'http://somewhere/somewhere.tar.gz', 'somewhere.tar.gz', 'http://somewhere/some-jcpol.tar.gz', 'some-jcpol.tar.gz', '/jdk1', '(jdk.*)/jre')
    run_os_command_mock.return_value = (1, 'Creating jdk1/jre', '')
    failed = False
    try:
        jdk_setup_obj = JDKSetup()
        jdk_setup_obj._install_jdk('/java.tar.gz', jdk_rel)
        self.fail('Exception was not rised!')
    except FatalException:
        failed = True
    self.assertTrue(failed)
