@patch.object(OSCheck, 'os_distribution', new=MagicMock(return_value=os_distro_value))
@patch.object(_ambari_server_, 'setup')
@patch('optparse.OptionParser')
def test_main_with_preset_dbms(self, optionParserMock, setup_method):
    opm = optionParserMock.return_value
    options = MagicMock()
    args = ['setup']
    opm.parse_args.return_value = (options, args)
    options.dbms = 'sqlanywhere'
    options.sid_or_sname = 'sname'
    _ambari_server_.mainBody()
    self.assertTrue(setup_method.called)
    self.assertEquals(options.database_index, 5)
    pass
