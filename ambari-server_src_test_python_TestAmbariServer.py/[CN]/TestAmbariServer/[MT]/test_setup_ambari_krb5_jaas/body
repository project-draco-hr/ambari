@patch('re.sub')
@patch('fileinput.FileInput')
@patch.object(ambari_server, 'get_validated_string_input')
@patch.object(ambari_server, 'search_file')
@patch('os.path.exists')
def test_setup_ambari_krb5_jaas(self, exists_mock, search_mock, get_validated_string_input_mock, fileinput_mock, re_sub_mock):
    exists_mock.return_value = True
    search_mock.return_value = 'filepath'
    get_validated_string_input_mock.side_effect = ['aaa@aaa.cnn', 'pathtokeytab']
    fileinput_mock.return_value = ['keyTab=xyz', 'principal=xyz']
    ambari_server.setup_ambari_krb5_jaas()
    self.assertTrue(fileinput_mock.called)
    self.assertTrue(re_sub_mock.called)
    self.assertTrue(re_sub_mock.call_args_list, ['aaa@aaa.cnn', 'pathtokeytab'])
