@patch.object(ambari_server, 'find_properties_file')
@patch('__builtin__.open')
@patch('ambari-server.Properties')
def test_read_ambari_user(self, properties_mock, open_mock, find_properties_file_mock):
    open_mock.return_value = 'dummy'
    find_properties_file_mock.return_value = 'dummy'
    properties_mock.return_value.__getitem__.return_value = 'dummy_user'
    user = ambari_server.read_ambari_user()
    self.assertEquals(user, 'dummy_user')
    properties_mock.return_value.__getitem__.return_value = None
    user = ambari_server.read_ambari_user()
    self.assertEquals(user, None)
