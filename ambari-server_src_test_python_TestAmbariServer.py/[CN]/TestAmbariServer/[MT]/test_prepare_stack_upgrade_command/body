def test_prepare_stack_upgrade_command(self):
    test_command = "sqlplus -S -L 'user/pass@(description=(address=(protocol=TCP)(host=oraclehost)(port=1521))(connect_data=(sid=db_SID)))' @/var/lib/ambari-server/resources/upgrade/dml/Ambari-DML-Oracle-UPGRADE_STACK.sql HDP 2.1.1"
    args = MagicMock()
    args.database = 'oracle'
    args.database_username = 'user'
    args.database_password = 'pass'
    args.database_host = 'oraclehost'
    args.sid_or_sname = 'sid'
    args.jdbc_url = 'fake'
    args.database_port = '1521'
    args.database_name = 'db_SID'
    command = ambari_server.prepare_stack_upgrade_command(args, 'HDP-2.1.1')
    self.assertEqual(command, test_command)
    pass
