@patch.object(ambari_server, 'read_password')
def test_configure_database_password(self, read_password_method):
    out = StringIO.StringIO()
    sys.stdout = out
    read_password_method.return_value = 'fakepasswd'
    result = ambari_server.configure_database_password(True)
    self.assertTrue(read_password_method.called)
    self.assertEquals('fakepasswd', result)
    result = ambari_server.configure_database_password(True)
    self.assertEquals('fakepasswd', result)
    result = ambari_server.configure_database_password(True)
    self.assertEquals('fakepasswd', result)
    sys.stdout = sys.__stdout__
