@patch('__builtin__.open')
@patch.object(ambari__server, 'search_file')
@patch.object(ambari__server, 'set_file_permissions')
@patch.object(ambari__server, 'read_ambari_user')
def test_store_password_file(self, read_ambari_user_mock, set_file_permissions_mock, search_file_mock, open_mock):
    search_file_mock.return_value = '/etc/ambari-server/conf/ambari.properties'
    open_mock.return_value = MagicMock()
    ambari__server.store_password_file('password', 'passfile')
    self.assertTrue(set_file_permissions_mock.called)
