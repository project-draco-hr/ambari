@patch.object(ambari_server, 'search_file')
@patch('__builtin__.open')
@patch.object(ambari_server, 'read_ambari_user')
@patch.object(ambari_server, 'set_file_permissions')
def test_store_password_file(self, set_file_permissions_mock, read_ambari_user_mock, open_mock, search_file_mock):
    search_file_mock.return_value = '/etc/ambari-server/conf/ambari.properties'
    open_mock.return_value = MagicMock()
    ambari_server.store_password_file('password', 'passfile')
    self.assertTrue(set_file_permissions_mock.called)
