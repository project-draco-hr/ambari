def test_decom_default(self):
    self.executeScript('1.3.2/services/HBASE/package/scripts/hbase_master.py', classname='HbaseMaster', command='decommission', config_file='default.json')
    self.assertResourceCalled('File', '/usr/lib/hbase/bin/draining_servers.rb', content=StaticFile('draining_servers.rb'), mode=493)
    self.assertResourceCalled('Execute', ' /usr/lib/hbase/bin/hbase --config /etc/hbase/conf org.jruby.Main /usr/lib/hbase/bin/draining_servers.rb add host1', logoutput=True, user='hbase')
    self.assertResourceCalled('Execute', ' /usr/lib/hbase/bin/hbase --config /etc/hbase/conf org.jruby.Main /usr/lib/hbase/bin/region_mover.rb unload host1', logoutput=True, user='hbase')
    self.assertResourceCalled('Execute', ' /usr/lib/hbase/bin/hbase --config /etc/hbase/conf org.jruby.Main /usr/lib/hbase/bin/draining_servers.rb add host2', logoutput=True, user='hbase')
    self.assertResourceCalled('Execute', ' /usr/lib/hbase/bin/hbase --config /etc/hbase/conf org.jruby.Main /usr/lib/hbase/bin/region_mover.rb unload host2', logoutput=True, user='hbase')
    self.assertNoMoreResources()
