{
  UserRequest userRequest=getRequest(getProperties(predicate));
  Set<UserResponse> responses=getManagementController().getUsers(Collections.singleton(userRequest));
  Set<Resource> resources=new HashSet<Resource>();
  for (  UserResponse userResponse : responses) {
    ResourceImpl resource=new ResourceImpl(Resource.Type.User);
    resource.setProperty(USER_USERNAME_PROPERTY_ID,userResponse.getUsername());
    if (userResponse.getRoles().size() > 0) {
      int i=0;
      StringBuilder sb=new StringBuilder();
      for (      String role : userResponse.getRoles()) {
        if ((i++) != 0)         sb.append(',');
        sb.append(role);
      }
      resource.setProperty(USER_ROLES_PROPERTY_ID,sb.toString());
    }
    resources.add(resource);
  }
  return resources;
}
