{
  TestViewDataMigrationService service=new TestViewDataMigrationService(viewName,version2,instanceName);
  ViewDataMigrationContextImpl context=createNiceMock(ViewDataMigrationContextImpl.class);
  expect(context.getOriginDataVersion()).andReturn(42);
  expect(context.getCurrentDataVersion()).andReturn(42);
  replay(context);
  service.setMigrationContext(context);
  ViewDataMigrator migrator=service.getViewDataMigrator(service.getViewInstanceEntity(viewName,version2,instanceName),context);
  Assert.assertTrue(migrator instanceof ViewDataMigrationService.CopyAllDataMigrator);
}
