{
  ViewEntity viewEntity=createNiceMock(ViewEntity.class);
  expect(viewEntity.getViewName()).andReturn(viewName);
  expect(viewEntity.getVersion()).andReturn(viewVersion);
  replay(viewEntity);
  ViewInstanceEntity instanceEntity=createNiceMock(ViewInstanceEntity.class);
  expect(instanceEntity.getViewEntity()).andReturn(viewEntity);
  expect(instanceEntity.getViewName()).andReturn(viewName);
  expect(instanceEntity.getInstanceName()).andReturn(instanceName);
  try {
    ViewDataMigrator mockMigrator;
    if (migrator == null) {
      mockMigrator=createNiceMock(ViewDataMigrator.class);
    }
 else {
      mockMigrator=migrator;
    }
    expect(instanceEntity.getDataMigrator(anyObject(ViewDataMigrationContext.class))).andReturn(mockMigrator);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  replay(instanceEntity);
  return instanceEntity;
}
