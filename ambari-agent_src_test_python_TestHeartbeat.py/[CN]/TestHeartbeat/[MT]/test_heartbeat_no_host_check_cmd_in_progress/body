@patch.object(HostInfo, 'register')
def test_heartbeat_no_host_check_cmd_in_progress(self, register_mock):
    actionQueue = ActionQueue(AmbariConfig.AmbariConfig().getConfig())
    actionQueue.commandInProgress = {'role': 'role', 'actionId': 'actionId', 'taskId': 'taskId', 'stdout': 'stdout', 'clusterName': 'clusterName', 'stderr': 'none', 'exitCode': 777, 'serviceName': 'serviceName', 'status': 'IN_PROGRESS', 'configurations': {'global': {}, }, 'roleCommand': 'START', }
    heartbeat = Heartbeat(actionQueue)
    heartbeat.build(12, 6)
    self.assertTrue(register_mock.called)
    (args, kwargs) = register_mock.call_args_list[0]
    self.assertTrue(args[2])
    self.assertFalse(args[1])
