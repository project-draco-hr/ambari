def test_build(self):
    AmbariConfig.config.set('services', 'serviceToPidMapFile', self.dictPath)
    actionQueue = ActionQueue(AmbariConfig.AmbariConfig().getConfig())
    heartbeat = Heartbeat(actionQueue)
    result = heartbeat.build(100)
    print ('Heartbeat: ' + str(result))
    self.assertEquals((result['hostname'] != ''), True, 'hostname should not be empty')
    self.assertEquals(result['responseId'], 100)
    self.assertEquals((result['componentStatus'] is not None), True, 'Heartbeat should contain componentStatus')
    self.assertEquals((result['reports'] is not None), True, 'Heartbeat should contain reports')
    self.assertEquals((result['timestamp'] >= 1353679373880L), True)
    self.assertEquals(len(result['nodeStatus']), 2)
    self.assertEquals(result['nodeStatus']['cause'], 'NONE')
    self.assertEquals(result['nodeStatus']['status'], 'HEALTHY')
    self.assertEquals(len(result), 6)
    self.assertEquals((not heartbeat.reports), True, 'Heartbeat should not contain task in progress')
