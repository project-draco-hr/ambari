def test_heartbeat_with_task_in_progress(self):
    actionQueue = ActionQueue(AmbariConfig.AmbariConfig().getConfig())
    actionQueue.commandInProgress = {'role': 'role', 'actionId': 'actionId', 'taskId': 'taskId', 'stdout': 'stdout', 'clusterName': 'clusterName', 'stderr': 'none', 'exitCode': 777, 'serviceName': 'serviceName', 'status': 'IN_PROGRESS', }
    heartbeat = Heartbeat(actionQueue)
    result = heartbeat.build(100)
    self.assertEquals(len(result['reports']), 1)
    self.assertEquals(result['reports'][0]['role'], 'role')
    self.assertEquals(result['reports'][0]['actionId'], 'actionId')
    self.assertEquals(result['reports'][0]['taskId'], 'taskId')
    self.assertEquals(result['reports'][0]['stdout'], '...')
    self.assertEquals(result['reports'][0]['clusterName'], 'clusterName')
    self.assertEquals(result['reports'][0]['stderr'], '...')
    self.assertEquals(result['reports'][0]['exitCode'], 777)
    self.assertEquals(result['reports'][0]['serviceName'], 'serviceName')
    self.assertEquals(result['reports'][0]['status'], 'IN_PROGRESS')
    pass
