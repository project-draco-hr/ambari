@patch.object(ActionDependencyManager, 'read_dependencies')
@patch.object(ActionDependencyManager, 'dump_info')
@patch.object(ActionDependencyManager, 'can_be_executed_in_parallel')
@patch.object(HostInfo, 'register')
def test_heartbeat_no_host_check_cmd_in_queue(self, register_mock, can_be_executed_in_parallel_mock, dump_info_mock, read_dependencies_mock):
    can_be_executed_in_parallel_mock.return_value = False
    actionQueue = ActionQueue(AmbariConfig.AmbariConfig().getConfig(), 'dummy_controller')
    statusCommand = {'serviceName': 'HDFS', 'commandType': 'STATUS_COMMAND', 'clusterName': '', 'componentName': 'DATANODE', 'configurations': {'global': {}, }, }
    actionQueue.put(list(statusCommand))
    heartbeat = Heartbeat(actionQueue)
    heartbeat.build(12, 6)
    self.assertTrue(register_mock.called)
    (args, kwargs) = register_mock.call_args_list[0]
    self.assertTrue(args[2])
    self.assertFalse(args[1])
