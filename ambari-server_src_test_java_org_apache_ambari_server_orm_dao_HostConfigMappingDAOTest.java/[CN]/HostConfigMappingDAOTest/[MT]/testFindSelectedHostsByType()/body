{
  HostConfigMappingEntity entity1=createEntity(1L,"h1","global","v1");
  HostConfigMappingEntity entity2=createEntity(1L,"h2","global","v1");
  List<HostConfigMappingEntity> list=hostConfigMappingDAO.findSelectedHostsByType(1L,"global");
  Assert.assertEquals("Expected two hosts",2,list.size());
  entity2.setSelected(0);
  hostConfigMappingDAO.merge(entity2);
  list=hostConfigMappingDAO.findSelectedHostsByType(1L,"global");
  Assert.assertEquals("Expected one host",1,list.size());
  list=hostConfigMappingDAO.findSelectedHostsByType(1L,"core-site");
  Assert.assertEquals("Expected no matching hosts",0,list.size());
  entity1.setSelected(0);
  hostConfigMappingDAO.merge(entity1);
  list=hostConfigMappingDAO.findSelectedHostsByType(1L,"global");
  Assert.assertEquals("Expected no selected hosts",0,list.size());
}
