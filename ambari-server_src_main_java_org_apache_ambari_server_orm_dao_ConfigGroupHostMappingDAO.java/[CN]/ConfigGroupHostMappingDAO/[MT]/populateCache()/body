{
  if (!cacheLoaded) {
    gl.writeLock().lock();
    try {
      if (configGroupHostMappingByHost == null) {
        configGroupHostMappingByHost=new WeakHashMap<String,Set<ConfigGroupHostMapping>>();
        TypedQuery<ConfigGroupHostMappingEntity> query=entityManagerProvider.get().createQuery("SELECT entity FROM ConfigGroupHostMappingEntity entity",ConfigGroupHostMappingEntity.class);
        List<ConfigGroupHostMappingEntity> configGroupHostMappingEntities=daoUtils.selectList(query);
        for (        ConfigGroupHostMappingEntity configGroupHostMappingEntity : configGroupHostMappingEntities) {
          Set<ConfigGroupHostMapping> setByHost=configGroupHostMappingByHost.get((configGroupHostMappingEntity.getHostname()));
          if (setByHost == null) {
            setByHost=new HashSet<ConfigGroupHostMapping>();
            configGroupHostMappingByHost.put(configGroupHostMappingEntity.getHostname(),setByHost);
          }
          ConfigGroupHostMapping configGroupHostMapping=buildConfigGroupHostMapping(configGroupHostMappingEntity);
          setByHost.add(configGroupHostMapping);
        }
      }
    }
  finally {
      gl.writeLock().unlock();
    }
    cacheLoaded=true;
  }
}
