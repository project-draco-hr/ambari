{
  KerberosCredential credential=null;
  if (map != null) {
    Object attribute;
    String principal;
    String password;
    String keytab;
    if (prefix == null) {
      prefix="";
    }
    attribute=map.get(prefix + KEY_NAME_PRINCIPAL);
    principal=(attribute == null) ? null : attribute.toString();
    attribute=map.get(prefix + KEY_NAME_PASSWORD);
    password=(attribute == null) ? null : attribute.toString();
    attribute=map.get(prefix + KEY_NAME_KEYTAB);
    keytab=(attribute == null) ? null : attribute.toString();
    if (((principal != null) && !principal.isEmpty()) || ((password != null) && !password.isEmpty()) || ((keytab != null) && !keytab.isEmpty())) {
      credential=new KerberosCredential(principal,password,keytab);
    }
  }
  return credential;
}
