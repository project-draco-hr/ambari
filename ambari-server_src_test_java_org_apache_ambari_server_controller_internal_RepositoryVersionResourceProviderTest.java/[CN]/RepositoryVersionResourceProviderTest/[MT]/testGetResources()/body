{
  final ResourceProvider provider=injector.getInstance(ResourceProviderFactory.class).getRepositoryVersionProvider();
  final RepositoryVersionDAO repositoryVersionDAO=injector.getInstance(RepositoryVersionDAO.class);
  final RepositoryVersionEntity entity=new RepositoryVersionEntity();
  entity.setDisplayName("name");
  entity.setRepositories("[{\"os\":\"redhat6\",\"baseurls\":[{\"id\":\"HDP-2.2.0.1-885\",\"type\":\"HDP\",\"baseurl\":\"http://host1/hdp\"},{\"id\":\"HDP-UTILS-1.0.0.20\",\"type\":\"HDP-UTILS\",\"baseurl\":\"http://host1/hdp-utils\"}]}]");
  entity.setStack("HDP-1.1");
  entity.setUpgradePackage("pack1");
  entity.setVersion("1.1.1.1");
  final Request getRequest=PropertyHelper.getReadRequest(RepositoryVersionResourceProvider.REPOSITORY_VERSION_DISPLAY_NAME_PROPERTY_ID);
  Assert.assertEquals(0,provider.getResources(getRequest,null).size());
  repositoryVersionDAO.create(entity);
  Assert.assertEquals(1,provider.getResources(getRequest,null).size());
}
