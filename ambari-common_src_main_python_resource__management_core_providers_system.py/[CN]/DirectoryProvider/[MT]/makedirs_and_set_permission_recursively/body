@staticmethod
def makedirs_and_set_permission_recursively(path, owner, group, mode):
    folders = []
    (path, folder) = os.path.split(path)
    while (folder != ''):
        folders.append(folder)
        (path, folder) = os.path.split(path)
    if (path != ''):
        folders.append(path)
    folders.reverse()
    dir_prefix = ''
    for folder in folders:
        dir_prefix = os.path.join(dir_prefix, folder)
        if (not sudo.path_exists(dir_prefix)):
            sudo.makedir(dir_prefix, (mode or 493))
            _ensure_metadata(dir_prefix, None, None, mode)
