def action_create(self):
    path = self.resource.path
    if (not os.path.exists(path)):
        Logger.info(('Creating directory %s' % self.resource))
        if self.resource.recursive:
            if self.resource.recursive_permission:
                DirectoryProvider.makedirs_and_set_permission_recursively(path, self.resource.owner, self.resource.group, self.resource.mode)
            else:
                sudo.makedirs(path, (self.resource.mode or 493))
        else:
            dirname = os.path.dirname(path)
            if (not os.path.isdir(dirname)):
                raise Fail(("Applying %s failed, parent directory %s doesn't exist" % (self.resource, dirname)))
            sudo.makedir(path, (self.resource.mode or 493))
    if (not os.path.isdir(path)):
        raise Fail(('Applying %s failed, file %s already exists' % (self.resource, path)))
    _ensure_metadata(path, self.resource.owner, self.resource.group, mode=self.resource.mode, cd_access=self.resource.cd_access)
