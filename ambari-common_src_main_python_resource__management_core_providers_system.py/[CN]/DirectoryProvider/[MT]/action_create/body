def action_create(self):
    path = self.resource.path
    if (not os.path.exists(path)):
        Logger.info(('Creating directory %s' % self.resource))
        if self.resource.recursive:
            os.makedirs(path, (self.resource.mode or 493))
        else:
            dirname = os.path.dirname(path)
            if (not os.path.isdir(dirname)):
                raise Fail(("Applying %s failed, parent directory %s doesn't exist" % (self.resource, dirname)))
            os.mkdir(path, (self.resource.mode or 493))
    if (not os.path.isdir(path)):
        raise Fail(('Applying %s failed, file %s already exists' % (self.resource, path)))
    _ensure_metadata(path, self.resource.owner, self.resource.group, mode=self.resource.mode)
