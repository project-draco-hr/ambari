{
  ClusterEntity clusterEntity=clusterDAO.findById(cluster.getClusterId());
  if (isPersisted()) {
    hostEntity.getClusterEntities().add(clusterEntity);
    clusterEntity.getHostEntities().add(hostEntity);
    clusterDAO.merge(clusterEntity);
    hostDAO.merge(hostEntity);
    cluster.refresh();
  }
 else {
    Collection<ClusterEntity> clusters=hostEntity.getClusterEntities();
    if (clusters == null) {
      hostEntity.setClusterEntities(new ArrayList<ClusterEntity>());
    }
    hostEntity.getClusterEntities().add(clusterEntity);
  }
}
