{
  Map<Resource.Type,Set<Resource>> keepers=new HashMap<Resource.Type,Set<Resource>>();
  for (  Resource.Type type : resourceMap.keySet()) {
    keepers.put(type,populateResources(type,resourceMap.get(type),requestMap.get(type),predicateMap.get(type)));
  }
  return keepers;
}
