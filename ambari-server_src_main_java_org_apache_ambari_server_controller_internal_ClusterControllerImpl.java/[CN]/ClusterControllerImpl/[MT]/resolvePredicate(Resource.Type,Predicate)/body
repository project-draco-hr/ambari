{
  ResourceProvider provider=ensureResourceProvider(type);
  Set<String> keyPropertyIds=new HashSet<String>(provider.getKeyPropertyIds().values());
  Request readRequest=PropertyHelper.getReadRequest(keyPropertyIds);
  Iterable<Resource> resources=getResources(type,readRequest,predicate);
  PredicateBuilder pb=new PredicateBuilder();
  PredicateBuilder.PredicateBuilderPredicate pbPredicate=null;
  for (  Resource resource : resources) {
    if (pbPredicate != null) {
      pb=pbPredicate.or();
    }
    pb=pb.begin();
    pbPredicate=null;
    for (    String keyPropertyId : keyPropertyIds) {
      if (pbPredicate != null) {
        pb=pbPredicate.and();
      }
      pbPredicate=pb.property(keyPropertyId).equals((Comparable)resource.getPropertyValue(keyPropertyId));
    }
    if (pbPredicate != null) {
      pbPredicate=pbPredicate.end();
    }
  }
  return pbPredicate == null ? null : pbPredicate.toPredicate();
}
