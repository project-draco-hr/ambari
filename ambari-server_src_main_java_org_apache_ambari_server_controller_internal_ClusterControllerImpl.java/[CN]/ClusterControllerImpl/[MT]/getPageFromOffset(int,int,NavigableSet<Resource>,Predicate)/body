{
  int currentOffset=0;
  Resource previous=null;
  Set<Resource> pageResources=new LinkedHashSet<Resource>();
  Iterator<Resource> iterator=resources.iterator();
  while (currentOffset < offset && iterator.hasNext()) {
    previous=iterator.next();
    ++currentOffset;
  }
  for (int i=0; i < pageSize && iterator.hasNext(); ++i) {
    pageResources.add(iterator.next());
  }
  return new PageResponseImpl(new ResourceIterable(pageResources,predicate),currentOffset,previous,iterator.hasNext() ? iterator.next() : null);
}
