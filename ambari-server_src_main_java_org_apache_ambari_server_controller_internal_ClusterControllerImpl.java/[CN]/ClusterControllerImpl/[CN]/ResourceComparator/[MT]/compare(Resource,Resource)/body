{
  int compVal=resource1.getType().compareTo(resource2.getType());
  if (compVal == 0) {
    Schema schema=getSchema(resource1.getType());
    for (    Resource.Type type : Resource.Type.values()) {
      String keyPropertyId=schema.getKeyPropertyId(type);
      if (keyPropertyId != null) {
        compVal=compareValues(resource1.getPropertyValue(keyPropertyId),resource2.getPropertyValue(keyPropertyId));
        if (compVal != 0) {
          return compVal;
        }
      }
    }
  }
  return compVal;
}
