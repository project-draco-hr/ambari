{
  if (isZkConnectString) {
    boolean setupStatus=createCollectionsIfNeeded(splitInterval,configName,numberOfShards,replicationFactor);
    logger.info("Setup status for " + collectionName + " is "+ setupStatus);
    if (!setupStatus) {
      Thread setupThread=new Thread("setup_collection_" + collectionName){
        @Override public void run(){
          logger.info("Started monitoring thread to check availability of Solr server. collection=" + collectionName);
          int retryCount=0;
          while (true) {
            try {
              Thread.sleep(SETUP_RETRY_SECOND * 1000);
              retryCount++;
              boolean setupStatus=createCollectionsIfNeeded(splitInterval,configName,numberOfShards,replicationFactor);
              if (setupStatus) {
                logger.info("Setup for collection " + collectionName + " is successful. Exiting setup retry thread");
                break;
              }
            }
 catch (            InterruptedException sleepInterrupted) {
              logger.info("Sleep interrupted while setting up collection " + collectionName);
              break;
            }
catch (            Exception e) {
              logger.error("Error setting up collection=" + collectionName,e);
            }
            logger.error("Error setting collection. collection=" + collectionName + ", retryCount="+ retryCount);
          }
        }
      }
;
      setupThread.setDaemon(true);
      setupThread.start();
    }
  }
  if (needToPopulateSchemaField) {
    populateSchemaFields();
  }
}
