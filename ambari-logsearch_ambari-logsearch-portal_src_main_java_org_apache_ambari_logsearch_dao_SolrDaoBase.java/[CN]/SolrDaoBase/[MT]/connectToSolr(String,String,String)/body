{
  this.collectionName=collection;
  solrDetail="zkConnectString=" + zkConnectString + ", collection="+ collection+ ", url="+ url;
  logger.info("connectToSolr() " + solrDetail);
  if (StringUtils.isBlank(collection)) {
    throw new Exception("For solr, collection name is mandatory. " + solrDetail);
  }
  setupSecurity();
  if (solrClient != null) {
    return solrClient;
  }
  if (!StringUtils.isBlank(zkConnectString)) {
    isZkConnectString=true;
    solrDetail="zkConnectString=" + zkConnectString + ", collection="+ collection;
    logger.info("Using zookeeper. " + solrDetail);
    solrClouldClient=new CloudSolrClient(zkConnectString);
    solrClouldClient.setDefaultCollection(collection);
    solrClient=solrClouldClient;
    int waitDurationMS=3 * 60 * 1000;
    checkSolrStatus(waitDurationMS);
  }
 else {
    if (StringUtils.isBlank(url)) {
      throw new Exception("Both zkConnectString and URL are empty. zkConnectString=" + zkConnectString + ", "+ "collection="+ collection+ ", url="+ url);
    }
    solrDetail="collection=" + collection + ", url="+ url;
    String collectionURL=url + "/" + collection;
    logger.info("Connecting to  solr : " + collectionURL);
    solrClient=new HttpSolrClient(collectionURL);
  }
  return solrClient;
}
