{
  List<String> collections=getCollections();
  List<String> collectionToAdd=new ArrayList<String>();
  for (  String col : collections) {
    if (collectionListIn.contains(col)) {
      collectionToAdd.add(col);
    }
  }
  String collectionsCSV=null;
  if (collectionToAdd.size() > 0) {
    for (    String col : collectionToAdd) {
      if (collectionsCSV == null) {
        collectionsCSV=col;
      }
 else {
        collectionsCSV=collectionsCSV + "," + col;
      }
    }
    CollectionAdminRequest.CreateAlias aliasCreateRequest=new CollectionAdminRequest.CreateAlias();
    aliasCreateRequest.setAliasName(aliasNameIn);
    aliasCreateRequest.setAliasedCollections(collectionsCSV);
    CollectionAdminResponse createResponse=aliasCreateRequest.process(solrClouldClient);
    if (createResponse.getStatus() != 0) {
      logger.error("Error creating alias. alias=" + aliasNameIn + ", collectionList="+ collectionsCSV+ ", solrDetail="+ solrDetail+ ", response="+ createResponse);
    }
  }
 else {
    if (collectionToAdd.size() == collectionListIn.size()) {
      logger.info("Created alias for all collections. alias=" + aliasNameIn + ", collectionsCSV="+ collectionsCSV+ ", solrDetail="+ solrDetail);
    }
 else {
      logger.info("Created alias for " + collectionToAdd.size() + " out of "+ +collectionListIn.size()+ " collections. alias="+ aliasNameIn+ ", collectionsCSV="+ collectionsCSV+ ", solrDetail="+ solrDetail);
    }
  }
  return collectionToAdd.size();
}
