def setup_users():
    '\n  Creates users before cluster installation\n  '
    import params
    if (not params.host_sys_prepped):
        for group in params.group_list:
            Group(group, ignore_failures=params.ignore_groupsusers_create)
        for user in params.user_list:
            User(user, gid=params.user_to_gid_dict[user], groups=params.user_to_groups_dict[user], ignore_failures=params.ignore_groupsusers_create)
        if (params.override_uid == 'true'):
            set_uid(params.smoke_user, params.smoke_user_dirs)
        else:
            print 'Skipping setting uid for smoke user as host is sys prepped'
    else:
        print 'Skipping creation of User and Group as host is sys prepped'
        pass
    if params.has_hbase_masters:
        Directory(params.hbase_tmp_dir, owner=params.hbase_user, mode=509, recursive=True, cd_access='a')
        if ((not params.host_sys_prepped) and (params.override_uid == 'true')):
            set_uid(params.hbase_user, params.hbase_user_dirs)
        else:
            print 'Skipping setting uid for hbase user as host is sys prepped'
            pass
    if (not params.host_sys_prepped):
        if params.has_namenode:
            create_dfs_cluster_admins()
        if (params.has_tez and (params.hdp_stack_version != '') and (compare_versions(params.hdp_stack_version, '2.3') >= 0)):
            create_tez_am_view_acls()
    else:
        print 'Skipping setting dfs cluster admin and tez view acls as host is sys prepped'
