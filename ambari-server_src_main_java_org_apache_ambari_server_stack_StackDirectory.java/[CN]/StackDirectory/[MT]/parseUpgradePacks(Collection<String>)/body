{
  Map<String,UpgradePack> upgradeMap=new HashMap<String,UpgradePack>();
  if (subDirs.contains(UPGRADE_PACK_FOLDER_NAME)) {
    File f=new File(getAbsolutePath() + File.separator + UPGRADE_PACK_FOLDER_NAME);
    if (f.isDirectory()) {
      upgradesDir=f.getAbsolutePath();
      for (      File upgradeFile : f.listFiles(XML_FILENAME_FILTER)) {
        try {
          upgradeMap.put(FilenameUtils.removeExtension(upgradeFile.getName()),unmarshaller.unmarshal(UpgradePack.class,upgradeFile));
        }
 catch (        JAXBException e) {
          throw new AmbariException("Unable to parse stack upgrade file at location: " + upgradeFile.getAbsolutePath(),e);
        }
      }
    }
  }
  if (upgradesDir == null) {
    LOG.info("Stack '{}' doesn't contain an upgrade directory ",getPath());
  }
  if (!upgradeMap.isEmpty()) {
    upgradePacks=upgradeMap;
  }
}
