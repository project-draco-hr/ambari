{
  Map<String,Predicate> predicateMap=new HashMap<String,Predicate>();
  for (  Resource resource : resources) {
    for (    Map.Entry<String,ResourceInstanceImpl> entry : m_mapQuerySubResources.entrySet()) {
      ResourceInstanceImpl subResourceInstance=entry.getValue();
      String subResCategory=entry.getKey();
      Predicate predicate=predicateMap.get(subResCategory);
      setParentIdsOnSubResource(resource,subResourceInstance);
      predicateMap.put(subResCategory,predicate == null ? subResourceInstance.getQuery().getPredicate() : new OrPredicate(predicate,subResourceInstance.getQuery().getPredicate()));
    }
  }
  return predicateMap;
}
