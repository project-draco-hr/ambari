def test_createComponentLayoutRecommendations_addService_1freeHost(self):
    '\n    Test that already installed slaves are not added to any free hosts (not having any component installed)\n    as part of recommendation received during Add service operation.\n    For already installed services, recommendation for installed components should match the existing layout\n    '
    services = {'services': [{'StackServices': {'service_name': 'HDFS', }, 'components': [{'StackServiceComponents': {'cardinality': '1+', 'component_category': 'SLAVE', 'component_name': 'DATANODE', 'hostnames': ['c6401.ambari.apache.org'], }, }], }], }
    hosts = self.prepareHosts(['c6401.ambari.apache.org', 'c6402.ambari.apache.org'])
    recommendations = self.stackAdvisor.createComponentLayoutRecommendations(services, hosts)
    "\n    Recommendation received should be as below:\n                               {\n                                  'blueprint': {\n                                          'host_groups': [{\n                                                  'name': 'host-group-1',\n                                                  'components': []\n                                          }, {\n                                                  'name': 'host-group-2',\n                                                  'components': [{\n                                                          'name': 'DATANODE'\n                                                  }]\n                                          }]\n                                  },\n                                  'blueprint_cluster_binding': {\n                                          'host_groups': [{\n                                                  'hosts': [{\n                                                          'fqdn': 'c6402.ambari.apache.org'\n                                                  }],\n                                                  'name': 'host-group-1'\n                                          }, {\n                                                  'hosts': [{\n                                                          'fqdn': 'c6401.ambari.apache.org'\n                                                  }],\n                                                  'name': 'host-group-2'\n                                          }]\n                                  }\n                           }\n    "
    self.assertFalse(recommendations['blueprint']['host_groups'][0]['components'])
    self.assertEquals(recommendations['blueprint']['host_groups'][1]['components'][0]['name'], 'DATANODE')
