def test_getClusterData_withHBaseAnd6gbRam(self):
    servicesList = ['HBASE']
    components = []
    hosts = {'items': [{'Hosts': {'cpu_count': 8, 'total_mem': 6291456, 'disk_info': [{'mountpoint': '/', }, {'mountpoint': '/dev/shm', }, {'mountpoint': '/vagrant', }, {'mountpoint': '/', }, {'mountpoint': '/dev/shm', }, {'mountpoint': '/', }, {'mountpoint': '/dev/shm', }, {'mountpoint': '/vagrant', }], }, }], }
    expected = {'hBaseInstalled': True, 'components': components, 'cpu': 8, 'disk': 8, 'ram': 6, 'reservedRam': 2, 'hbaseRam': 1, 'minContainerSize': 512, 'totalAvailableRam': 3072, 'containers': 6, 'ramPerContainer': 512, 'mapMemory': 512, 'reduceMemory': 512, 'amMemory': 512, }
    result = self.stackAdvisor.getClusterData(servicesList, hosts, components)
    self.assertEquals(result, expected)
