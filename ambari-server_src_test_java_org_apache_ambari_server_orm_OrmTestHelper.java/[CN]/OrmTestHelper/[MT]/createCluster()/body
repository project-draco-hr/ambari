{
  ResourceTypeDAO resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  ResourceTypeEntity resourceTypeEntity=new ResourceTypeEntity();
  resourceTypeEntity.setId(ResourceTypeEntity.CLUSTER_RESOURCE_TYPE);
  resourceTypeEntity.setName(ResourceTypeEntity.CLUSTER_RESOURCE_TYPE_NAME);
  resourceTypeEntity=resourceTypeDAO.merge(resourceTypeEntity);
  ResourceEntity resourceEntity=new ResourceEntity();
  resourceEntity.setResourceType(resourceTypeEntity);
  ClusterDAO clusterDAO=injector.getInstance(ClusterDAO.class);
  ClusterEntity clusterEntity=new ClusterEntity();
  clusterEntity.setClusterName("test_cluster1");
  clusterEntity.setClusterInfo("test_cluster_info1");
  clusterEntity.setResource(resourceEntity);
  clusterDAO.create(clusterEntity);
  clusterEntity=clusterDAO.findByName(clusterEntity.getClusterName());
  assertNotNull(clusterEntity);
  assertTrue(clusterEntity.getClusterId() > 0);
  return clusterEntity.getClusterId();
}
