{
  expect(sch.getVersion()).andReturn(UNKNOWN_VERSION);
  expect(serviceComponent.isVersionAdvertised()).andReturn(Boolean.TRUE);
  sch.setVersion(INVALID_NEW_VERSION);
  expectLastCall().once();
  expect(sch.recalculateHostVersionState()).andReturn(null).once();
  replayAll();
  sendEventAndVerify(INVALID_NEW_VERSION);
}
