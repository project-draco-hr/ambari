{
  Map<String,Map<String,PropertyInfo>> componentMetrics=PropertyHelper.getGangliaPropertyIds(Resource.Type.HostComponent,PropertyHelper.MetricsVersion.HDP2);
  AbstractPropertyProvider provider=new TestPropertyProvider(componentMetrics);
  Map<String,PropertyInfo> resourceManagerMetrics=provider.getComponentMetrics().get("RESOURCEMANAGER");
  int metricsBefore=resourceManagerMetrics.size();
  String specificMetric="metrics/yarn/Queue/specificQueue1/specificQueue2/AvailableMB";
  String specificPropertyInfoId="yarn.QueueMetrics.Queue=specificQueue1.specificQueue2.AvailableMB";
  Map<String,PropertyInfo> componentMetricMap=provider.getComponentMetrics().get("RESOURCEMANAGER");
  Assert.assertNull(resourceManagerMetrics.get(specificMetric));
  provider.updateComponentMetricMap(componentMetricMap,specificMetric);
  Assert.assertEquals(metricsBefore + 1,resourceManagerMetrics.size());
  Assert.assertNotNull(resourceManagerMetrics.get(specificMetric));
  Assert.assertEquals(specificPropertyInfoId,resourceManagerMetrics.get(specificMetric).getPropertyId());
}
