{
  TopologyRequestEntity requestEntity=new TopologyRequestEntity();
  requestEntity.setAction("a1");
  requestEntity.setBlueprintName("bp1");
  requestEntity.setClusterAttributes("attributes");
  requestEntity.setClusterProperties("properties");
  requestEntity.setClusterName(CLUSTER_NAME);
  requestEntity.setDescription("description");
  requestDAO.create(requestEntity);
  List<TopologyRequestEntity> requestEntities=requestDAO.findAll();
  Assert.assertEquals(1,requestEntities.size());
  requestEntity=requestEntities.iterator().next();
  TopologyHostGroupEntity hostGroupEntity=new TopologyHostGroupEntity();
  hostGroupEntity.setName("hg1");
  hostGroupEntity.setGroupProperties("test");
  hostGroupEntity.setGroupAttributes("test");
  hostGroupEntity.setTopologyRequestEntity(requestEntity);
  TopologyHostInfoEntity hostInfoEntity=new TopologyHostInfoEntity();
  hostInfoEntity.setHostCount(1);
  hostInfoEntity.setPredicate("test");
  hostInfoEntity.setFqdn("fqdn");
  hostInfoEntity.setTopologyHostGroupEntity(hostGroupEntity);
  hostGroupDAO.create(hostGroupEntity);
  List<TopologyHostGroupEntity> hostGroupEntities=hostGroupDAO.findAll();
  Assert.assertEquals(1,hostGroupEntities.size());
  hostGroupEntity=hostGroupEntities.iterator().next();
  TopologyLogicalRequestEntity logicalRequestEntity=new TopologyLogicalRequestEntity();
  logicalRequestEntity.setDescription("description");
  logicalRequestEntity.setTopologyRequestEntity(requestEntity);
  logicalRequestEntity.setTopologyRequestId(requestEntity.getId());
  TopologyHostRequestEntity hostRequestEntity=new TopologyHostRequestEntity();
  hostRequestEntity.setHostName("h1");
  hostRequestEntity.setStageId(1L);
  hostRequestEntity.setTopologyLogicalRequestEntity(logicalRequestEntity);
  hostRequestEntity.setTopologyHostGroupEntity(hostGroupEntity);
  TopologyHostTaskEntity hostTaskEntity=new TopologyHostTaskEntity();
  hostTaskEntity.setType("type");
  hostTaskEntity.setTopologyHostRequestEntity(hostRequestEntity);
  TopologyLogicalTaskEntity logicalTaskEntity=new TopologyLogicalTaskEntity();
  logicalTaskEntity.setComponentName("NAMENODE");
  logicalTaskEntity.setHostRoleCommandEntity(null);
  logicalTaskEntity.setTopologyHostTaskEntity(hostTaskEntity);
  hostGroupEntity.setTopologyHostRequestEntities(Collections.singletonList(hostRequestEntity));
  hostRequestEntity.setTopologyHostTaskEntities(Collections.singletonList(hostTaskEntity));
  hostRequestEntity.setTopologyHostGroupEntity(hostGroupEntity);
  hostTaskEntity.setTopologyLogicalTaskEntities(Collections.singletonList(logicalTaskEntity));
  logicalRequestEntity.setTopologyHostRequestEntities(Collections.singletonList(hostRequestEntity));
  logicalRequestDAO.create(logicalRequestEntity);
}
