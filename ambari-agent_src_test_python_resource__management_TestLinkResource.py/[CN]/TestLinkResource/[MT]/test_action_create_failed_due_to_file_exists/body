@patch.object(os.path, 'realpath')
@patch.object(os.path, 'lexists')
@patch.object(os.path, 'islink')
def test_action_create_failed_due_to_file_exists(self, islink_mock, lexists_mock, realmock):
    lexists_mock.return_value = True
    realmock.return_value = '/old_to_link_path'
    islink_mock.return_value = False
    with Environment('/') as env:
        try:
            Link('/some_path', to='/a/b/link_to_path')
            self.fail('Must fail when directory or file with name /some_path exist')
        except Fail as e:
            self.assertEqual("LinkProvider[Link['/some_path']] trying to create a symlink with the same name as an existing file or directory", str(e))
