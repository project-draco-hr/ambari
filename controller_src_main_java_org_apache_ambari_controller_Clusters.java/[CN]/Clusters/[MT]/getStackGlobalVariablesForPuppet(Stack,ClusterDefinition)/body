{
  String config="\n";
  config=config + "$ambari_cluster_name" + " = "+ "\""+ c.getName()+ "\"\n";
  config=config + "\n";
  HashMap<String,String> roles=new HashMap<String,String>();
  for (  RoleToNodes rns : c.getRoleToNodesMap()) {
    config=config + "$ambari_" + rns.getRoleName()+ "_host"+ " = "+ "\"";
    roles.put(rns.getRoleName(),null);
    List<String> host_list=this.getHostnamesFromRangeExpressions(rns.getNodes());
    if (host_list != null && host_list.get(0) != null) {
      config=config + host_list.get(0);
    }
    config=config + "\"\n";
  }
  for (  Component comp : stack.getComponents()) {
    for (    Role r : comp.getRoles()) {
      if (!roles.containsKey(r.getName())) {
        config=config + "$ambari_" + r.getName()+ "_host"+ " = "+ "\"\"\n";
      }
    }
  }
  config=config + "\n";
  HashMap<String,UserGroup> users=new HashMap<String,UserGroup>();
  HashMap<String,UserGroup> groups=new HashMap<String,UserGroup>();
  UserGroup dg=stack.getDefault_user_group();
  users.put(dg.getUser(),dg);
  groups.put(dg.getGroup(),dg);
  config=config + "\n$unique_users = { ";
  config=config + dg.getUser() + " => { \"UID\" => \""+ dg.getUserid()+ "\", \"GROUP\" => \""+ dg.getGroup()+ "\" }, \n";
  for (  Component comp : stack.getComponents()) {
    if (comp.getUser_group() != null) {
      UserGroup ug=comp.getUser_group();
      if (!users.containsKey(ug.getUser())) {
        users.put(ug.getUser(),ug);
        config=config + ug.getUser() + " => { \"UID\" => \""+ ug.getUserid()+ "\", \"GROUP\" => \""+ ug.getGroup()+ "\" }, \n";
      }
    }
  }
  config=config + "}\n";
  config=config + "\n$unique_groups = { ";
  config=config + dg.getGroup() + " => { \"GID\" => \""+ dg.getGroupid()+ "\" }, \n";
  for (  Component comp : stack.getComponents()) {
    if (comp.getUser_group() != null) {
      UserGroup ug=comp.getUser_group();
      if (!groups.containsKey(ug.getGroup())) {
        groups.put(ug.getGroup(),ug);
        config=config + ug.getGroup() + " => { \"GID\" => \""+ ug.getGroupid()+ "\" }, \n";
      }
    }
  }
  config=config + "}\n";
  config=config + "$ambari_default_user" + " = "+ "\""+ stack.getDefault_user_group().getUser()+ "\"\n";
  config=config + "$ambari_default_group" + " = "+ "\""+ stack.getDefault_user_group().getGroup()+ "\"\n";
  for (  Component comp : stack.getComponents()) {
    UserGroup ug=null;
    if (comp.getUser_group() != null) {
      ug=comp.getUser_group();
      config=config + "$ambari_" + comp.getName()+ "_user"+ " = "+ "\""+ ug.getUser()+ "\"\n";
      config=config + "$ambari_" + comp.getName()+ "_group"+ " = "+ "\""+ ug.getGroup()+ "\"\n";
    }
  }
  config=config + "\n";
  for (  KeyValuePair p : stack.getGlobals()) {
    config=config + "$" + p.getName()+ " = "+ "\""+ p.getValue()+ "\"\n";
  }
  config=config + "\n";
  return config;
}
