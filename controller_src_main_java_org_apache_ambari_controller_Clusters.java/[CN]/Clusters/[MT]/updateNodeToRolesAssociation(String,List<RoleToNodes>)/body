{
  if (roleToNodesList == null) {
    return;
  }
  for (  RoleToNodes e : roleToNodesList) {
    List<String> hosts=getHostnamesFromRangeExpressions(e.getNodes());
    for (    String host : hosts) {
      NodeRole ns=new NodeRole(e.getRoleName(),NodeRole.NODE_SERVER_STATE_DOWN,Util.getXMLGregorianCalendar(new Date()));
      nodes.getNodes().get(host).getNodeState().updateRoleState(ns);
    }
  }
  List<String> specified_node_range=new ArrayList<String>();
  specified_node_range.addAll(getHostnamesFromRangeExpressions(clusterNodes));
  for (  String host : specified_node_range) {
    if (nodes.getNodes().get(host).getNodeState().getNodeRoles() == null) {
      String cid=nodes.getNodes().get(host).getNodeState().getClusterName();
      NodeRole ns=new NodeRole(getDefaultRoleName(cid),NodeRole.NODE_SERVER_STATE_DOWN,Util.getXMLGregorianCalendar(new Date()));
      nodes.getNodes().get(host).getNodeState().updateRoleState(ns);
    }
  }
}
