{
switch (getRequestType()) {
case POST:
case QUERY_POST:
    return new CreatePersistenceManager();
case PUT:
  return new UpdatePersistenceManager();
case DELETE:
return new DeletePersistenceManager();
case GET:
throw new IllegalStateException("Tried to get persistence manager for get operation");
default :
throw new IllegalStateException("Tried to get persistence manager for unknown operation type");
}
}
