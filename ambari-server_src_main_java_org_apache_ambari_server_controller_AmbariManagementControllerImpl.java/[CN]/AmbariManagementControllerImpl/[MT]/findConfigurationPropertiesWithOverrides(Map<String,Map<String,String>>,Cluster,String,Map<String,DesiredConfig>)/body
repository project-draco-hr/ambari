{
  ConfigHelper ch=injector.getInstance(ConfigHelper.class);
  Map<String,Map<String,String>> configTags=ch.getEffectiveDesiredTags(cluster,serviceName,desiredConfigMap);
  Service service=cluster.getService(serviceName);
  for (  Config c : service.getDesiredConfigs().values()) {
    String type=c.getType();
    if (!configurations.containsKey(type)) {
      configurations.put(type,new HashMap<String,String>(c.getProperties()));
      HashMap<String,String> tags=new HashMap<String,String>();
      tags.put(CLUSTER_LEVEL_TAG,c.getVersionTag());
      configTags.put(type,tags);
    }
  }
  return configTags;
}
