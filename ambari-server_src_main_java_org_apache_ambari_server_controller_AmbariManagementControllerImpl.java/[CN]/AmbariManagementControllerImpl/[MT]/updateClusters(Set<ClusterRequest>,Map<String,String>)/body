{
  RequestStatusResponse response=null;
  for (  ClusterRequest request : requests) {
    Cluster cluster;
    if (request.getClusterId() == null) {
      cluster=clusters.getCluster(request.getClusterName());
    }
 else {
      cluster=clusters.getClusterById(request.getClusterId());
    }
    if (cluster == null) {
      throw new AmbariException("The cluster may not be null");
    }
    cluster.addSessionAttributes(request.getSessionAttributes());
    response=updateCluster(request);
  }
  return response;
}
