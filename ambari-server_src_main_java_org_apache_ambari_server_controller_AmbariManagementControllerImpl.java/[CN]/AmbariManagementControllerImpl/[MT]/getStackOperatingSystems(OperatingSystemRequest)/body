{
  Set<OperatingSystemResponse> response;
  String stackName=request.getStackName();
  String stackVersion=request.getStackVersion();
  String osType=request.getOsType();
  if (osType != null) {
    OperatingSystemInfo operatingSystem=ambariMetaInfo.getOperatingSystem(stackName,stackVersion,osType);
    response=Collections.singleton(operatingSystem.convertToResponse());
  }
 else {
    Set<OperatingSystemInfo> operatingSystems=ambariMetaInfo.getOperatingSystems(stackName,stackVersion);
    response=new HashSet<OperatingSystemResponse>();
    for (    OperatingSystemInfo operatingSystem : operatingSystems) {
      response.add(operatingSystem.convertToResponse());
    }
  }
  return response;
}
