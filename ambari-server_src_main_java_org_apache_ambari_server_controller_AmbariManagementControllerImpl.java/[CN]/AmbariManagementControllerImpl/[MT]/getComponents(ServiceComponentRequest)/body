{
  if (request.getClusterName() == null || request.getClusterName().isEmpty() || request.getServiceName() == null || request.getServiceName().isEmpty()) {
    throw new AmbariException("Invalid arguments");
  }
  final Cluster cluster=clusters.getCluster(request.getClusterName());
  final Service s=cluster.getService(request.getServiceName());
  Set<ServiceComponentResponse> response=new HashSet<ServiceComponentResponse>();
  if (request.getComponentName() != null) {
    ServiceComponent sc=s.getServiceComponent(request.getComponentName());
    response.add(sc.convertToResponse());
    return response;
  }
  Map<String,ServiceComponent> allSvcComps=s.getServiceComponents();
  for (  ServiceComponent sc : allSvcComps.values()) {
    response.add(sc.convertToResponse());
  }
  return response;
}
