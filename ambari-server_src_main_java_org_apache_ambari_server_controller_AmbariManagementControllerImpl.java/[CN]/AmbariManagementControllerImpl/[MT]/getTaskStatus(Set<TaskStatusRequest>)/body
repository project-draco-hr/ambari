{
  Collection<Long> requestIds=new ArrayList<Long>();
  Collection<Long> taskIds=new ArrayList<Long>();
  for (  TaskStatusRequest request : requests) {
    if (request.getTaskId() != null) {
      taskIds.add(request.getTaskId());
    }
 else {
      requestIds.add(request.getRequestId());
    }
  }
  Set<TaskStatusResponse> responses=new HashSet<TaskStatusResponse>();
  for (  HostRoleCommand command : actionManager.getTasksByRequestAndTaskIds(requestIds,taskIds)) {
    responses.add(new TaskStatusResponse(command));
  }
  return responses;
}
