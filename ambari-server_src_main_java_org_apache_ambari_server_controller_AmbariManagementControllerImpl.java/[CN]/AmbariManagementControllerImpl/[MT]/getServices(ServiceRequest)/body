{
  if (request.getClusterName() == null || request.getClusterName().isEmpty()) {
    throw new AmbariException("Invalid arguments");
  }
  final Cluster cluster=clusters.getCluster(request.getClusterName());
  Set<ServiceResponse> response=new HashSet<ServiceResponse>();
  if (request.getServiceName() != null) {
    Service s=cluster.getService(request.getServiceName());
    response.add(s.convertToResponse());
    return response;
  }
  Map<String,Service> allServices=cluster.getServices();
  for (  Service s : allServices.values()) {
    response.add(s.convertToResponse());
  }
  return response;
}
