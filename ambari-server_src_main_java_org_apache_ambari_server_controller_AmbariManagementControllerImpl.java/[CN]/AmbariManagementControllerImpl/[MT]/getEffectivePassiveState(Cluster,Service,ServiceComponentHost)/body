{
  Map<String,Host> map=clusters.getHostsForCluster(cluster.getClusterName());
  if (null == map)   return PassiveState.ACTIVE;
  Host host=clusters.getHostsForCluster(cluster.getClusterName()).get(sch.getHostName());
  if (null == host)   throw new HostNotFoundException(cluster.getClusterName(),sch.getHostName());
  if (PassiveState.PASSIVE == sch.getPassiveState())   return PassiveState.PASSIVE;
  if (PassiveState.ACTIVE != service.getPassiveState() || PassiveState.ACTIVE != host.getPassiveState(cluster.getClusterId()))   return PassiveState.IMPLIED;
  return sch.getPassiveState();
}
