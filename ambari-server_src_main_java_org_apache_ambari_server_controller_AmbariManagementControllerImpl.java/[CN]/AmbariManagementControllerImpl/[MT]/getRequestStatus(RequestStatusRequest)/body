{
  Set<RequestStatusResponse> response=new HashSet<RequestStatusResponse>();
  if (request.getRequestId() == null) {
    RequestStatus requestStatus=RequestStatus.IN_PROGRESS;
    if (request.getRequestStatus() != null) {
      requestStatus=RequestStatus.valueOf(request.getRequestStatus());
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("Received a Get Request Status request" + ", requestId=null" + ", requestStatus="+ requestStatus);
    }
    List<Long> requestIds=actionManager.getRequestsByStatus(requestStatus);
    for (    Long requestId : requestIds) {
      response.add(getRequestStatusResponse(requestId.longValue()));
    }
  }
 else {
    RequestStatusResponse requestStatusResponse=getRequestStatusResponse(request.getRequestId().longValue());
    if (requestStatusResponse.getTasks().size() == 0) {
      throw new ObjectNotFoundException("Request resource doesn't exist.");
    }
 else {
      response.add(requestStatusResponse);
    }
  }
  return response;
}
