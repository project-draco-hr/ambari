{
  if (currentDesiredState == State.STARTED) {
    throw new AmbariException("Changing of configs not supported" + " in STARTED state" + ", clusterName=" + service.getCluster().getClusterName() + ", serviceName="+ service.getName()+ ", currentDesiredState="+ currentDesiredState+ ", newDesiredState="+ newDesiredState);
  }
  if (newDesiredState != null) {
    if (!(newDesiredState == State.INIT || newDesiredState == State.INSTALLED || newDesiredState == State.STARTED)) {
      throw new AmbariException("Changing of configs not supported" + " for this transition" + ", clusterName=" + service.getCluster().getClusterName() + ", serviceName="+ service.getName()+ ", currentDesiredState="+ currentDesiredState+ ", newDesiredState="+ newDesiredState);
    }
  }
  for (  ServiceComponent component : service.getServiceComponents().values()) {
    safeToUpdateConfigsForServiceComponent(component,component.getDesiredState(),newDesiredState);
  }
}
