{
  String stackName=request.getStackName();
  String stackVersion=request.getStackVersion();
  String osType=request.getOsType();
  String repoId=request.getRepoId();
  Set<RepositoryResponse> response;
  if (repoId == null) {
    List<RepositoryInfo> repositories=this.ambariMetaInfo.getRepositories(stackName,stackVersion,osType);
    response=new HashSet<RepositoryResponse>();
    for (    RepositoryInfo repository : repositories) {
      response.add(repository.convertToResponse());
    }
  }
 else {
    RepositoryInfo repository=this.ambariMetaInfo.getRepository(stackName,stackVersion,osType,repoId);
    response=Collections.singleton(repository.convertToResponse());
  }
  return response;
}
