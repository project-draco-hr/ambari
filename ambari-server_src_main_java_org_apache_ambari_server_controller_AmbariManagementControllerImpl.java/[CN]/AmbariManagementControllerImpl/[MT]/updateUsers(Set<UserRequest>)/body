{
  for (  UserRequest request : requests) {
    User u=users.getAnyUser(request.getUsername());
    if (null == u) {
      continue;
    }
    if (null != request.getOldPassword() && null != request.getPassword()) {
      users.modifyPassword(u.getUserName(),request.getOldPassword(),request.getPassword());
    }
    if (null != request.isActive()) {
      verifyAuthorization();
      users.setUserActive(u.getUserName(),request.isActive());
    }
    if (null != request.isAdmin()) {
      verifyAuthorization();
      if (request.isAdmin()) {
        users.grantAdminPrivilege(u.getUserId());
      }
 else {
        users.revokeAdminPrivilege(u.getUserId());
      }
    }
  }
}
