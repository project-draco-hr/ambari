{
  for (  UserRequest request : requests) {
    User u=users.getAnyUser(request.getUsername());
    if (null == u)     continue;
    if (null != request.getOldPassword() && null != request.getPassword()) {
      users.modifyPassword(u.getUserName(),request.getOldPassword(),request.getPassword());
    }
    if (request.getRoles().size() > 0) {
      for (      String role : u.getRoles()) {
        users.removeRoleFromUser(u,role);
      }
      for (      String role : request.getRoles()) {
        users.addRoleToUser(u,role);
      }
    }
  }
}
