{
  Result result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.OK));
  try {
    Set<RequestBody> requestBodySet=getBodyParser().parse(body);
    Iterator<RequestBody> iterator=requestBodySet.iterator();
    while (iterator.hasNext() && result.getStatus().getStatus().equals(ResultStatus.STATUS.OK)) {
      RequestBody requestBody=iterator.next();
      Request request=getRequestFactory().createRequest(headers,requestBody,uriInfo,requestType,resource);
      result=request.process();
    }
  }
 catch (  BodyParseException e) {
    result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.BAD_REQUEST,e.getMessage()));
  }
  ResultSerializer serializer=mediaType == null ? getResultSerializer() : getResultSerializer(mediaType);
  Response.ResponseBuilder builder=Response.status(result.getStatus().getStatusCode()).entity(serializer.serialize(result));
  if (mediaType != null) {
    builder.type(mediaType);
  }
  return builder.build();
}
