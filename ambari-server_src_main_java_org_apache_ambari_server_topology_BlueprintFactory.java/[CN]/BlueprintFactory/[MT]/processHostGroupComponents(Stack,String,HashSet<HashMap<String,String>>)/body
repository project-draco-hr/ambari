{
  if (componentProps == null || componentProps.isEmpty()) {
    throw new IllegalArgumentException("Host group '" + groupName + "' must contain at least one component");
  }
  Collection<String> stackComponentNames=getAllStackComponents(stack);
  Collection<String> components=new ArrayList<String>();
  for (  HashMap<String,String> componentProperties : componentProps) {
    String componentName=componentProperties.get(COMPONENT_NAME_PROPERTY_ID);
    if (componentName == null || componentName.isEmpty()) {
      throw new IllegalArgumentException("Host group '" + groupName + "' contains a component with no 'name' property");
    }
    if (!stackComponentNames.contains(componentName)) {
      throw new IllegalArgumentException("The component '" + componentName + "' in host group '"+ groupName+ "' is not valid for the specified stack");
    }
    components.add(componentName);
  }
  return components;
}
