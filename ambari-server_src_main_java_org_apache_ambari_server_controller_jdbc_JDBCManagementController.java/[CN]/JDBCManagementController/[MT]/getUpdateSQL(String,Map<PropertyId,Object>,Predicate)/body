{
  if (predicate instanceof BasePredicate) {
    StringBuilder whereClause=new StringBuilder();
    BasePredicate basePredicate=(BasePredicate)predicate;
    SQLPredicateVisitor visitor=new SQLPredicateVisitor();
    basePredicate.accept(visitor);
    whereClause.append(visitor.getSQL());
    StringBuilder setClause=new StringBuilder();
    for (    Map.Entry<PropertyId,Object> entry : properties.entrySet()) {
      if (setClause.length() > 0) {
        setClause.append(", ");
      }
      setClause.append(entry.getKey().getName());
      setClause.append(" = ");
      Object propertyValue=entry.getValue();
      if (propertyValue instanceof String) {
        setClause.append("'");
        setClause.append(propertyValue);
        setClause.append("'");
      }
 else {
        setClause.append(propertyValue);
      }
    }
    return "update " + table + " set "+ setClause+ " where "+ whereClause;
  }
  throw new IllegalStateException("Can't generate SQL.");
}
