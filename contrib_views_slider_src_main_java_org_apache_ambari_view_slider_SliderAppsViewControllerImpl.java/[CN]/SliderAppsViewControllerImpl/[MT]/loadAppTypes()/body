{
  List<SliderAppType> appTypes=null;
  String appsFolderPath=getAppsFolderPath();
  File appsFolder=new File(appsFolderPath);
  if (appsFolder.exists()) {
    File[] appZips=appsFolder.listFiles((FilenameFilter)new RegexFileFilter("^.*\\.zip$"));
    if (appZips != null) {
      appTypes=new ArrayList<SliderAppType>();
      for (      File appZip : appZips) {
        try {
          ZipFile zipFile=new ZipFile(appZip);
          Metainfo metainfo=new MetainfoParser().parse(zipFile.getInputStream(zipFile.getEntry("metainfo.xml")));
          if (metainfo.getApplication() != null) {
            Application application=metainfo.getApplication();
            ZipEntry appConfigZipEntry=zipFile.getEntry("appConfig-default.json");
            if (appConfigZipEntry == null) {
              throw new IllegalStateException("Slider App package '" + appZip.getName() + "' does not contain 'appConfig-default.json' file");
            }
            ZipEntry resourcesZipEntry=zipFile.getEntry("resources-default.json");
            if (resourcesZipEntry == null) {
              throw new IllegalStateException("Slider App package '" + appZip.getName() + "' does not contain 'resources-default.json' file");
            }
            String appConfigJsonString=IOUtils.toString(zipFile.getInputStream(appConfigZipEntry),"UTF-8");
            String resourcesJsonString=IOUtils.toString(zipFile.getInputStream(resourcesZipEntry),"UTF-8");
            JsonElement appConfigJson=new JsonParser().parse(appConfigJsonString);
            JsonElement resourcesJson=new JsonParser().parse(resourcesJsonString);
            SliderAppType appType=new SliderAppType();
            appType.setId(application.getName());
            appType.setTypeName(application.getName());
            appType.setTypeDescription(application.getComment());
            appType.setTypeVersion(application.getVersion());
            appType.setTypePackageFileName(appZip.getName());
            Map<String,String> configsMap=new HashMap<String,String>();
            JsonObject appTypeGlobalJson=appConfigJson.getAsJsonObject().get("global").getAsJsonObject();
            for (            Entry<String,JsonElement> e : appTypeGlobalJson.entrySet()) {
              String key=e.getKey();
              String valueString=e.getValue().getAsString();
              if ("application.def".equals(key)) {
                valueString=String.format(".slider/package/%s/%s",application.getName(),appZip.getName());
              }
              configsMap.put(key,valueString);
            }
            appType.setTypeConfigs(configsMap);
            ArrayList<SliderAppTypeComponent> appTypeComponentList=new ArrayList<SliderAppTypeComponent>();
            for (            Component component : application.getComponents()) {
              if ("CLIENT".equals(component.getCategory())) {
                continue;
              }
              SliderAppTypeComponent appTypeComponent=new SliderAppTypeComponent();
              appTypeComponent.setDisplayName(component.getName());
              appTypeComponent.setId(component.getName());
              appTypeComponent.setName(component.getName());
              appTypeComponent.setYarnMemory(1024);
              appTypeComponent.setYarnCpuCores(1);
              appTypeComponent.setInstanceCount(1);
              if (component.getMinInstanceCount() != null) {
                appTypeComponent.setInstanceCount(Integer.parseInt(component.getMinInstanceCount()));
              }
              if (component.getMaxInstanceCount() != null) {
                appTypeComponent.setMaxInstanceCount(Integer.parseInt(component.getMaxInstanceCount()));
              }
              if (resourcesJson != null) {
                JsonElement componentJson=resourcesJson.getAsJsonObject().get("components").getAsJsonObject().get(component.getName());
                if (componentJson != null && componentJson.isJsonObject()) {
                  JsonObject componentObj=componentJson.getAsJsonObject();
                  if (componentObj.has("yarn.role.priority")) {
                    appTypeComponent.setPriority(Integer.parseInt(componentObj.get("yarn.role.priority").getAsString()));
                  }
                  if (componentObj.has("yarn.memory")) {
                    appTypeComponent.setYarnMemory(Integer.parseInt(componentObj.get("yarn.memory").getAsString()));
                  }
                }
              }
              appTypeComponent.setCategory(component.getCategory());
              appTypeComponentList.add(appTypeComponent);
            }
            MetricsHolder metricsHolder=new MetricsHolder();
            metricsHolder.setJmxMetrics(readMetrics(zipFile,"jmx_metrics.json"));
            metricsHolder.setGangliaMetrics(readMetrics(zipFile,"ganglia_metrics.json"));
            appType.setSupportedMetrics(getSupportedMetrics(metricsHolder.getGangliaMetrics()));
            appMetrics.put(appType.uniqueName(),metricsHolder);
            appType.setTypeComponents(appTypeComponentList);
            appTypes.add(appType);
          }
        }
 catch (        ZipException e) {
          logger.warn("Unable to parse Slider App package " + appZip.getAbsolutePath(),e);
        }
catch (        IOException e) {
          logger.warn("Unable to parse Slider App package " + appZip.getAbsolutePath(),e);
        }
catch (        Throwable e) {
          logger.warn("Unable to parse Slider App package " + appZip.getAbsolutePath(),e);
        }
      }
    }
  }
  return appTypes;
}
