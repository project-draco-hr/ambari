{
  Client client=Client.create();
  this.ambariClient=client;
  String pattern;
  String url;
  if (configuration.getApiSSLAuthentication()) {
    pattern="https://localhost:%s/";
    url=String.format(pattern,configuration.getClientSSLApiPort());
  }
 else {
    pattern="http://localhost:%s/";
    url=String.format(pattern,configuration.getClientApiPort());
  }
  this.ambariWebResource=client.resource(url);
  ClientFilter csrfFilter=new CsrfProtectionFilter("RequestSchedule");
  ClientFilter tokenFilter=new InternalTokenClientFilter(tokenStorage);
  ambariClient.addFilter(csrfFilter);
  ambariClient.addFilter(tokenFilter);
}
