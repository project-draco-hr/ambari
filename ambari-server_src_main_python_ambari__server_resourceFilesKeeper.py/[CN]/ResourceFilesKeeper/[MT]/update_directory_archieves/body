def update_directory_archieves(self):
    '\n    Please see AMBARI-4481 for more details\n    '
    stacks_root = os.path.join(self.resources_dir, self.STACKS_DIR)
    self.dbg_out('Updating archives for stack dirs at {0}...'.format(stacks_root))
    active_stacks = self.list_active_stacks(stacks_root)
    self.dbg_out('Active stacks: {0}'.format(pprint.pformat(active_stacks)))
    for stack_dir in active_stacks:
        for (root, dirs, _) in os.walk(stack_dir):
            for d in dirs:
                if (d in self.ARCHIVABLE_DIRS):
                    full_path = os.path.abspath(os.path.join(root, d))
                    self.update_directory_archive(full_path)
    custom_actions_root = os.path.join(self.resources_dir, self.CUSTOM_ACTIONS_DIR)
    self.dbg_out('Updating archive for custom_actions dir at {0}...'.format(custom_actions_root))
    self.update_directory_archive(custom_actions_root)
