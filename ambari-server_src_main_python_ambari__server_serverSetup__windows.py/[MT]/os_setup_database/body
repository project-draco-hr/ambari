def os_setup_database(options):
    properties = get_ambari_properties()
    if (properties == (-1)):
        raise FatalException((-1), 'Error getting ambari properties')
    options.default_database_host = 'localhost\\SQLEXPRESS'
    dbmsAmbari = DBMSConfig.create(options, properties, 'Ambari')
    resultA = dbmsAmbari.configure_database(options, properties)
    options.default_database_host = dbmsAmbari.database_host
    dbmsMetrics = DBMSConfig.create(options, properties, 'Metrics')
    resultM = dbmsMetrics.configure_database(options, properties)
    if (resultA or resultM):
        update_properties(properties)
        dbmsAmbari.setup_database()
        dbmsMetrics.setup_database()
