{
  CredentialProvider cr;
  File msFile=tmpFolder.newFile(Configuration.MASTER_KEY_FILENAME_DEFAULT);
  try {
    new CredentialProvider(null,null,true);
    Assert.fail("Expected an exception");
  }
 catch (  Throwable t) {
    Assert.assertTrue(t instanceof IllegalArgumentException);
  }
  cr=new CredentialProvider("blahblah!",msFile.getAbsolutePath(),false);
  Assert.assertNotNull(cr);
  Assert.assertNotNull(cr.getKeystoreService());
  msFile.delete();
  createMasterKey();
  cr=new CredentialProvider(null,msFile.getAbsolutePath(),true);
  Assert.assertNotNull(cr);
  Assert.assertNotNull(cr.getKeystoreService());
}
