{
  CredentialProvider cr=null;
  String msFile=keystore_dir + System.getProperty("file" + ".separator") + Configuration.MASTER_KEY_FILENAME_DEFAULT;
  try {
    new CredentialProvider(null,null,true);
    fail("Expected an exception");
  }
 catch (  Throwable t) {
    Assert.assertTrue(t instanceof IllegalArgumentException);
  }
  try {
    new CredentialProvider(null,msFile,true);
    fail("Expected an exception");
  }
 catch (  Throwable t) {
    Assert.assertTrue(t instanceof AmbariException);
  }
  cr=new CredentialProvider("blahblah!",msFile,false);
  Assert.assertNotNull(cr);
  Assert.assertNotNull(cr.getKeystoreService());
  createMasterKey(keystore_dir);
  cr=new CredentialProvider(null,msFile,true);
  Assert.assertNotNull(cr);
  Assert.assertNotNull(cr.getKeystoreService());
}
