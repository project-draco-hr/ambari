{
  String msFile=keystore_dir + System.getProperty("file" + ".separator") + Configuration.MASTER_KEY_FILENAME_DEFAULT;
  createMasterKey(keystore_dir);
  CredentialProvider cr=new CredentialProvider(null,msFile,true);
  Assert.assertNotNull(cr);
  Assert.assertNotNull(cr.getKeystoreService());
  try {
    cr.addAliasToCredentialStore("","xyz");
    fail("Expected an exception");
  }
 catch (  Throwable t) {
    Assert.assertTrue(t instanceof IllegalArgumentException);
  }
  try {
    cr.addAliasToCredentialStore("xyz",null);
    fail("Expected an exception");
  }
 catch (  Throwable t) {
    Assert.assertTrue(t instanceof IllegalArgumentException);
  }
  cr.addAliasToCredentialStore("myalias","mypassword");
  Assert.assertEquals("mypassword",new String(cr.getPasswordForAlias("myalias")));
}
