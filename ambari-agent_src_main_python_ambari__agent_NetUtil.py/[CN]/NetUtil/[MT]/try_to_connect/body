def try_to_connect(self, server_url, max_retries, logger=None):
    'Try to connect to a given url, sleeping for CONNECT_SERVER_RETRY_INTERVAL_SEC seconds\n    between retries. No more than max_retries is performed. If max_retries is -1, connection\n    attempts will be repeated forever until server is not reachable\n    Returns count of retries\n    '
    retries = 0
    while (((max_retries == (-1)) or (retries < max_retries)) and (not self.DEBUG_STOP_RETRIES_FLAG)):
        server_is_up = self.checkURL(self.SERVER_STATUS_REQUEST.format(server_url))
        if server_is_up:
            break
        else:
            if (logger is not None):
                logger.info('Server at {0} is not reachable, sleeping for {1} seconds...'.format(server_url, self.CONNECT_SERVER_RETRY_INTERVAL_SEC))
            retries += 1
            time.sleep(self.CONNECT_SERVER_RETRY_INTERVAL_SEC)
    return retries
