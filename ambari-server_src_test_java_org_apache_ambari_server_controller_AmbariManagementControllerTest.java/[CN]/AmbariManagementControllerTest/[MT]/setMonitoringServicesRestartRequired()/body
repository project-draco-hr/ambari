{
  String clusterName="c1";
  createCluster(clusterName);
  Cluster cluster=clusters.getCluster(clusterName);
  StackId stackId=new StackId("HDP-2.0.8");
  cluster.setDesiredStackVersion(stackId);
  cluster.setCurrentStackVersion(stackId);
  String hdfsService="HDFS";
  String fakeMonitoringService="FAKENAGIOS";
  createService(clusterName,hdfsService,null);
  createService(clusterName,fakeMonitoringService,null);
  String namenode="NAMENODE";
  String datanode="DATANODE";
  String hdfsClient="HDFS_CLIENT";
  String fakeServer="FAKE_MONITORING_SERVER";
  createServiceComponent(clusterName,hdfsService,namenode,State.INIT);
  createServiceComponent(clusterName,hdfsService,datanode,State.INIT);
  createServiceComponent(clusterName,fakeMonitoringService,fakeServer,State.INIT);
  String host1="h1";
  addHost(host1,clusterName);
  createServiceComponentHost(clusterName,hdfsService,namenode,host1,null);
  createServiceComponentHost(clusterName,hdfsService,datanode,host1,null);
  createServiceComponentHost(clusterName,fakeMonitoringService,fakeServer,host1,null);
  ServiceComponentHost nagiosSch=null;
  for (  ServiceComponentHost sch : cluster.getServiceComponentHosts(host1)) {
    if (sch.getServiceComponentName().equals(fakeServer)) {
      nagiosSch=sch;
    }
  }
  assertFalse(nagiosSch.isRestartRequired());
  createServiceComponent(clusterName,hdfsService,hdfsClient,State.INIT);
  createServiceComponentHost(clusterName,hdfsService,hdfsClient,host1,null);
  assertTrue(nagiosSch.isRestartRequired());
}
