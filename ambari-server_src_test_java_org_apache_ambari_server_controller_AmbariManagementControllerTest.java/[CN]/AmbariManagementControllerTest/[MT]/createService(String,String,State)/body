{
  String dStateStr=null;
  if (desiredState != null) {
    dStateStr=desiredState.toString();
  }
  ServiceRequest r1=new ServiceRequest(clusterName,serviceName,null,dStateStr);
  ServiceRequest r2=new ServiceRequest(clusterName,serviceName,null,dStateStr);
  Set<ServiceRequest> requests=new HashSet<ServiceRequest>();
  requests.add(r1);
  requests.add(r2);
  try {
    controller.createServices(requests);
    fail("Expected error for duplicates");
  }
 catch (  Exception e) {
  }
  requests.clear();
  requests.add(r1);
  controller.createServices(requests);
  try {
    controller.createServices(requests);
    fail("Duplicate Service creation should fail");
  }
 catch (  Exception e) {
  }
}
