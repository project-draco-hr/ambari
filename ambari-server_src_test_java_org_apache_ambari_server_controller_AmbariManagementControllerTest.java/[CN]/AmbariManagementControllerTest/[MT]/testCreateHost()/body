{
  List<String> clusterNames=null;
  Map<String,String> hostAttributes=null;
  HostRequest r1=new HostRequest("h1",clusterNames,hostAttributes);
  r1.toString();
  try {
    controller.createHost(r1);
    fail("Create host should fail for non-bootstrapped host");
  }
 catch (  Exception e) {
  }
  clusters.addHost("h1");
  clusters.addHost("h2");
  controller.createHost(r1);
  clusterNames=new ArrayList<String>();
  clusterNames.add("foo1");
  clusterNames.add("foo2");
  hostAttributes=new HashMap<String,String>();
  HostRequest r2=new HostRequest("h2",clusterNames,hostAttributes);
  try {
    controller.createHost(r2);
    fail("Create host should fail for invalid clusters");
  }
 catch (  Exception e) {
  }
  clusters.addCluster("foo1");
  clusters.addCluster("foo2");
  controller.createHost(r2);
  Assert.assertNotNull(clusters.getHost("h1"));
  Assert.assertNotNull(clusters.getHost("h2"));
  Assert.assertEquals(0,clusters.getClustersForHost("h1").size());
  Assert.assertEquals(2,clusters.getClustersForHost("h2").size());
}
