{
  testCreateServiceComponentHost();
  String clusterName="foo1";
  String serviceName="HDFS";
  ServiceRequest r1=new ServiceRequest(clusterName,serviceName,null,State.INSTALLED.toString());
  controller.updateService(r1);
  List<Stage> stages=db.getAllStages(1);
  Assert.assertEquals(2,stages.size());
  for (  Stage stage : stages) {
    LOG.info("Stage Details for Install Service" + ", stageId=" + stage.getStageId() + ", actionId="+ stage.getActionId());
    for (    String host : stage.getHosts()) {
      LOG.info("Dumping host action details" + ", stageId=" + stage.getStageId() + ", actionId="+ stage.getActionId()+ ", commandDetails="+ StageUtils.jaxbToString(stage.getExecutionCommand(host)));
    }
  }
  ServiceRequest r2=new ServiceRequest(clusterName,serviceName,null,State.STARTED.toString());
  controller.updateService(r2);
  stages=db.getAllStages(2);
  Assert.assertEquals(2,stages.size());
  for (  Stage stage : stages) {
    LOG.info("Stage Details for Start Service" + ", stageId=" + stage.getStageId() + ", actionId="+ stage.getActionId());
    for (    String host : stage.getHosts()) {
      LOG.info("Dumping host action details" + ", stageId=" + stage.getStageId() + ", actionId="+ stage.getActionId()+ ", commandDetails="+ StageUtils.jaxbToString(stage.getExecutionCommand(host)));
    }
  }
}
