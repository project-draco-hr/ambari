{
  LogType logType=LogType.SERVICE;
  SolrQuery solrQuery=new SolrQuery();
  String globalExcludeComp=(String)searchCriteria.getParamValue("gMustNot");
  String unselectedComp=(String)searchCriteria.getParamValue("unselectComp");
  String givenQuery=(String)searchCriteria.getParamValue("q");
  String level=searchCriteria.getLevel();
  String startTime=searchCriteria.getFrom();
  String endTime=searchCriteria.getTo();
  String iMessage=searchCriteria.getIncludeMessage();
  String eMessage=searchCriteria.getExcludeMessage();
  String selectedComp=searchCriteria.getSelectComp();
  String bundleId=searchCriteria.getBundleId();
  String urlHostName=searchCriteria.getHostName();
  String urlComponentName=searchCriteria.getComponentName();
  String file_name=searchCriteria.getFileName();
  SolrUtil.setMainQuery(solrQuery,givenQuery);
  setSingleRangeFilter(solrQuery,LogSearchConstants.LOGTIME,startTime,endTime);
  addFilter(solrQuery,selectedComp,LogSearchConstants.SOLR_COMPONENT,Condition.OR);
  setFilterClauseWithFieldName(solrQuery,level,LogSearchConstants.SOLR_LEVEL,LogSearchConstants.NO_OPERATOR,Condition.OR);
  setFilterClauseForSolrSearchableString(solrQuery,iMessage,Condition.OR,LogSearchConstants.NO_OPERATOR,LogSearchConstants.SOLR_KEY_LOG_MESSAGE);
  setFilterClauseForSolrSearchableString(solrQuery,eMessage,Condition.AND,LogSearchConstants.MINUS_OPERATOR,LogSearchConstants.SOLR_KEY_LOG_MESSAGE);
  applyLogFileFilter(solrQuery,searchCriteria);
  setFilterClauseWithFieldName(solrQuery,globalExcludeComp,LogSearchConstants.SOLR_COMPONENT,LogSearchConstants.MINUS_OPERATOR,Condition.AND);
  setFilterClauseWithFieldName(solrQuery,unselectedComp,LogSearchConstants.SOLR_COMPONENT,LogSearchConstants.MINUS_OPERATOR,Condition.AND);
  urlHostName=SolrUtil.escapeQueryChars(urlHostName);
  setSingleIncludeFilter(solrQuery,LogSearchConstants.SOLR_HOST,urlHostName);
  urlComponentName=SolrUtil.escapeQueryChars(urlComponentName);
  setSingleIncludeFilter(solrQuery,LogSearchConstants.SOLR_COMPONENT,urlComponentName);
  setPagination(solrQuery,searchCriteria);
  setSortOrderDefaultServiceLog(solrQuery,searchCriteria);
  setSingleIncludeFilter(solrQuery,LogSearchConstants.BUNDLE_ID,bundleId);
  file_name=SolrUtil.escapeQueryChars(file_name);
  setSingleIncludeFilter(solrQuery,LogSearchConstants.SOLR_PATH,file_name);
  setUserSpecificFilter(searchCriteria,solrQuery,LogSearchConstants.INCLUDE_QUERY,LogSearchConstants.INCLUDE_QUERY,logType);
  setUserSpecificFilter(searchCriteria,solrQuery,LogSearchConstants.EXCLUDE_QUERY,LogSearchConstants.EXCLUDE_QUERY,logType);
  return solrQuery;
}
