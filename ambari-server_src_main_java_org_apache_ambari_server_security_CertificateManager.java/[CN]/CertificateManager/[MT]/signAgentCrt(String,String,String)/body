{
  LOG.info("Signing of agent certificate");
  LOG.info("Verifying passphrase");
  String passphraseSrvr=configs.getConfigsMap().get(Configuration.PASSPHRASE_KEY);
  System.out.println(passphraseSrvr);
  System.out.println(passphraseAgent);
  if (!passphraseAgent.equals(passphraseSrvr)) {
    LOG.warn("Incorrect passphrase from agent");
    return "";
  }
  Map<String,String> configsMap=configs.getConfigsMap();
  String srvrKstrDir=configsMap.get(Configuration.SRVR_KSTR_DIR_KEY);
  String srvrCrtPass=configsMap.get(Configuration.SRVR_CRT_PASS_KEY);
  String srvrCrtName=configsMap.get(Configuration.SRVR_CRT_NAME_KEY);
  String srvrKeyName=configsMap.get(Configuration.SRVR_KEY_NAME_KEY);
  String agentCrtReqName=agentHostname + ".csr";
  String agentCrtName=agentHostname + ".crt";
  File agentCrtReqFile=new File(srvrKstrDir + File.separator + agentCrtReqName);
  try {
    FileUtils.writeStringToFile(agentCrtReqFile,agentCrtReqContent);
  }
 catch (  IOException e1) {
    e1.printStackTrace();
  }
  Object[] scriptArgs={srvrKstrDir,agentCrtReqName,agentCrtName,srvrCrtPass,srvrKeyName,srvrCrtName};
  String command=MessageFormat.format(SIGN_AGENT_CRT,scriptArgs);
  LOG.error(command);
  runCommand(command);
  File agentCrtFile=new File(srvrKstrDir + File.separator + agentCrtName);
  String agentCrtContent="";
  try {
    agentCrtContent=FileUtils.readFileToString(agentCrtFile);
  }
 catch (  IOException e) {
    e.printStackTrace();
    LOG.error("Error reading signed agent certificate");
  }
  return agentCrtContent;
}
