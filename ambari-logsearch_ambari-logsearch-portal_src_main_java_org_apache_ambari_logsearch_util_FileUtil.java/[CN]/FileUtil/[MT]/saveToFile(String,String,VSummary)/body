{
  String mainExportedFile="";
  FileOutputStream fis=null;
  try {
    mainExportedFile=mainExportedFile + "**********************Summary**********************\n";
    mainExportedFile=mainExportedFile + "Number of Logs : " + vsummary.getNumberLogs()+ "\n";
    mainExportedFile=mainExportedFile + "From           : " + vsummary.getFrom()+ "\n";
    mainExportedFile=mainExportedFile + "To             : " + vsummary.getTo()+ "\n";
    List<VHost> hosts=vsummary.getHosts();
    String blankCharacterForHost=String.format("%-8s","");
    int numberHost=0;
    for (    VHost host : hosts) {
      numberHost+=1;
      String h=host.getName();
      String c="";
      Set<String> comp=host.getComponents();
      boolean zonetar=true;
      if (comp != null) {
        for (        String component : comp) {
          if (zonetar) {
            c=component;
            zonetar=false;
          }
 else {
            c=c + ", " + component;
          }
        }
      }
      if (numberHost > 9) {
        blankCharacterForHost=String.format("%-7s",blankCharacterForHost);
      }
 else       if (numberHost > 99) {
        blankCharacterForHost=String.format("%-6s",blankCharacterForHost);
      }
 else       if (numberHost > 999) {
        blankCharacterForHost=String.format("%-5s",blankCharacterForHost);
      }
 else       if (numberHost > 9999) {
        blankCharacterForHost=String.format("%-4s",blankCharacterForHost);
      }
 else       if (numberHost > 99999) {
        blankCharacterForHost=String.format("%-3s",blankCharacterForHost);
      }
      if (numberHost == 1) {
        mainExportedFile=mainExportedFile + "Host" + blankCharacterForHost+ "   : "+ h+ " ["+ c+ "] "+ "\n";
      }
 else       if (numberHost > 1) {
        mainExportedFile=mainExportedFile + "Host_" + numberHost+ blankCharacterForHost+ " : "+ h+ " ["+ c+ "] "+ "\n";
      }
    }
    mainExportedFile=mainExportedFile + "Levels" + String.format("%-9s",blankCharacterForHost)+ ": "+ vsummary.getLevels()+ "\n";
    mainExportedFile=mainExportedFile + "Format" + String.format("%-9s",blankCharacterForHost)+ ": "+ vsummary.getFormat()+ "\n";
    mainExportedFile=mainExportedFile + "\n";
    mainExportedFile=mainExportedFile + "Included String: [" + vsummary.getIncludeString()+ "]\n\n";
    mainExportedFile=mainExportedFile + "Excluded String: [" + vsummary.getExcludeString()+ "]\n\n";
    mainExportedFile=mainExportedFile + "************************Logs***********************" + "\n";
    mainExportedFile=mainExportedFile + text + "\n";
    File file=File.createTempFile(fileName,vsummary.getFormat());
    fis=new FileOutputStream(file);
    fis.write(mainExportedFile.getBytes());
    return Response.ok(file,MediaType.APPLICATION_OCTET_STREAM).header("Content-Disposition","attachment;filename=" + fileName + vsummary.getFormat()).build();
  }
 catch (  Exception e) {
    logger.error(e.getMessage());
    throw restErrorUtil.createRESTException(e.getMessage(),MessageEnums.ERROR_SYSTEM);
  }
 finally {
    if (fis != null) {
      try {
        fis.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
