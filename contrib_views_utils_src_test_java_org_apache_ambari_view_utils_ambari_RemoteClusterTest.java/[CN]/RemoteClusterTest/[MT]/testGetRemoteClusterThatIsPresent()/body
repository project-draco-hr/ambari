{
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> instanceProperties=new HashMap<String,String>();
  instanceProperties.put(AmbariApi.AMBARI_SERVER_URL_INSTANCE_PROPERTY,AMBARI_CLUSTER_REST_URL);
  instanceProperties.put(AmbariApi.AMBARI_SERVER_USERNAME_INSTANCE_PROPERTY,"admin");
  instanceProperties.put(AmbariApi.AMBARI_SERVER_PASSWORD_INSTANCE_PROPERTY,"admin");
  expect(viewContext.getProperties()).andReturn(instanceProperties).anyTimes();
  replay(viewContext);
  AmbariApi ambariApi=new AmbariApi(viewContext);
  Cluster cluster=ambariApi.getRemoteCluster();
  assertNotNull(cluster);
  assertEquals(cluster.getName(),"c1");
}
