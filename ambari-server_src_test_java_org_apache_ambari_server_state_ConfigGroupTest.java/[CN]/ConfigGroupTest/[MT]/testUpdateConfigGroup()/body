{
  ConfigGroup configGroup=createConfigGroup();
  Assert.assertNotNull(configGroup);
  ConfigGroupEntity configGroupEntity=configGroupDAO.findById(configGroup.getId());
  Assert.assertNotNull(configGroupEntity);
  configGroup=configGroupFactory.createExisting(cluster,configGroupEntity);
  Host host=clusters.getHost("h2");
  configGroup.addHost(host);
  Assert.assertEquals(2,configGroup.getHosts().values().size());
  Map<String,String> properties=new HashMap<String,String>();
  properties.put("key1","value1");
  Config config=new ConfigImpl("test-site");
  config.setProperties(properties);
  config.setVersionTag("version100");
  configGroup.addConfiguration(config);
  Assert.assertEquals(2,configGroup.getConfigurations().values().size());
  configGroup.setName("NewName");
  configGroup.setDescription("NewDesc");
  configGroup.setTag("NewTag");
  configGroup.persist();
  configGroupEntity=configGroupDAO.findByName("NewName");
  Assert.assertNotNull(configGroupEntity);
  Assert.assertEquals(2,configGroupEntity.getConfigGroupHostMappingEntities().size());
  Assert.assertEquals(2,configGroupEntity.getConfigGroupConfigMappingEntities().size());
  Assert.assertEquals("NewTag",configGroupEntity.getTag());
  Assert.assertEquals("NewDesc",configGroupEntity.getDescription());
  Assert.assertNotNull(cluster.getConfig("test-site","version100"));
}
