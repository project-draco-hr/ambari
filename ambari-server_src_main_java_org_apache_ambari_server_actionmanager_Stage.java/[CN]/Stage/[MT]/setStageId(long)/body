{
  if (this.stageId != -1) {
    throw new RuntimeException("Attempt to set stageId again! Not allowed.");
  }
  this.stageId=stageId;
  for (  String host : this.commandsToSend.keySet()) {
    for (    ExecutionCommandWrapper wrapper : this.commandsToSend.get(host)) {
      ExecutionCommand cmd=wrapper.getExecutionCommand();
      cmd.setCommandId(StageUtils.getActionId(requestId,stageId));
    }
  }
}
