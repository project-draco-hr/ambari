{
  ExecutionCommandWrapper commandWrapper=addGenericExecutionCommand(clusterName,hostName,role,command,event,retryAllowed);
  ExecutionCommand cmd=commandWrapper.getExecutionCommand();
  Map<String,String> cmdParams=new HashMap<String,String>();
  if (commandParams != null) {
    cmdParams.putAll(commandParams);
  }
  if (timeout != null) {
    cmdParams.put(ExecutionCommand.KeyNames.COMMAND_TIMEOUT,Long.toString(timeout));
  }
  cmd.setCommandParams(cmdParams);
  Map<String,String> roleParams=new HashMap<String,String>();
  roleParams.put(ServerAction.ACTION_NAME,actionName);
  cmd.setRoleParams(roleParams);
  if (commandDetail != null) {
    HostRoleCommand hostRoleCommand=getHostRoleCommand(hostName,role.toString());
    if (hostRoleCommand != null) {
      hostRoleCommand.setCommandDetail(commandDetail);
      hostRoleCommand.setCustomCommandName(actionName);
    }
  }
}
