{
  StageEntity stageEntity=new StageEntity();
  stageEntity.setRequestId(requestId);
  stageEntity.setStageId(getStageId());
  stageEntity.setLogInfo(logDir);
  stageEntity.setRequestContext(requestContext);
  stageEntity.setHostRoleCommands(new ArrayList<HostRoleCommandEntity>());
  stageEntity.setRoleSuccessCriterias(new ArrayList<RoleSuccessCriteriaEntity>());
  for (  Role role : successFactors.keySet()) {
    RoleSuccessCriteriaEntity roleSuccessCriteriaEntity=new RoleSuccessCriteriaEntity();
    roleSuccessCriteriaEntity.setRole(role);
    roleSuccessCriteriaEntity.setStage(stageEntity);
    roleSuccessCriteriaEntity.setSuccessFactor(successFactors.get(role).doubleValue());
    stageEntity.getRoleSuccessCriterias().add(roleSuccessCriteriaEntity);
  }
  return stageEntity;
}
