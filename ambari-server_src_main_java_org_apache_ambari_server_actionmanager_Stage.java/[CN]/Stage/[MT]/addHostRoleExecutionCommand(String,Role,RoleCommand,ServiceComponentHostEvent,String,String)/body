{
  Log.info("Adding host role command for role: " + role + ", command: "+ command+ ", event: "+ event+ ", clusterName: "+ clusterName+ ", serviceName: "+ serviceName);
  HostRoleCommand hrc=new HostRoleCommand(host,role,event);
  ExecutionCommand cmd=new ExecutionCommand();
  hrc.setExecutionCommand(cmd);
  cmd.setHostname(host);
  cmd.setClusterName(clusterName);
  cmd.setServiceName(serviceName);
  cmd.setCommandId(this.getActionId());
  cmd.setRole(role);
  cmd.setRoleCommand(command);
  Map<String,HostRoleCommand> hrcMap=this.hostRoleCommands.get(host);
  if (hrcMap == null) {
    hrcMap=new TreeMap<String,HostRoleCommand>();
    this.hostRoleCommands.put(host,hrcMap);
  }
  if (hrcMap.get(role.toString()) != null) {
    throw new RuntimeException("Setting the host role command second time for same stage: stage=" + this.getActionId() + ", host="+ host+ ", role="+ role);
  }
  hrcMap.put(role.toString(),hrc);
  List<ExecutionCommand> execCmdList=this.commandsToSend.get(host);
  if (execCmdList == null) {
    execCmdList=new ArrayList<ExecutionCommand>();
    this.commandsToSend.put(host,execCmdList);
  }
  if (execCmdList.contains(cmd)) {
    throw new RuntimeException("Setting the execution command second time for same stage: stage=" + this.getActionId() + ", host="+ host+ ", role="+ role);
  }
  execCmdList.add(cmd);
}
