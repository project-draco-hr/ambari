{
  HostRoleCommand hrc=new HostRoleCommand(hostName,role,event,command);
  ExecutionCommand cmd=new ExecutionCommand();
  ExecutionCommandWrapper wrapper=new ExecutionCommandWrapper(cmd);
  hrc.setExecutionCommandWrapper(wrapper);
  cmd.setHostname(hostName);
  cmd.setClusterName(clusterName);
  cmd.setServiceName("");
  cmd.setCommandId(this.getActionId());
  cmd.setRole(role.name());
  cmd.setRoleCommand(command);
  Map<String,String> roleParams=new HashMap<String,String>();
  roleParams.put(ServerAction.ACTION_NAME,actionName);
  cmd.setRoleParams(roleParams);
  Map<String,HostRoleCommand> hrcMap=this.hostRoleCommands.get(hostName);
  if (hrcMap == null) {
    hrcMap=new LinkedHashMap<String,HostRoleCommand>();
    this.hostRoleCommands.put(hostName,hrcMap);
  }
  if (hrcMap.get(role.toString()) != null) {
    throw new RuntimeException("Setting the server action the second time for same stage: stage=" + this.getActionId() + ", action="+ actionName);
  }
  hrcMap.put(role.toString(),hrc);
  List<ExecutionCommandWrapper> execCmdList=this.commandsToSend.get(hostName);
  if (execCmdList == null) {
    execCmdList=new ArrayList<ExecutionCommandWrapper>();
    this.commandsToSend.put(hostName,execCmdList);
  }
  if (execCmdList.contains(wrapper)) {
    throw new RuntimeException("Setting the execution command second time for same stage: stage=" + this.getActionId() + ", action="+ actionName);
  }
  execCmdList.add(wrapper);
}
