@patch('os.umask')
@patch.object(HostInfo, 'osdiskAvailableSpace')
@patch.object(HostCheckReportFileHandler, 'writeHostCheckFile')
@patch.object(PackagesAnalyzer, 'allAvailablePackages')
@patch.object(PackagesAnalyzer, 'allInstalledPackages')
@patch.object(PackagesAnalyzer, 'getPackageDetails')
@patch.object(PackagesAnalyzer, 'getInstalledPkgsByNames')
@patch.object(PackagesAnalyzer, 'getInstalledPkgsByRepo')
@patch.object(PackagesAnalyzer, 'getInstalledRepos')
@patch.object(HostInfo, 'checkUsers')
@patch.object(HostInfo, 'checkLiveServices')
@patch.object(HostInfo, 'javaProcs')
@patch.object(HostInfo, 'checkFolders')
@patch.object(HostInfo, 'etcAlternativesConf')
@patch.object(HostInfo, 'hadoopVarRunCount')
@patch.object(HostInfo, 'hadoopVarLogCount')
def test_hostinfo_register(self, hvlc_mock, hvrc_mock, eac_mock, cf_mock, jp_mock, cls_mock, cu_mock, gir_mock, gipbr_mock, gipbn_mock, gpd_mock, aip_mock, aap_mock, whcf_mock, odas_mock, os_umask_mock):
    hvlc_mock.return_value = 1
    hvrc_mock.return_value = 1
    gipbr_mock.return_value = ['pkg1']
    gipbn_mock.return_value = ['pkg2']
    gpd_mock.return_value = ['pkg1', 'pkg2']
    odas_mock.return_value = [{'name': 'name1', }]
    hostInfo = HostInfo()
    dict = {}
    hostInfo.register(dict, True, True)
    self.verifyReturnedValues(dict)
    hostInfo.register(dict, True, False)
    self.verifyReturnedValues(dict)
    hostInfo.register(dict, False, True)
    self.verifyReturnedValues(dict)
    self.assertTrue((os_umask_mock.call_count == 2))
    hostInfo = HostInfo()
    dict = {}
    hostInfo.register(dict, False, False)
    self.assertTrue(gir_mock.called)
    self.assertTrue(gpd_mock.called)
    self.assertTrue(aip_mock.called)
    self.assertTrue(odas_mock.called)
    for existingPkg in ['pkg1', 'pkg2']:
        self.assertTrue((existingPkg in dict['installedPackages']))
    (args, kwargs) = gpd_mock.call_args_list[0]
    for existingPkg in ['pkg1', 'pkg2']:
        self.assertTrue((existingPkg in args[1]))
