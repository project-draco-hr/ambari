{
  Set<Resource> resourceSet=new HashSet<Resource>();
  Set<ViewInstanceDefinition> instanceDefinitions=new HashSet<ViewInstanceDefinition>();
  Set<Map<String,Object>> propertyMaps=getPropertyMaps(predicate);
  int size=propertyMaps.size();
  Collection<ViewInstanceDefinition> viewInstanceDefinitions=viewDefinition.getInstanceDefinitions();
  if (size == 0) {
    instanceDefinitions.addAll(viewInstanceDefinitions);
  }
 else {
    for (    Map<String,Object> propertyMap : propertyMaps) {
      String instanceName=(String)propertyMap.get(INSTANCE_NAME_PROPERTY_ID);
      if (instanceName == null) {
        instanceDefinitions.addAll(viewInstanceDefinitions);
        break;
      }
 else {
        instanceDefinitions.add(viewDefinition.getInstanceDefinition(instanceName));
      }
    }
  }
  for (  ViewInstanceDefinition viewInstanceDefinition : instanceDefinitions) {
    for (    String resourceName : resourceNames) {
      ResourceImpl resource=new ResourceImpl(type);
      resource.setProperty(VIEW_NAME_PROPERTY_ID,viewDefinition.getName());
      resource.setProperty(INSTANCE_NAME_PROPERTY_ID,viewInstanceDefinition.getName());
      resource.setProperty("name",resourceName);
      resourceSet.add(resource);
    }
  }
  return resourceSet;
}
