{
  properties.put("hdfs-site",hdfsProps);
  hdfsProps.put("foo","val");
  hdfsProps.put("bar","val");
  hdfsProps.put("dfs.nameservices","val");
  Map<String,String> category1Props=new HashMap<>();
  properties.put("category1",category1Props);
  category1Props.put("prop1","val");
  hostGroups.add(group1);
  hostGroups.add(group2);
  group1Components.add("c1");
  group1Components.add("c2");
  group2Components.add("c1");
  group2Components.add("c3");
  expect(stack.isPasswordProperty("HDFS","hdfs-site","foo")).andReturn(false).anyTimes();
  expect(stack.isPasswordProperty("HDFS","hdfs-site","bar")).andReturn(false).anyTimes();
  expect(stack.isPasswordProperty("HDFS","hdfs-site","some_password")).andReturn(true).anyTimes();
  expect(stack.isPasswordProperty("HDFS","category1","prop1")).andReturn(false).anyTimes();
  expect(stack.isPasswordProperty("SERVICE2","category2","prop2")).andReturn(false).anyTimes();
  expect(stack.getServiceForComponent("c1")).andReturn("HDFS").anyTimes();
  expect(stack.getServiceForComponent("c2")).andReturn("HDFS").anyTimes();
  expect(stack.getServiceForComponent("c3")).andReturn("SERVICE2").anyTimes();
  expect(group1.getName()).andReturn("group1").anyTimes();
  expect(group2.getName()).andReturn("group2").anyTimes();
  expect(group1.getConfiguration()).andReturn(EMPTY_CONFIGURATION).anyTimes();
  expect(group1.getComponentNames()).andReturn(group1Components).anyTimes();
  expect(group2.getComponentNames()).andReturn(group2Components).anyTimes();
  Collection<Stack.ConfigProperty> requiredHDFSProperties=new HashSet<>();
  requiredHDFSProperties.add(new Stack.ConfigProperty("hdfs-site","foo",null));
  requiredHDFSProperties.add(new Stack.ConfigProperty("hdfs-site","bar",null));
  requiredHDFSProperties.add(new Stack.ConfigProperty("hdfs-site","some_password",null));
  requiredHDFSProperties.add(new Stack.ConfigProperty("category1","prop1",null));
  Collection<Stack.ConfigProperty> requiredService2Properties=new HashSet<Stack.ConfigProperty>();
  requiredService2Properties.add(new Stack.ConfigProperty("category2","prop2",null));
  expect(stack.getRequiredConfigurationProperties("HDFS")).andReturn(requiredHDFSProperties).anyTimes();
  expect(stack.getRequiredConfigurationProperties("SERVICE2")).andReturn(requiredService2Properties).anyTimes();
}
