{
  QueryInfo queryInfo=queryTree.getObject();
  TreeNode<Set<String>> resultTree=new TreeNodeImpl<Set<String>>(null,queryInfo.getProperties(),queryTree.getName());
  copyPropertiesToResult(queryTree,resultTree);
  boolean addKeysToEmptyResource=true;
  if (!isCollection && isRequestWithNoProperties(queryTree)) {
    addSubResources(queryTree,resultTree);
    addKeysToEmptyResource=false;
  }
  ensureRequiredProperties(resultTree,addKeysToEmptyResource);
  Set<String> properties=resultTree.getObject();
  properties.add(AlertResourceProvider.ALERT_STATE);
  properties.add(AlertResourceProvider.ALERT_ORIGINAL_TIMESTAMP);
  return resultTree;
}
