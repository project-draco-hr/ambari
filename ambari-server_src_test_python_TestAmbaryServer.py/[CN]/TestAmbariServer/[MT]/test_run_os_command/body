@patch('subprocess.Popen')
@patch.object(ambari_server, 'print_info_msg')
def test_run_os_command(self, printInfoMsg_mock, popenMock):
    p = MagicMock()
    p.communicate.return_value = (None, None)
    p.returncode = 3
    popenMock.return_value = p
    resp = ambari_server.run_os_command('runme')
    self.assertEqual(3, resp[0])
