@patch.object(ambari_server, 'get_validated_string_input')
@patch.object(ambari_server, 'print_info_msg')
@patch.object(ambari_server, 'print_warning_msg')
@patch.object(ambari_server, 'run_os_command')
def test_create_custom_user(self, run_os_command_mock, print_warning_msg_mock, print_info_msg_mock, get_validated_string_input_mock):
    user = 'dummy-user'
    get_validated_string_input_mock.return_value = user
    run_os_command_mock.side_effect = [(9, '', ''), (9, '', ''), (0, '', '')]
    result = ambari_server.create_custom_user()
    self.assertTrue((len(run_os_command_mock.call_args_list) == 3))
    self.assertEquals(result, (0, user))
    run_os_command_mock.reset_mock()
    run_os_command_mock.side_effect = [(0, '', ''), (0, '', '')]
    result = ambari_server.create_custom_user()
    self.assertTrue((len(run_os_command_mock.call_args_list) == 2))
    self.assertEquals(result, (0, user))
    run_os_command_mock.reset_mock()
    run_os_command_mock.side_effect = [(1, '', '')]
    result = ambari_server.create_custom_user()
    self.assertTrue((len(run_os_command_mock.call_args_list) == 1))
    self.assertEquals(result, (1, None))
    run_os_command_mock.reset_mock()
