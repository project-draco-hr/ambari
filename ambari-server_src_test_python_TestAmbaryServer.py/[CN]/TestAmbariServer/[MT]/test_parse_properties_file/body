@patch.object(ambari_server, 'search_file')
def test_parse_properties_file(self, search_file_mock):
    tf1 = tempfile.NamedTemporaryFile(mode='r')
    search_file_mock.return_value = tf1.name
    args = MagicMock()
    ambari_server.parse_properties_file(args)
    self.assertEquals(args.persistence_type, 'local')
    with open(tf1.name, 'w') as fout:
        fout.write('\n')
        fout.write((ambari_server.PERSISTENCE_TYPE_PROPERTY + '=remote'))
    args = MagicMock()
    ambari_server.parse_properties_file(args)
    self.assertEquals(args.persistence_type, 'remote')
