@patch.object(ambari_server, 'get_alias_string')
@patch.object(ambari_server, 'save_passwd_for_alias')
@patch.object(ambari_server, 'read_password')
def test_configure_ldap_password(self, read_password_method, save_passwd_for_alias_method, get_alias_string_method):
    out = StringIO.StringIO()
    sys.stdout = out
    read_password_method.return_value = 'blah'
    save_passwd_for_alias_method.return_value = 0
    get_alias_string_method.return_value = '${alias=somefake}'
    ambari_server.configure_ldap_password(True, 'aaa')
    self.assertTrue(save_passwd_for_alias_method.called)
    self.assertTrue(read_password_method.called)
    self.assertTrue(get_alias_string_method.called)
    save_passwd_for_alias_method.assert_called_once_with(ambari_server.LDAP_MGR_PASSWORD_ALIAS, 'blah', 'aaa')
    sys.stdout = sys.__stdout__
