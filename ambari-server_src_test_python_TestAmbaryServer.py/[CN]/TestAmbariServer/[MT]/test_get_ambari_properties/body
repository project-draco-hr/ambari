@patch.object(ambari_server, 'search_file')
def test_get_ambari_properties(self, search_file_mock):
    search_file_mock.return_value = None
    rcode = ambari_server.get_ambari_properties()
    self.assertEqual(rcode, (-1))
    tf1 = tempfile.NamedTemporaryFile()
    search_file_mock.return_value = tf1.name
    prop_name = 'name'
    prop_value = 'val'
    with open(tf1.name, 'w') as fout:
        fout.write(((prop_name + '=') + prop_value))
    fout.close()
    properties = ambari_server.get_ambari_properties()
    self.assertEqual(properties[prop_name], prop_value)
    sys.stdout = sys.__stdout__
