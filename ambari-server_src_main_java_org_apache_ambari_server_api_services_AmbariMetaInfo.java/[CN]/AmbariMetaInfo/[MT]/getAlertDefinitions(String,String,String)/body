{
  ServiceInfo svc=getService(stackName,stackVersion,serviceName);
  if (null == svc.getAlertsFile() || !svc.getAlertsFile().exists()) {
    LOG.debug("Alerts file for " + stackName + "/"+ stackVersion+ "/"+ serviceName+ " not found.");
    return null;
  }
  Map<String,List<AlertDefinition>> map=null;
  Type type=new TypeToken<Map<String,List<AlertDefinition>>>(){
  }
.getType();
  Gson gson=new Gson();
  try {
    map=gson.fromJson(new FileReader(svc.getAlertsFile()),type);
  }
 catch (  Exception e) {
    LOG.error("Could not read the alert definition file",e);
    throw new AmbariException("Could not read alert definition file",e);
  }
  Set<AlertDefinition> defs=new HashSet<AlertDefinition>();
  for (  Entry<String,List<AlertDefinition>> entry : map.entrySet()) {
    for (    AlertDefinition ad : entry.getValue()) {
      ad.setServiceName(serviceName);
      if (!entry.getKey().equals("service")) {
        ad.setComponentName(entry.getKey());
      }
    }
    defs.addAll(entry.getValue());
  }
  return defs;
}
