{
  Map<String,Map<String,String>> propertiesResult=new HashMap<String,Map<String,String>>();
  ServiceInfo service=getServiceInfo(stackName,version,serviceName);
  if (service != null)   if (serviceName.equals(service.getName())) {
    List<PropertyInfo> properties=service.getProperties();
    if (properties != null)     for (    PropertyInfo propertyInfo : properties) {
      Map<String,String> fileProperties=propertiesResult.get(propertyInfo.getFilename());
      if (fileProperties == null) {
        fileProperties=new HashMap<String,String>();
        fileProperties.put(propertyInfo.getName(),propertyInfo.getValue());
        propertiesResult.put(propertyInfo.getFilename(),fileProperties);
      }
 else {
        fileProperties.put(propertyInfo.getName(),propertyInfo.getValue());
      }
    }
  }
  return propertiesResult;
}
