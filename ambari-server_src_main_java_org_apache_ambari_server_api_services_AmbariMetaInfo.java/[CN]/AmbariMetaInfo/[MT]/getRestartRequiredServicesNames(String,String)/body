{
  HashSet<String> needRestartServices=new HashSet<String>();
  Collection<ServiceInfo> serviceInfos=getServices(stackName,version).values();
  for (  ServiceInfo service : serviceInfos) {
    if (service.isRestartRequiredAfterChange() != null && service.isRestartRequiredAfterChange()) {
      needRestartServices.add(service.getName());
    }
  }
  return needRestartServices;
}
