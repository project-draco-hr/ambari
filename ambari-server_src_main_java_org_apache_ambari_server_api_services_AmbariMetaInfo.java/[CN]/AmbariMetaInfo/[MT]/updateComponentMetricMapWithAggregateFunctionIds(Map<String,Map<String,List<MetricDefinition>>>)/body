{
  if (!metricMap.isEmpty()) {
    for (    Map<String,List<MetricDefinition>> componentMetricDef : metricMap.values()) {
      for (      Map.Entry<String,List<MetricDefinition>> metricDefEntry : componentMetricDef.entrySet()) {
        if (metricDefEntry.getKey().equals(Component.name())) {
          for (          MetricDefinition metricDefinition : metricDefEntry.getValue()) {
            Map<String,Metric> newMetrics=new HashMap<String,Metric>();
            if (metricDefinition.getType().equals("ganglia")) {
              for (              String identifierToAdd : AGGREGATE_FUNCTION_IDENTIFIERS) {
                for (                Map.Entry<String,Metric> metricEntry : metricDefinition.getMetrics().entrySet()) {
                  String newMetricKey=metricEntry.getKey() + identifierToAdd;
                  Metric currentMetric=metricEntry.getValue();
                  Metric newMetric=new Metric(currentMetric.getName() + identifierToAdd,currentMetric.isPointInTime(),currentMetric.isTemporal(),currentMetric.isAmsHostMetric(),currentMetric.getUnit());
                  newMetrics.put(newMetricKey,newMetric);
                }
              }
            }
            metricDefinition.getMetrics().putAll(newMetrics);
          }
        }
      }
    }
  }
  return metricMap;
}
