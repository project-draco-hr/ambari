{
  final File httpPassFile=temporaryFolder.newFile();
  Injector injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      Properties properties=new Properties();
      properties.setProperty(Configuration.API_USE_SSL,"true");
      properties.setProperty(Configuration.CLIENT_API_SSL_KSTR_DIR_NAME_KEY,httpPassFile.getParent());
      properties.setProperty(Configuration.CLIENT_API_SSL_CRT_PASS_FILE_NAME_KEY,httpPassFile.getName());
      properties.setProperty(Configuration.HTTP_STRICT_TRANSPORT_HEADER_VALUE_KEY,"custom1");
      properties.setProperty(Configuration.HTTP_X_FRAME_OPTIONS_HEADER_VALUE_KEY,"custom2");
      properties.setProperty(Configuration.HTTP_X_XSS_PROTECTION_HEADER_VALUE_KEY,"custom3");
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(Configuration.class).toInstance(new Configuration(properties));
    }
  }
);
  FilterConfig filterConfig=createNiceMock(FilterConfig.class);
  HttpServletRequest servletRequest=createStrictMock(HttpServletRequest.class);
  HttpServletResponse servletResponse=createStrictMock(HttpServletResponse.class);
  servletResponse.setHeader(SecurityHeaderFilter.STRICT_TRANSPORT_HEADER,"custom1");
  expectLastCall().once();
  servletResponse.setHeader(SecurityHeaderFilter.X_FRAME_OPTIONS_HEADER,"custom2");
  expectLastCall().once();
  servletResponse.setHeader(SecurityHeaderFilter.X_XSS_PROTECTION_HEADER,"custom3");
  expectLastCall().once();
  FilterChain filterChain=createStrictMock(FilterChain.class);
  filterChain.doFilter(servletRequest,servletResponse);
  expectLastCall().once();
  replayAll();
  SecurityHeaderFilter securityFilter=injector.getInstance(SecurityHeaderFilter.class);
  Assert.assertNotNull(securityFilter);
  securityFilter.init(filterConfig);
  securityFilter.doFilter(servletRequest,servletResponse,filterChain);
  verifyAll();
}
