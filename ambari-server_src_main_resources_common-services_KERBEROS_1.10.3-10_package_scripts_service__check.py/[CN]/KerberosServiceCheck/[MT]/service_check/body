def service_check(self, env):
    import params
    if ((params.smoke_test_principal is not None) and (params.smoke_test_keytab_file is not None) and os.path.isfile(params.smoke_test_keytab_file)):
        print ('Performing kinit using %s' % params.smoke_test_principal)
        ccache_file_name = _md5('{0}|{1}'.format(params.smoke_test_principal, params.smoke_test_keytab_file)).hexdigest()
        ccache_file_path = '{0}{1}kerberos_service_check_cc_{2}'.format(params.tmp_dir, os.sep, ccache_file_name)
        kinit_path_local = functions.get_kinit_path(default('/configurations/kerberos-env/executable_search_paths', None))
        kinit_command = '{0} -c {1} -kt {2} {3}'.format(kinit_path_local, ccache_file_path, params.smoke_test_keytab_file, params.smoke_test_principal)
        try:
            Execute(kinit_command)
        finally:
            if os.path.isfile(ccache_file_path):
                os.remove(ccache_file_path)
    else:
        err_msg = Logger.filter_text('Failed to execute kinit test due to principal or keytab not found or available')
        raise Fail(err_msg)
