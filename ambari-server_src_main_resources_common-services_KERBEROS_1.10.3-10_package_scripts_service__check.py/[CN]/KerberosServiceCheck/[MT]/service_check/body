def service_check(self, env):
    import params
    if (params.smoke_test_principal is None):
        params.smoke_test_principal = params.smoke_user
    if ((params.smoke_test_principal is not None) and (params.smoke_test_keytab_file is not None) and os.path.isfile(params.smoke_test_keytab_file)):
        print ('Performing kinit using smoke test user: %s' % params.smoke_test_principal)
        (code, out) = self.test_kinit({'principal': params.smoke_test_principal, 'keytab_file': params.smoke_test_keytab_file, }, user=params.smoke_user)
        test_performed = True
    else:
        code = (-1)
        out = 'No principal or keytab found'
        test_performed = False
    if test_performed:
        if (code == 0):
            print 'Test executed successfully.'
        else:
            print ('Test failed with error code %d: %s.' % (code, out))
    else:
        print 'Test not performed - no test principal was available'
