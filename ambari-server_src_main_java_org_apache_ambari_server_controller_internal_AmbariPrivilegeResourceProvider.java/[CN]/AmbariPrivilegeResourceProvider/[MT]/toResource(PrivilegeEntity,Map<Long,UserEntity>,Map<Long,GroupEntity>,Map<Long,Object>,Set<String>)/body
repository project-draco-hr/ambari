{
  Resource resource=super.toResource(privilegeEntity,userEntities,groupEntities,resourceEntities,requestedIds);
  if (resource != null) {
    ResourceEntity resourceEntity=privilegeEntity.getResource();
    ResourceTypeEntity type=resourceEntity.getResourceType();
    String privilegeType;
switch (type.getId()) {
case ResourceTypeEntity.CLUSTER_RESOURCE_TYPE:
      ClusterEntity clusterEntity=(ClusterEntity)resourceEntities.get(resourceEntity.getId());
    privilegeType=ResourceTypeEntity.CLUSTER_RESOURCE_TYPE_NAME;
  setResourceProperty(resource,PRIVILEGE_CLUSTER_NAME_PROPERTY_ID,clusterEntity.getClusterName(),requestedIds);
break;
case ResourceTypeEntity.AMBARI_RESOURCE_TYPE:
privilegeType=ResourceTypeEntity.AMBARI_RESOURCE_TYPE_NAME;
break;
default :
privilegeType=ResourceTypeEntity.VIEW_RESOURCE_TYPE_NAME;
ViewInstanceEntity viewInstanceEntity=(ViewInstanceEntity)resourceEntities.get(resourceEntity.getId());
ViewEntity viewEntity=viewInstanceEntity.getViewEntity();
setResourceProperty(resource,PRIVILEGE_VIEW_NAME_PROPERTY_ID,viewEntity.getCommonName(),requestedIds);
setResourceProperty(resource,PRIVILEGE_VIEW_VERSION_PROPERTY_ID,viewEntity.getVersion(),requestedIds);
setResourceProperty(resource,PRIVILEGE_INSTANCE_NAME_PROPERTY_ID,viewInstanceEntity.getName(),requestedIds);
break;
}
setResourceProperty(resource,PRIVILEGE_TYPE_PROPERTY_ID,privilegeType,requestedIds);
}
return resource;
}
