{
  server=new Server(CLIENT_PORT);
  try {
    Context root=new Context(server,"/",Context.SESSIONS);
    ServletHolder rootServlet=root.addServlet(DefaultServlet.class,"/");
    rootServlet.setInitOrder(1);
    ServletHolder sh=new ServletHolder(ServletContainer.class);
    sh.setInitParameter("com.sun.jersey.config.property.resourceConfigClass","com.sun.jersey.api.core.PackagesResourceConfig");
    sh.setInitParameter("com.sun.jersey.config.property.packages","org.apache.ambari.controller.api.rest");
    root.addServlet(sh,"/api/*");
    sh.setInitOrder(2);
    ServletHolder agent=new ServletHolder(ServletContainer.class);
    agent.setInitParameter("com.sun.jersey.config.property.resourceConfigClass","com.sun.jersey.api.core.PackagesResourceConfig");
    agent.setInitParameter("com.sun.jersey.config.property.packages","org.apache.ambari.controller.agent.rest");
    root.addServlet(agent,"/agent/*");
    agent.setInitOrder(3);
    server.setStopAtShutdown(true);
    server.start();
    LOG.info("Started Server");
    server.join();
    LOG.info("Joined the Server");
  }
 catch (  Exception e) {
    LOG.error("Error in the server",e);
  }
}
