{
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  properties=module.getProperties();
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  Authentication auth=new UsernamePasswordAuthenticationToken("admin",null);
  SecurityContextHolder.getContext().setAuthentication(auth);
  ResourceTypeEntity resourceTypeEntity=new ResourceTypeEntity();
  resourceTypeEntity.setId(ResourceTypeEntity.AMBARI_RESOURCE_TYPE);
  resourceTypeEntity.setName(ResourceTypeEntity.AMBARI_RESOURCE_TYPE_NAME);
  resourceTypeDAO.create(resourceTypeEntity);
  ResourceEntity resourceEntity=new ResourceEntity();
  resourceEntity.setId(ResourceEntity.AMBARI_RESOURCE_ID);
  resourceEntity.setResourceType(resourceTypeEntity);
  resourceDAO.create(resourceEntity);
  PermissionEntity adminPermissionEntity=new PermissionEntity();
  adminPermissionEntity.setId(PermissionEntity.AMBARI_ADMINISTRATOR_PERMISSION);
  adminPermissionEntity.setPermissionName(PermissionEntity.AMBARI_ADMINISTRATOR_PERMISSION_NAME);
  adminPermissionEntity.setResourceType(resourceTypeEntity);
  permissionDAO.create(adminPermissionEntity);
}
