{
  final long currentTimeMillis=System.currentTimeMillis();
  final Snapshot snapshot=histogram.getSnapshot();
  final String sanitizedName=sanitizeName(name);
  final String histogramMinName=sanitizedName + MIN_SUFIX;
  final TimelineMetric minMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramMinName,histogram.min());
  final String histogramMaxName=sanitizedName + MAX_SUFIX;
  final TimelineMetric maxMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramMaxName,histogram.max());
  final String histogramMeanName=sanitizedName + MEAN_SUFIX;
  final TimelineMetric meanMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramMeanName,histogram.mean());
  final String histogramMedianName=sanitizedName + MEDIAN_SUFIX;
  final TimelineMetric medianMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramMedianName,snapshot.getMedian());
  final String histogramStdDevName=sanitizedName + STD_DEV_SUFIX;
  final TimelineMetric stdDevMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramStdDevName,histogram.stdDev());
  final String histogramSeventyFifthPercentileName=sanitizedName + SEVENTY_FIFTH_PERCENTILE_SUFIX;
  final TimelineMetric seventyFifthPercentileMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramSeventyFifthPercentileName,snapshot.get75thPercentile());
  final String histogramNinetyFifthPercentileName=sanitizedName + NINETY_FIFTH_PERCENTILE_SUFIX;
  final TimelineMetric nintyFifthPercentileMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramNinetyFifthPercentileName,snapshot.get95thPercentile());
  final String histogramNinetyEighthPercentileName=sanitizedName + NINETY_EIGHTH_PERCENTILE_SUFIX;
  final TimelineMetric nintyEighthPercentileMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramNinetyEighthPercentileName,snapshot.get98thPercentile());
  final String histogramNinetyNinethPercentileName=sanitizedName + NINETY_NINTH_PERCENTILE_SUFIX;
  final TimelineMetric nintyNinthPercentileMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramNinetyNinethPercentileName,snapshot.get99thPercentile());
  final String histogramNinetyNinePointNinePercentileName=sanitizedName + NINETY_NINE_POINT_NINE_PERCENTILE_SUFIX;
  final TimelineMetric nintyNinthPointNinePercentileMetric=createTimelineMetric(currentTimeMillis,APP_ID,histogramNinetyNinePointNinePercentileName,snapshot.get999thPercentile());
  metricsCache.putTimelineMetric(minMetric);
  metricsCache.putTimelineMetric(maxMetric);
  metricsCache.putTimelineMetric(meanMetric);
  metricsCache.putTimelineMetric(medianMetric);
  metricsCache.putTimelineMetric(stdDevMetric);
  metricsCache.putTimelineMetric(seventyFifthPercentileMetric);
  metricsCache.putTimelineMetric(nintyFifthPercentileMetric);
  metricsCache.putTimelineMetric(nintyEighthPercentileMetric);
  metricsCache.putTimelineMetric(nintyNinthPercentileMetric);
  metricsCache.putTimelineMetric(nintyNinthPointNinePercentileMetric);
  String[] metricNames=new String[]{histogramMaxName,histogramMeanName,histogramMedianName,histogramMinName,histogramNinetyEighthPercentileName,histogramNinetyFifthPercentileName,histogramNinetyNinePointNinePercentileName,histogramNinetyNinethPercentileName,histogramSeventyFifthPercentileName,histogramStdDevName};
  populateMetricsList(context,metricNames);
}
