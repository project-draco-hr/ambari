{
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  properties=new HashMap<String,String>();
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  hiveStorageFile=new File("./target/HiveTest/storage.dat").getAbsoluteFile();
  properties.put("dataworker.storagePath",hiveStorageFile.toString());
  properties.put("scripts.dir","/tmp/.hiveQueries");
  properties.put("jobs.dir","/tmp/.hiveJobs");
  properties.put("yarn.ats.url","127.0.0.1:8188");
  properties.put("yarn.resourcemanager.url","127.0.0.1:8088");
  setupProperties(properties,baseDir);
  expect(context.getProperties()).andReturn(properties).anyTimes();
  expect(context.getUsername()).andReturn("ambari-qa").anyTimes();
  expect(context.getInstanceName()).andReturn("MyHive").anyTimes();
  replay(handler,context);
}
