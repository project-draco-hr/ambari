def configureEnviron(self, environ):
    if (not self.config.has_option('puppet', 'ruby_home')):
        return environ
    ruby_home = self.config.get('puppet', 'ruby_home')
    if os.path.exists(ruby_home):
        'Only update ruby home if the config is configured'
        path = os.environ['PATH']
        if (not (ruby_home in path)):
            environ['PATH'] = ((((ruby_home + os.path.sep) + 'bin') + ':') + environ['PATH'])
        environ['MY_RUBY_HOME'] = ruby_home
    return environ
