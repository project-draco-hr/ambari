def _set_mode(self, file_status=None):
    if ((not self.mode) or (file_status and (file_status['permission'] == self.mode))):
        return
    if (not self.mode_set):
        self.util.run_command(self.main_resource.resource.target, 'SETPERMISSION', method='PUT', permission=self.mode, assertable_result=False)
    results = []
    if self.main_resource.resource.recursive_chmod:
        self._fill_directories_list(self.main_resource.resource.target, results)
    if self.main_resource.resource.change_permissions_for_parents:
        self._fill_in_parent_directories(self.main_resource.resource.target, results)
    for path in results:
        self.util.run_command(path, 'SETPERMISSION', method='PUT', permission=self.mode, assertable_result=False)
