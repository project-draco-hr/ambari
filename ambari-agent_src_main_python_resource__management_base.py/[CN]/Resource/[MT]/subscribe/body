def subscribe(self, action, resource, immediate=False):
    imm = ('immediate' if immediate else 'delayed')
    sub = (action, resource)
    self.subscriptions[imm].add(sub)
