{
  Set<String> updatedConfigTypes=Collections.emptySet();
  try {
    if (!ConfigRecommendationStrategy.NEVER_APPLY.equals(this.clusterTopology.getConfigRecommendationStrategy())) {
      stackAdvisorBlueprintProcessor.adviseConfiguration(this.clusterTopology);
    }
    if (configureSecurity) {
      configureKerberos();
    }
    updatedConfigTypes=configurationProcessor.doUpdateForClusterCreate();
  }
 catch (  ConfigurationTopologyException e) {
    LOG.error("An exception occurred while doing configuration topology update: " + e,e);
  }
  setConfigurationsOnCluster(clusterTopology,TopologyManager.TOPOLOGY_RESOLVED_TAG,updatedConfigTypes);
}
