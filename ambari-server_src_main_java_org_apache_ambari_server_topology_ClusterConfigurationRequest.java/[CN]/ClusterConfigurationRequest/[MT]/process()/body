{
  Set<String> updatedConfigTypes=new HashSet<>();
  try {
    if (configureSecurity) {
      updatedConfigTypes.addAll(configureKerberos());
    }
    if (!ConfigRecommendationStrategy.NEVER_APPLY.equals(this.clusterTopology.getConfigRecommendationStrategy())) {
      stackAdvisorBlueprintProcessor.adviseConfiguration(this.clusterTopology);
    }
    updatedConfigTypes.addAll(configurationProcessor.doUpdateForClusterCreate());
  }
 catch (  ConfigurationTopologyException e) {
    LOG.error("An exception occurred while doing configuration topology update: " + e,e);
  }
  setConfigurationsOnCluster(clusterTopology,TopologyManager.TOPOLOGY_RESOLVED_TAG,updatedConfigTypes);
}
