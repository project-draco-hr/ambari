{
  LOG.info("testJSONFilterCode_convertFields()");
  init(new HashMap<String,Object>());
  mockOutputMgr.write(EasyMock.capture(capture),EasyMock.anyObject(InputMarker.class));
  EasyMock.expectLastCall();
  EasyMock.replay(mockOutputMgr);
  Date d=new Date();
  DateFormat sdf=new SimpleDateFormat(LogFeederUtil.SOLR_DATE_FORMAT);
  sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
  String dateString=sdf.format(d);
  jsonFilterCode.apply("{ logtime: '" + d.getTime() + "', line_number: 100 }",new InputMarker());
  EasyMock.verify(mockOutputMgr);
  Map<String,Object> jsonParams=capture.getValue();
  assertEquals("Incorrect decoding: log time",dateString,jsonParams.remove("logtime"));
  assertEquals("Incorrect decoding: line number",100l,jsonParams.remove("line_number"));
  assertTrue("jsonParams are not empty!",jsonParams.isEmpty());
}
