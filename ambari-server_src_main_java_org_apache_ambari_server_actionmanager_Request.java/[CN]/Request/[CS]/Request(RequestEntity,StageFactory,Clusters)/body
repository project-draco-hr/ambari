{
  if (entity == null) {
    throw new RuntimeException("Request entity cannot be null.");
  }
  this.requestId=entity.getRequestId();
  this.clusterId=entity.getClusterId();
  if (-1L != this.clusterId) {
    try {
      this.clusterName=clusters.getClusterById(this.clusterId).getClusterName();
    }
 catch (    AmbariException e) {
      String message=String.format("Cluster with id %s not found",this.clusterId);
      LOG.error(message);
      throw new RuntimeException(message);
    }
  }
  this.createTime=entity.getCreateTime();
  this.startTime=entity.getStartTime();
  this.endTime=entity.getEndTime();
  this.requestContext=entity.getRequestContext();
  this.inputs=entity.getInputs();
  this.requestType=entity.getRequestType();
  this.commandName=entity.getCommandName();
  this.status=entity.getStatus();
  if (entity.getRequestScheduleEntity() != null) {
    this.requestScheduleId=entity.getRequestScheduleEntity().getScheduleId();
  }
  for (  StageEntity stageEntity : entity.getStages()) {
    Stage stage=stageFactory.createExisting(stageEntity);
    stages.add(stage);
  }
  Collection<RequestResourceFilterEntity> resourceFilterEntities=entity.getResourceFilterEntities();
  if (resourceFilterEntities != null) {
    this.resourceFilters=new ArrayList<RequestResourceFilter>();
    for (    RequestResourceFilterEntity resourceFilterEntity : resourceFilterEntities) {
      RequestResourceFilter resourceFilter=new RequestResourceFilter(resourceFilterEntity.getServiceName(),resourceFilterEntity.getComponentName(),getHostsList(resourceFilterEntity.getHosts()));
      this.resourceFilters.add(resourceFilter);
    }
  }
  RequestOperationLevelEntity operationLevelEntity=entity.getRequestOperationLevel();
  if (operationLevelEntity != null) {
    this.operationLevel=new RequestOperationLevel(Resource.Type.valueOf(operationLevelEntity.getLevel()),operationLevelEntity.getClusterName(),operationLevelEntity.getServiceName(),operationLevelEntity.getHostComponentName(),operationLevelEntity.getHostName());
  }
}
