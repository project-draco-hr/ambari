def visit_FilterBlock(self, node, frame):
    filter_frame = frame.inner()
    filter_frame.inspect(node.iter_child_nodes())
    aliases = self.push_scope(filter_frame)
    self.pull_locals(filter_frame)
    self.buffer(filter_frame)
    self.blockvisit(node.body, filter_frame)
    self.start_write(frame, node)
    self.visit_Filter(node.filter, filter_frame)
    self.end_write(frame)
    self.pop_scope(aliases, filter_frame)
