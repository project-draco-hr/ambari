def setup_atlas_hook(service_props, atlas_hook_filepath, owner, group):
    '\n  Generate the atlas-application.properties.xml file by merging the service_props with the Atlas application-properties.\n  :param service_props: Atlas configs specific to this service that must be merged.\n  :param atlas_hook_filepath: Config file to write, e.g., /etc/falcon/conf/atlas-application.properties.xml\n  :param owner: File owner\n  :param group: File group\n  '
    import params
    atlas_props = default('/configurations/application-properties', {})
    if has_atlas_in_cluster():
        merged_props = atlas_props.copy()
        merged_props.update(service_props)
        Logger.info(format('Generating Atlas Hook config file {atlas_hook_filepath}'))
        PropertiesFile(atlas_hook_filepath, properties=merged_props, owner=owner, group=group, mode=420)
