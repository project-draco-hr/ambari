@patch('ConfigParser.RawConfigParser')
@patch('__builtin__.open')
@patch('os.listdir', create=True, autospec=True)
def test_read_host_check_file(self, os_listdir_mock, openMock, readMock):
    out = StringIO.StringIO()
    sys.stdout = out
    f = MagicMock()
    openRead = MagicMock()
    openRead.read.return_value = 'java_home|hadoop'
    openMock.side_effect = [f, openRead]
    os_listdir_mock.return_value = ['111']
    propertyMap = self.hostcleanup.read_host_check_file('test')
    self.assertTrue(openMock.called)
    self.assertTrue(readMock.called)
    self.assertTrue(propertyMap.has_key(PACKAGE_SECTION))
    self.assertTrue(propertyMap.has_key(REPO_SECTION))
    self.assertTrue(propertyMap.has_key(USER_SECTION))
    self.assertTrue(propertyMap.has_key(DIR_SECTION))
    self.assertTrue(propertyMap.has_key(PROCESS_SECTION))
    self.assertEquals(propertyMap[PROCESS_SECTION][0], 111)
    sys.stdout = sys.__stdout__
