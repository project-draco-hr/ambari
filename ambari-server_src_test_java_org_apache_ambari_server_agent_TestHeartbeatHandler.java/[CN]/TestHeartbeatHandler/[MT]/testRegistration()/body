{
  ActionManager am=new ActionManager(0,0,null,null,new ActionDBInMemoryImpl());
  Clusters fsm=mock(Clusters.class);
  String hostname="host1";
  HeartBeatHandler handler=new HeartBeatHandler(fsm,new ActionQueue(),am);
  Host hostObject=new HostImpl(hostname);
  when(fsm.getHost(hostname)).thenReturn(hostObject);
  Register reg=new Register();
  HostInfo hi=new HostInfo();
  hi.setOS("MegaOperatingSystem");
  reg.setHostname(hostname);
  reg.setHardwareProfile(hi);
  handler.handleRegistration(reg);
  assertEquals(hostObject.getState(),HostState.HEALTHY);
  assertEquals("MegaOperatingSystem",hostObject.getOsType());
}
