{
  File dataDirectory=temporaryFolder.newFolder();
  File indexFile=new File(dataDirectory,KerberosActionDataFile.DATA_FILE_NAME);
  KerberosActionDataFileBuilder kerberosActionDataFileBuilder=new KerberosActionDataFileBuilder(indexFile);
  File hostDirectory=new File(dataDirectory,"c6403.ambari.apache.org");
  File keytabFile;
  if (hostDirectory.mkdirs())   keytabFile=new File(hostDirectory,DigestUtils.sha1Hex("/etc/security/keytabs/dn.service.keytab"));
 else   throw new Exception("Failed to create " + hostDirectory.getAbsolutePath());
  kerberosActionDataFileBuilder.addRecord("c6403.ambari.apache.org","HDFS","DATANODE","dn/_HOST@_REALM","service","hdfs-site/dfs.namenode.kerberos.principal","/etc/security/keytabs/dn.service.keytab","hdfs","r","hadoop","","hdfs-site/dfs.namenode.keytab.file","false");
  kerberosActionDataFileBuilder.close();
  FileWriter fw=new FileWriter(keytabFile);
  BufferedWriter bw=new BufferedWriter(fw);
  bw.write("hello");
  bw.close();
  return dataDirectory;
}
