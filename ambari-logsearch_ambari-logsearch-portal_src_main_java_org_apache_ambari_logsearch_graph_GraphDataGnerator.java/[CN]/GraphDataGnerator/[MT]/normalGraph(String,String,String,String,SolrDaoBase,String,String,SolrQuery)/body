{
  VBarDataList dataList=new VBarDataList();
  Collection<VBarGraphData> vBarGraphDatas=new ArrayList<VBarGraphData>();
  VBarGraphData vBarGraphData=new VBarGraphData();
  Collection<VNameValue> vNameValues=new ArrayList<VNameValue>();
  queryGenerator.setMainQuery(solrQuery,null);
  queryGenerator.setSingleIncludeFilter(solrQuery,fieldTime,"[" + from + " TO "+ to+ "]");
  if (typeXAxis.contains("string") || typeXAxis.contains("key_lower_case") || typeXAxis.contains("text")) {
    queryGenerator.setFacetField(solrQuery,xAxisField);
    try {
      QueryResponse response=solrDaoBase.process(solrQuery);
      Long count=response.getResults().getNumFound();
      if (response != null && count > 0) {
        FacetField facetField=response.getFacetField(xAxisField);
        if (facetField != null) {
          List<Count> countValues=facetField.getValues();
          for (          Count cnt : countValues) {
            VNameValue vNameValue=new VNameValue();
            vNameValue.setName(cnt.getName());
            vNameValue.setValue("" + cnt.getCount());
            vNameValues.add(vNameValue);
          }
          vBarGraphData.setDataCounts(vNameValues);
          vBarGraphData.setName(xAxisField);
          vBarGraphDatas.add(vBarGraphData);
          dataList.setGraphData(vBarGraphDatas);
        }
      }
      return convertObjToString(dataList);
    }
 catch (    SolrException|SolrServerException|IOException e) {
    }
  }
 else {
    queryGenerator.setRowCount(solrQuery,0);
    String yAxis=yAxisField.contains("count") ? "sum" : yAxisField;
    String jsonQuery=queryGenerator.buildJSONFacetAggregatedFuncitonQuery(yAxis,xAxisField);
    queryGenerator.setJSONFacet(solrQuery,jsonQuery);
    try {
      QueryResponse response=solrDaoBase.process(solrQuery);
      SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
      if (jsonFacetResponse.toString().equals("{count=0}"))       return convertObjToString(dataList);
      VNameValue value=new VNameValue();
      String sum=jsonFacetResponse.getVal(1).toString();
      value.setName(xAxisField);
      value.setValue(sum.substring(0,sum.indexOf(".")));
      vNameValues.add(value);
      vBarGraphData.setDataCounts(vNameValues);
      vBarGraphData.setName(xAxisField);
      vBarGraphDatas.add(vBarGraphData);
      dataList.setGraphData(vBarGraphDatas);
      return convertObjToString(dataList);
    }
 catch (    SolrException|SolrServerException|IOException e) {
    }
  }
  return null;
}
