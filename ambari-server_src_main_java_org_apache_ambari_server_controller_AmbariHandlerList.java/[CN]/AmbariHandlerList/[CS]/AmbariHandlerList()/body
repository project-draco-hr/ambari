{
  super(true);
  this.handlerFactory=new HandlerFactory(){
    @Override public Handler create(    ViewInstanceEntity viewInstanceDefinition,    String webApp,    String contextPath){
      WebAppContext context=new WebAppContext(webApp,contextPath);
      context.setClassLoader(viewInstanceDefinition.getViewEntity().getClassLoader());
      context.setAttribute(ViewContext.CONTEXT_ATTRIBUTE,new ViewContextImpl(viewInstanceDefinition,viewRegistry));
      context.setSessionHandler(new SharedSessionHandler(sessionManager));
      context.getServletContext().setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,springWebAppContext);
      context.addFilter(new FilterHolder(springSecurityFilter),"/*",1);
      return context;
    }
  }
;
}
