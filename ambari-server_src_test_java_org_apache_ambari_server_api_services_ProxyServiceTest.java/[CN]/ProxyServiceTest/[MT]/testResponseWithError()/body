{
  ProxyService ps=new ProxyService();
  URLStreamProvider streamProviderMock=PowerMock.createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnectionMock=createMock(HttpURLConnection.class);
  MultivaluedMap<String,String> queryParams=new MultivaluedMapImpl();
  queryParams.add("url","testurl");
  expect(getUriInfo().getQueryParameters()).andReturn(queryParams);
  expect(streamProviderMock.processURL("testurl","GET",null,APPLICATION_FORM_URLENCODED)).andReturn(urlConnectionMock);
  expect(urlConnectionMock.getResponseCode()).andReturn(405).times(2);
  PowerMock.expectNew(URLStreamProvider.class,3000,1000,null,null,null).andReturn(streamProviderMock);
  PowerMock.replay(streamProviderMock,URLStreamProvider.class);
  replay(getUriInfo(),urlConnectionMock);
  ps.processGetRequestForwarding(getHttpHeaders(),getUriInfo());
}
