def installAndConfigAction(self, action):
    w = self.writeFileAction(action)
    commandResult = {}
    if (w['exitCode'] != 0):
        commandResult['output'] = out
        commandResult['error'] = err
        commandResult['exitCode'] = exitCode
        r['commandResult'] = commandResult
        return r
    r = self.sh.run(action['command'])
    if (r['exitCode'] != 0):
        commandResult['output'] = out
        commandResult['error'] = err
    else:
        installScriptHash = action['id']
    commandResult['exitCode'] = r['exitCode']
    r['commandResult'] = commandResult
    return r
