def test_configure_default(self):
    self.executeScript((self.COMMON_SERVICES_PACKAGE_DIR + '/scripts/kafka_broker.py'), classname='KafkaBroker', command='configure', config_file='default.json', hdp_stack_version=self.STACK_VERSION, target=RMFTestCase.TARGET_COMMON_SERVICES)
    self.assertResourceCalled('Directory', '/var/log/kafka', owner='kafka', group='hadoop', recursive=True, mode=493, cd_access='a')
    self.assertResourceCalled('Directory', '/var/run/kafka', owner='kafka', group='hadoop', recursive=True, mode=493, cd_access='a')
    self.assertResourceCalled('Directory', '/usr/hdp/current/kafka-broker/config', owner='kafka', group='hadoop', recursive=True, mode=493, cd_access='a')
    self.assertResourceCalled('Execute', ('chown', '-R', u'kafka:hadoop', u'/var/log/kafka'), sudo=True)
    self.assertResourceCalled('Execute', ('chown', '-R', u'kafka:hadoop', u'/var/run/kafka'), sudo=True)
    self.assertResourceCalled('Execute', ('chown', '-R', u'kafka:hadoop', '/usr/hdp/current/kafka-broker/config'), sudo=True)
    self.assertResourceCalled('Directory', '/tmp/log/dir', owner='kafka', recursive=True, group='hadoop', mode=493, cd_access='a')
    self.assertResourceCalled('Execute', ('chown', '-R', u'kafka:hadoop', u'/tmp/log/dir'), sudo=True)
