{
  Class<?> eventClass=event.getType().getDeclaringClass();
  if (eventClass.equals(ClusterEventType.class)) {
    ClusterEvent cevent=(ClusterEvent)event;
    ((EventHandler<ClusterEvent>)cevent.getCluster()).handle(cevent);
  }
 else   if (eventClass.equals(ServiceEventType.class)) {
    ServiceEvent sevent=(ServiceEvent)event;
    ((EventHandler<ServiceEvent>)sevent.getService()).handle(sevent);
  }
 else   if (eventClass.equals(RoleEventType.class)) {
    RoleEvent revent=(RoleEvent)event;
    ((EventHandler<RoleEvent>)revent.getRole()).handle(revent);
  }
 else {
    throw new UnsupportedOperationException("invalid event class: " + eventClass);
  }
}
