def set_env(self, kafka_conf_dir):
    command = ['bash', '-c', (('source ' + kafka_conf_dir) + '/kafka-env.sh && env')]
    proc = subprocess.Popen(command, stdout=subprocess.PIPE)
    for line in proc.stdout:
        (key, _, value) = line.partition('=')
        os.environ[key] = value.replace('\n', '')
    proc.communicate()
