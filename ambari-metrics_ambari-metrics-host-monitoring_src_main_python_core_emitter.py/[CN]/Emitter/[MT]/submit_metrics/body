def submit_metrics(self):
    retry_count = 0
    while (retry_count < self.MAX_RETRY_COUNT):
        json_data = self.application_metric_map.flatten()
        if (json_data is None):
            logger.info('Nothing to emit, resume waiting.')
            break
        pass
        response = self.push_metrics(json_data)
        if (response and (response.getcode() == 200)):
            retry_count = self.MAX_RETRY_COUNT
            self.application_metric_map.clear()
        else:
            logger.warn('Error sending metrics to server. Retrying after {0} ...'.format(self.RETRY_SLEEP_INTERVAL))
            retry_count += 1
            time.sleep(self.RETRY_SLEEP_INTERVAL)
        pass
    pass
