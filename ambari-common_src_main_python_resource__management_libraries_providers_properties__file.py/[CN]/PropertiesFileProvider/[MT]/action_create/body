def action_create(self):
    filename = self.resource.filename
    dir = self.resource.dir
    if (dir == None):
        filepath = filename
    else:
        filepath = os.path.join(dir, filename)
    config_content = InlineTemplate('# Generated by Apache Ambari. {{time.asctime(time.localtime())}}\n    {% for key, value in properties_dict|dictsort %}\n{{key}}{{key_value_delimiter}}{{value}}{% endfor %}\n    ', extra_imports=[time], properties_dict=self.resource.properties, key_value_delimiter=self.resource.key_value_delimiter)
    Logger.info(format('Generating properties file: {filepath}'))
    with Environment.get_instance_copy() as env:
        File(format('{filepath}'), content=config_content, owner=self.resource.owner, group=self.resource.group, mode=self.resource.mode)
