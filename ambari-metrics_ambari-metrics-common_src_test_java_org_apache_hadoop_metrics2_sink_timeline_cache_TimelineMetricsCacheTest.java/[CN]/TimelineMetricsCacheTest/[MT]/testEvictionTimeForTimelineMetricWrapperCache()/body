{
  int maxEvictionTime=10;
  TimelineMetricsCache timelineMetricsCache=new TimelineMetricsCache(TimelineMetricsCache.MAX_RECS_PER_NAME_DEFAULT,maxEvictionTime);
  int numberOfMetricsInserted=1000;
  for (int i=0; i < numberOfMetricsInserted; i++) {
    timelineMetricsCache.putTimelineMetric(createTimelineMetricSingleValue(DEFAULT_START_TIME + maxEvictionTime * i));
  }
  TimelineMetric cachedMetric=timelineMetricsCache.getTimelineMetric(METRIC_NAME);
  assertNotNull(cachedMetric);
  assertTrue("Some metric values should have been removed",cachedMetric.getMetricValues().size() < numberOfMetricsInserted);
}
