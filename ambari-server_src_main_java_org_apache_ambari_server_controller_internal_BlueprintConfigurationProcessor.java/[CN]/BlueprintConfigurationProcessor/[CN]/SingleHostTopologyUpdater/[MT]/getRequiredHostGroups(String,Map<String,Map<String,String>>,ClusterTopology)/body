{
  Matcher m=HOSTGROUP_REGEX.matcher(origValue);
  if (m.find()) {
    String hostGroupName=m.group(1);
    return Collections.singleton(hostGroupName);
  }
 else {
    Collection<String> matchingGroups=topology.getHostGroupsForComponent(component);
    int matchingGroupCount=matchingGroups.size();
    if (matchingGroupCount == 1) {
      return Collections.singleton(matchingGroups.iterator().next());
    }
 else {
      Cardinality cardinality=topology.getBlueprint().getStack().getCardinality(component);
      if (matchingGroupCount == 0 && cardinality.isValidCount(0)) {
        return Collections.emptySet();
      }
 else {
        if (topology.isNameNodeHAEnabled() && isComponentNameNode() && (matchingGroupCount == 2)) {
          if (properties.containsKey("core-site") && properties.get("core-site").get("fs.defaultFS").equals(origValue)) {
            return Collections.emptySet();
          }
          if (properties.containsKey("hbase-site") && properties.get("hbase-site").get("hbase.rootdir").equals(origValue)) {
            return Collections.emptySet();
          }
          if (properties.containsKey("accumulo-site") && properties.get("accumulo-site").get("instance.volumes").equals(origValue)) {
            return Collections.emptySet();
          }
          if (!origValue.contains("localhost")) {
            return Collections.emptySet();
          }
        }
        if (topology.isNameNodeHAEnabled() && isComponentSecondaryNameNode() && (matchingGroupCount == 0)) {
          return Collections.emptySet();
        }
        if (topology.isYarnResourceManagerHAEnabled() && isComponentResourceManager() && (matchingGroupCount == 2)) {
          if (!origValue.contains("localhost")) {
            return Collections.emptySet();
          }
        }
        if ((isOozieServerHAEnabled(properties)) && isComponentOozieServer() && (matchingGroupCount > 1)) {
          if (!origValue.contains("localhost")) {
            return Collections.emptySet();
          }
        }
        if ((isHiveServerHAEnabled(properties)) && isComponentHiveServer() && (matchingGroupCount > 1)) {
          if (!origValue.contains("localhost")) {
            return Collections.emptySet();
          }
        }
        if ((isComponentHiveMetaStoreServer()) && matchingGroupCount > 1) {
          if (!origValue.contains("localhost")) {
            return Collections.emptySet();
          }
        }
        throw new IllegalArgumentException("Unable to update configuration property with topology information. " + "Component '" + component + "' is not mapped to any host group or is mapped to multiple groups.");
      }
    }
  }
}
