{
  for (  Map.Entry<String,Map<String,PropertyUpdater>> entry : updaters.entrySet()) {
    String type=entry.getKey();
    for (    String propertyName : entry.getValue().keySet()) {
      boolean matchedHost=false;
      Map<String,String> typeProperties=properties.get(type);
      if (typeProperties != null && typeProperties.containsKey(propertyName)) {
        String propValue=typeProperties.get(propertyName);
        for (        HostGroup group : hostGroups) {
          Collection<String> hosts=group.getHostInfo();
          for (          String host : hosts) {
            if (propValue.contains(host)) {
              matchedHost=true;
              typeProperties.put(propertyName,propValue.replace(host,"%HOSTGROUP::" + group.getName() + "%"));
              break;
            }
          }
          if (matchedHost) {
            break;
          }
        }
        if (!matchedHost) {
          typeProperties.remove(propertyName);
        }
      }
    }
  }
}
