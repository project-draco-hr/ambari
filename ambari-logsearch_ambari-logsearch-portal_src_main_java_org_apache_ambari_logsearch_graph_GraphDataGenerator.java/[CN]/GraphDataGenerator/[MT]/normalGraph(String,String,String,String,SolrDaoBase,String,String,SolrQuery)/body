{
  VBarDataList dataList=new VBarDataList();
  Collection<VBarGraphData> vBarGraphDatas=new ArrayList<VBarGraphData>();
  VBarGraphData vBarGraphData=new VBarGraphData();
  Collection<VNameValue> vNameValues=new ArrayList<VNameValue>();
  queryGenerator.setMainQuery(solrQuery,null);
  queryGenerator.setSingleIncludeFilter(solrQuery,fieldTime,"[" + from + " TO "+ to+ "]");
  if (typeXAxis.contains("string") || typeXAxis.contains("key_lower_case") || typeXAxis.contains("text")) {
    queryGenerator.setFacetField(solrQuery,xAxisField);
    try {
      QueryResponse response=solrDaoBase.process(solrQuery);
      if (response != null && response.getResults() != null) {
        long count=response.getResults().getNumFound();
        if (count > 0) {
          FacetField facetField=response.getFacetField(xAxisField);
          if (facetField != null) {
            List<Count> countValues=facetField.getValues();
            if (countValues != null) {
              for (              Count countValue : countValues) {
                if (countValue != null) {
                  VNameValue vNameValue=new VNameValue();
                  vNameValue.setName(countValue.getName());
                  vNameValue.setValue("" + countValue.getCount());
                  vNameValues.add(vNameValue);
                }
              }
            }
            vBarGraphData.setName(xAxisField);
            vBarGraphDatas.add(vBarGraphData);
            dataList.setGraphData(vBarGraphDatas);
          }
        }
      }
      if (xAxisField.equalsIgnoreCase(LogSearchConstants.SOLR_LEVEL)) {
        List<String> logLevels=new ArrayList<String>();
        logLevels.add(LogSearchConstants.FATAL);
        logLevels.add(LogSearchConstants.ERROR);
        logLevels.add(LogSearchConstants.WARN);
        logLevels.add(LogSearchConstants.INFO);
        logLevels.add(LogSearchConstants.DEBUG);
        logLevels.add(LogSearchConstants.TRACE);
        Collection<VNameValue> sortedVNameValues=new ArrayList<VNameValue>();
        for (        String level : logLevels) {
          VNameValue value=new VNameValue();
          value.setName(level);
          String val="0";
          for (          VNameValue valueLevel : vNameValues) {
            if (valueLevel.getName().equalsIgnoreCase(level)) {
              val=valueLevel.getValue();
              break;
            }
          }
          value.setValue(val);
          sortedVNameValues.add(value);
        }
        vBarGraphData.setDataCounts(sortedVNameValues);
      }
 else {
        vBarGraphData.setDataCounts(vNameValues);
      }
      return dataList;
    }
 catch (    SolrException|SolrServerException|IOException e) {
      String query=solrQuery != null ? solrQuery.toQueryString() : "";
      logger.error("Got exception for solr query :" + query,e.getCause());
    }
  }
 else {
    queryGenerator.setRowCount(solrQuery,0);
    String yAxis=yAxisField.contains("count") ? "sum" : yAxisField;
    String jsonQuery=queryGenerator.buildJSONFacetAggregatedFuncitonQuery(yAxis,xAxisField);
    queryGenerator.setJSONFacet(solrQuery,jsonQuery);
    try {
      QueryResponse response=solrDaoBase.process(solrQuery);
      SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
      if (jsonFacetResponse.toString().equals("{count=0}")) {
        return dataList;
      }
      VNameValue value=new VNameValue();
      String sum=(String)jsonFacetResponse.getVal(1);
      value.setName(xAxisField);
      value.setValue(sum != null ? sum.substring(0,sum.indexOf(".")) : "");
      vNameValues.add(value);
      vBarGraphData.setDataCounts(vNameValues);
      vBarGraphData.setName(xAxisField);
      vBarGraphDatas.add(vBarGraphData);
      dataList.setGraphData(vBarGraphDatas);
      return dataList;
    }
 catch (    SolrException|SolrServerException|IOException e) {
      String query=solrQuery != null ? solrQuery.toQueryString() : "";
      logger.error("Got exception for solr query :" + query,e.getCause());
    }
  }
  return null;
}
