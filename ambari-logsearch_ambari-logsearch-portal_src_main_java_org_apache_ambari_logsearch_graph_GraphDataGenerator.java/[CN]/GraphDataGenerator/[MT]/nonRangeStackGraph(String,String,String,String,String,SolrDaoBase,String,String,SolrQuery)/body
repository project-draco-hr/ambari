{
  VBarDataList dataList=new VBarDataList();
  Collection<VBarGraphData> vGraphData=new ArrayList<VBarGraphData>();
  String mainQuery=queryGenerator.buildInclusiveRangeFilterQuery(fieldTime,from,to);
  queryGenerator.setMainQuery(solrQuery,mainQuery);
  queryGenerator.setFacetSort(solrQuery,LogSearchConstants.FACET_INDEX);
  String jsonQuery="";
  if (isTypeNumber(typeXAxis)) {
    String function=(yAxisField.contains("count")) ? "sum" : yAxisField;
    jsonQuery=queryGenerator.buidlJSONFacetRangeQueryForNumber(stackField,xAxisField,function);
  }
 else {
    jsonQuery=queryGenerator.buildJsonFacetTermsRangeQuery(stackField,xAxisField);
  }
  try {
    queryGenerator.setJSONFacet(solrQuery,jsonQuery);
    dataList.setGraphData(vGraphData);
    QueryResponse response=solrDaoBase.process(solrQuery);
    if (response == null) {
      response=new QueryResponse();
    }
    Long count=response.getResults().getNumFound();
    if (count <= 0) {
      return dataList;
    }
    SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
    if (jsonFacetResponse == null || jsonFacetResponse.toString().equals("{count=0}")) {
      return dataList;
    }
    extractNonRangeStackValuesFromBucket(jsonFacetResponse,stackField,vGraphData,typeXAxis);
    if (LogSearchConstants.SOLR_LEVEL.equalsIgnoreCase(stackField) && LogSearchConstants.SOLR_LEVEL.equalsIgnoreCase(xAxisField)) {
      Collection<VBarGraphData> levelVGraphData=dataList.getGraphData();
      List<String> logLevels=new ArrayList<String>();
      logLevels.add(LogSearchConstants.FATAL);
      logLevels.add(LogSearchConstants.ERROR);
      logLevels.add(LogSearchConstants.WARN);
      logLevels.add(LogSearchConstants.INFO);
      logLevels.add(LogSearchConstants.DEBUG);
      logLevels.add(LogSearchConstants.TRACE);
      for (      VBarGraphData garphData : levelVGraphData) {
        Collection<VNameValue> valueList=garphData.getDataCount();
        Collection<VNameValue> valueListSorted=new ArrayList<VNameValue>();
        for (        String level : logLevels) {
          String val="0";
          for (          VNameValue value : valueList) {
            if (value.getName().equalsIgnoreCase(level)) {
              val=value.getValue();
              break;
            }
          }
          VNameValue v1=new VNameValue();
          v1.setName(level.toUpperCase());
          v1.setValue(val);
          valueListSorted.add(v1);
        }
        garphData.setDataCounts(valueListSorted);
      }
    }
    return dataList;
  }
 catch (  SolrException|IOException|SolrServerException e) {
    String query=solrQuery != null ? solrQuery.toQueryString() : "";
    logger.error("Got exception for solr query :" + query,e.getCause());
    throw restErrorUtil.createRESTException(MessageEnums.DATA_NOT_FOUND.getMessage().getMessage(),MessageEnums.DATA_NOT_FOUND);
  }
}
