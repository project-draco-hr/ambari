def test_read_host_check_file_with_content(self):
    out = StringIO.StringIO()
    sys.stdout = out
    tmpfile = tempfile.mktemp()
    f = open(tmpfile, 'w')
    fileContent = '[processes]\nproc_list = 323,434\n\n[users]\nusr_list = rrdcached,ambari-qa,hive,oozie,hbase,hcat,mysql,mapred,hdfs,zookeeper,sqoop,nagios\n\n[repositories]\nrepo_list = HDP-1.3.0,HDP-epel\n\n[directories]\ndir_list = /etc/hadoop,/etc/hbase,/etc/hcatalog,/tmp/hive,/tmp/nagios,/var/nagios\n\n[alternatives]\nsymlink_list = hcatalog-conf,hadoop-default,hadoop-log,oozie-conf\ntarget_list = /etc/hcatalog/conf.dist,/usr/share/man/man1/hadoop.1.gz,/etc/oozie/conf.dist,/usr/lib/hadoop\n\n[packages]\npkg_list = sqoop.noarch,hadoop-libhdfs.x86_64,rrdtool.x86_64,ganglia-gmond.x86_64\n\n[metadata]\ncreated = 2013-07-02 20:39:22.162757'
    f.write(fileContent)
    f.close()
    propMap = self.hostcleanup.read_host_check_file(tmpfile)
    self.assertTrue(('323' in propMap['processes']))
    self.assertTrue(('mysql' in propMap['users']))
    self.assertTrue(('HDP-epel' in propMap['repositories']))
    self.assertTrue(('/etc/hadoop' in propMap['directories']))
    self.assertTrue(('hcatalog-conf' in propMap['alternatives']['symlink_list']))
    self.assertTrue(('/etc/oozie/conf.dist' in propMap['alternatives']['target_list']))
    self.assertTrue(('hadoop-libhdfs.x86_64' in propMap['packages']))
    sys.stdout = sys.__stdout__
