{
  String service=execution.service;
  String component=execution.component;
  String id=execution.id;
  Task task=execution.task;
  if (Task.Type.MANUAL == task.getType() && null != id && id.equals("unhealthy-hosts")) {
    if (ctx.getUnhealthy().isEmpty()) {
      return null;
    }
    ManualTask mt=(ManualTask)task;
    fillHostDetails(mt,ctx.getUnhealthy());
  }
  Set<String> realHosts=Collections.emptySet();
  if (null != service && !service.isEmpty() && null != component && !component.isEmpty()) {
    HostsType hosts=ctx.getResolver().getMasterAndHosts(service,component);
    if (null == hosts || hosts.hosts.isEmpty()) {
      return null;
    }
 else {
      realHosts=new LinkedHashSet<String>(hosts.hosts);
    }
  }
  if (Task.Type.MANUAL == task.getType()) {
    return new StageWrapper(StageWrapper.Type.SERVER_SIDE_ACTION,execution.title,new TaskWrapper(service,component,realHosts,task));
  }
 else {
    return new StageWrapper(StageWrapper.Type.SERVER_SIDE_ACTION,execution.title,new TaskWrapper(null,null,Collections.<String>emptySet(),task));
  }
}
