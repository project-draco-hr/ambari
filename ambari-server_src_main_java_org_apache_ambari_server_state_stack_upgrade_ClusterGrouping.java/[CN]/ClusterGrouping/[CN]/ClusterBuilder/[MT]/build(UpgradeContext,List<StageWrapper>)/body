{
  if (null == executionStages) {
    return stageWrappers;
  }
  List<StageWrapper> results=new ArrayList<StageWrapper>(stageWrappers);
  if (executionStages != null) {
    for (    ExecuteStage execution : executionStages) {
      if (null != execution.intendedDirection && execution.intendedDirection != upgradeContext.getDirection()) {
        continue;
      }
      Task task=execution.task;
      StageWrapper wrapper=null;
switch (task.getType()) {
case MANUAL:
        wrapper=getManualStageWrapper(upgradeContext,execution);
      break;
case SERVER_ACTION:
    wrapper=new StageWrapper(StageWrapper.Type.SERVER_SIDE_ACTION,execution.title,new TaskWrapper(null,null,Collections.<String>emptySet(),task));
  break;
case EXECUTE:
wrapper=getExecuteStageWrapper(upgradeContext,execution);
break;
default :
break;
}
if (null != wrapper) {
results.add(wrapper);
}
}
}
return results;
}
