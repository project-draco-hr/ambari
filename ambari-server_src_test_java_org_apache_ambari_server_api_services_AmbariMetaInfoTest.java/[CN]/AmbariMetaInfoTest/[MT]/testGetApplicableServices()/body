{
  StackExtensionHelper helper=new StackExtensionHelper(metaInfo.getStackRoot());
  List<ServiceInfo> allServices=helper.getAllApplicableServices(metaInfo.getStackInfo(STACK_NAME_HDP,EXT_STACK_NAME));
  ServiceInfo testService=null;
  ServiceInfo existingService=null;
  for (  ServiceInfo serviceInfo : allServices) {
    if (serviceInfo.getName().equals("YARN")) {
      testService=serviceInfo;
    }
 else     if (serviceInfo.getName().equals("MAPREDUCE2")) {
      existingService=serviceInfo;
    }
  }
  Assert.assertNotNull(testService);
  Assert.assertNotNull(existingService);
  PropertyInfo testProperty=null;
  PropertyInfo existingProperty=null;
  for (  PropertyInfo property : testService.getProperties()) {
    if (property.getName().equals("new-yarn-property")) {
      testProperty=property;
    }
  }
  for (  PropertyInfo property : existingService.getProperties()) {
    if (property.getName().equals("mapreduce.map.log.level")) {
      existingProperty=property;
    }
  }
  Assert.assertNotNull(testProperty);
  Assert.assertEquals("some-value",testProperty.getValue());
  Assert.assertNotNull(existingProperty);
  Assert.assertEquals("INFO",existingProperty.getValue());
}
