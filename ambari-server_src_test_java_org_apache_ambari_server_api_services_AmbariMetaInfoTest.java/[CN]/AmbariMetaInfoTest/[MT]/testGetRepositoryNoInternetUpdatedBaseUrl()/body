{
  String buildDir=tmpFolder.getRoot().getAbsolutePath();
  AmbariMetaInfo ambariMetaInfo=setupTempAmbariMetaInfo(buildDir);
  File latestUrlFile=new File(buildDir,"ambari-metaInfo/HDP/2.1.1/repos/hdp.json");
  FileUtils.deleteQuietly(latestUrlFile);
  assertTrue(!latestUrlFile.exists());
  String newBaseUrl="http://myprivate-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.6.0";
  ambariMetaInfo.updateRepoBaseURL("HDP","2.1.1","redhat6","HDP-2.1.1",newBaseUrl);
  RepositoryInfo repoInfo=ambariMetaInfo.getRepository(STACK_NAME_HDP,"2.1.1","redhat6",STACK_NAME_HDP + "-2.1.1");
  assertEquals(newBaseUrl,repoInfo.getBaseUrl());
  ambariMetaInfo.init();
  List<RepositoryInfo> redhat6Repo=ambariMetaInfo.getRepositories(STACK_NAME_HDP,"2.1.1","redhat6");
  assertNotNull(redhat6Repo);
  for (  RepositoryInfo ri : redhat6Repo) {
    if (STACK_NAME_HDP.equals(ri.getRepoName())) {
      assertEquals(newBaseUrl,ri.getBaseUrl());
      assertFalse(ri.getDefaultBaseUrl().equals(ri.getBaseUrl()));
    }
  }
}
