{
  StringBuilder sb=new StringBuilder();
  boolean appendConjunction=false;
  StringBuilder metricsLike=new StringBuilder();
  StringBuilder metricsIn=new StringBuilder();
  if (getMetricNames() != null) {
    for (    String name : getMetricNames()) {
      if (name.contains("%")) {
        if (metricsLike.length() > 1) {
          metricsLike.append(" OR ");
        }
        metricsLike.append("METRIC_NAME LIKE ?");
      }
 else {
        if (metricsIn.length() > 0) {
          metricsIn.append(", ");
        }
        metricsIn.append("?");
      }
    }
    if (metricsIn.length() > 0) {
      sb.append("(METRIC_NAME IN (");
      sb.append(metricsIn);
      sb.append(")");
      appendConjunction=true;
    }
    if (metricsLike.length() > 0) {
      if (appendConjunction) {
        sb.append(" OR ");
      }
 else {
        sb.append("(");
      }
      sb.append(metricsLike);
      appendConjunction=true;
    }
    if (appendConjunction) {
      sb.append(")");
    }
  }
  if (hostnames != null && getHostnames().size() > 1) {
    StringBuilder hostnamesCondition=new StringBuilder();
    for (    String hostname : getHostnames()) {
      if (hostnamesCondition.length() > 0) {
        hostnamesCondition.append(" ,");
      }
 else {
        hostnamesCondition.append(" HOSTNAME IN (");
      }
      hostnamesCondition.append('?');
    }
    hostnamesCondition.append(')');
    appendConjunction=append(sb,appendConjunction,getHostnames(),hostnamesCondition.toString());
  }
 else {
    appendConjunction=append(sb,appendConjunction,getHostnames()," HOSTNAME = ?");
  }
  appendConjunction=append(sb,appendConjunction,getAppId()," APP_ID = ?");
  appendConjunction=append(sb,appendConjunction,getInstanceId()," INSTANCE_ID = ?");
  appendConjunction=append(sb,appendConjunction,getStartTime()," SERVER_TIME >= ?");
  append(sb,appendConjunction,getEndTime()," SERVER_TIME < ?");
  return sb;
}
