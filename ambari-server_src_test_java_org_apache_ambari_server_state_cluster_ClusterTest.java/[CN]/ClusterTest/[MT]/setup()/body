{
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  configGroupFactory=injector.getInstance(ConfigGroupFactory.class);
  serviceComponentFactory=injector.getInstance(ServiceComponentFactory.class);
  serviceComponentHostFactory=injector.getInstance(ServiceComponentHostFactory.class);
  configFactory=injector.getInstance(ConfigFactory.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  helper=injector.getInstance(OrmTestHelper.class);
  stackDAO=injector.getInstance(StackDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  clusterVersionDAO=injector.getInstance(ClusterVersionDAO.class);
  hostVersionDAO=injector.getInstance(HostVersionDAO.class);
  hostComponentStateDAO=injector.getInstance(HostComponentStateDAO.class);
  repositoryVersionDAO=injector.getInstance(RepositoryVersionDAO.class);
  gson=injector.getInstance(Gson.class);
  injector.getInstance(UnitOfWork.class).begin();
}
