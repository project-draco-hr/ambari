{
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  String groupName="Group Name " + System.currentTimeMillis();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  group.setGroupName(groupName + "FOO");
  group.setDefault(true);
  m_dao.merge(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertEquals(groupName + "FOO",group.getGroupName());
  assertEquals(true,group.isDefault());
  assertEquals(0,group.getAlertDefinitions().size());
  assertEquals(0,group.getAlertTargets().size());
  group.addAlertTarget(target);
  m_dao.merge(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertEquals(targets,group.getAlertTargets());
}
