{
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),targets);
  AlertGroupEntity actual=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(group.getGroupName(),actual.getGroupName());
  assertEquals(group.isDefault(),actual.isDefault());
  assertEquals(group.getAlertTargets(),actual.getAlertTargets());
  assertEquals(group.getAlertDefinitions(),actual.getAlertDefinitions());
  AlertGroupEntity group1=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  String groupName=group1.getGroupName();
  group1=m_dao.findGroupById(group1.getGroupId());
  group1.setGroupName(groupName + "FOO");
  group1.setDefault(true);
  m_dao.merge(group1);
  group=m_dao.findGroupById(group1.getGroupId());
  assertEquals(groupName + "FOO",group1.getGroupName());
  assertEquals(true,group1.isDefault());
  assertEquals(0,group1.getAlertDefinitions().size());
  assertEquals(0,group1.getAlertTargets().size());
  group1.addAlertTarget(target);
  m_dao.merge(group);
  group1=m_dao.findGroupById(group1.getGroupId());
  assertEquals(targets,group1.getAlertTargets());
  m_dao.remove(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertNull(group);
  target=m_dao.findTargetById(target.getTargetId());
  assertNotNull(target);
  assertEquals(1,m_dao.findAllTargets().size());
}
