{
  logger.info("Close called for outputs ...");
  for (  Output output : outputList) {
    try {
      output.setDrain(true);
      output.close();
    }
 catch (    Exception e) {
    }
  }
  int iterations=30;
  int waitTimeMS=1000;
  int i;
  boolean allClosed=true;
  for (i=0; i < iterations; i++) {
    allClosed=true;
    for (    Output output : outputList) {
      if (!output.isClosed()) {
        try {
          allClosed=false;
          logger.warn("Waiting for output to close. " + output.getShortDescription() + ", "+ (iterations - i)+ " more seconds");
          Thread.sleep(waitTimeMS);
        }
 catch (        Throwable t) {
        }
      }
    }
    if (allClosed) {
      break;
    }
  }
  if (!allClosed) {
    logger.warn("Some outpus were not closed. Iterations=" + i);
    for (    Output output : outputList) {
      if (!output.isClosed()) {
        logger.warn("Output not closed. Will ignore it." + output.getShortDescription() + ", pendingCound="+ output.getPendingCount());
      }
    }
  }
 else {
    logger.info("All outputs are closed. Iterations=" + i);
  }
}
