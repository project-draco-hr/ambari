{
  String deafalutValue="0";
  VBarDataList dataList=new VBarDataList();
  SolrQuery solrQuery=queryGenerator.commonServiceFilterQuery(searchCriteria);
  solrQuery.set("event","/audit/logs/histogram");
  String from=getFrom((String)searchCriteria.getParamValue("from"));
  String to=getTo((String)searchCriteria.getParamValue("to"));
  String unit=getUnit((String)searchCriteria.getParamValue("unit"));
  List<VBarGraphData> histogramData=new ArrayList<VBarGraphData>();
  String jsonHistogramQuery=queryGenerator.buildJSONFacetTermTimeRangeQuery(LogSearchConstants.SOLR_LEVEL,LogSearchConstants.LOGTIME,from,to,unit).replace("\\","");
  try {
    SolrUtil.setJSONFacet(solrQuery,jsonHistogramQuery);
    SolrUtil.setRowCount(solrQuery,Integer.parseInt(deafalutValue));
    QueryResponse response=serviceLogsSolrDao.process(solrQuery);
    if (response == null) {
      return convertObjToString(dataList);
    }
    SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
    if (jsonFacetResponse == null || jsonFacetResponse.toString().equals("{count=0}")) {
      return convertObjToString(dataList);
    }
    extractValuesFromBuckets(jsonFacetResponse,"x","y",histogramData);
    Collection<VNameValue> vNameValues=new ArrayList<VNameValue>();
    List<VBarGraphData> graphDatas=new ArrayList<VBarGraphData>();
    for (    String level : LogSearchConstants.SUPPORTED_LOG_LEVEL) {
      boolean isLevelPresent=false;
      VBarGraphData vData1=null;
      for (      VBarGraphData vData2 : histogramData) {
        String name=vData2.getName();
        if (level.contains(name)) {
          isLevelPresent=true;
          vData1=vData2;
          break;
        }
        if (vNameValues.isEmpty()) {
          Collection<VNameValue> vNameValues2=vData2.getDataCount();
          for (          VNameValue value : vNameValues2) {
            VNameValue value2=new VNameValue();
            value2.setValue(deafalutValue);
            value2.setName(value.getName());
            vNameValues.add(value2);
          }
        }
      }
      if (!isLevelPresent) {
        VBarGraphData vBarGraphData=new VBarGraphData();
        vBarGraphData.setName(level);
        vBarGraphData.setDataCounts(vNameValues);
        graphDatas.add(vBarGraphData);
      }
 else {
        graphDatas.add(vData1);
      }
    }
    dataList.setGraphData(graphDatas);
    return convertObjToString(dataList);
  }
 catch (  SolrServerException|SolrException|IOException e) {
    logger.error(e);
    throw RESTErrorUtil.createRESTException(MessageEnums.SOLR_ERROR.getMessage().getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
