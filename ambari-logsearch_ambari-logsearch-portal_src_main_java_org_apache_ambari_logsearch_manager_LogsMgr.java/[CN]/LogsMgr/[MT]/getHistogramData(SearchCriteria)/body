{
  VBarDataList dataList=new VBarDataList();
  SolrQuery solrQuery=queryGenerator.commonFilterQuery(searchCriteria);
  solrQuery.set("event","/getHistogramData");
  String from=(String)searchCriteria.getParamValue("from");
  String to=(String)searchCriteria.getParamValue("to");
  String unit=(String)searchCriteria.getParamValue("unit");
  List<VBarGraphData> histogramData=new ArrayList<VBarGraphData>();
  List<String> logLevels=ConfigUtil.logLevels;
  String jsonHistogramQuery=queryGenerator.buildJSONFacetTermTimeRangeQuery(LogSearchConstants.SOLR_LEVEL,LogSearchConstants.LOGTIME,from,to,unit).replace("\\","");
  try {
    queryGenerator.setJSONFacet(solrQuery,jsonHistogramQuery);
    queryGenerator.setRowCount(solrQuery,0);
    QueryResponse response=serviceLogsSolrDao.process(solrQuery);
    if (response == null)     response=new QueryResponse();
    SimpleOrderedMap<Object> jsonFacetResponse=(SimpleOrderedMap<Object>)response.getResponse().get("facets");
    if (jsonFacetResponse == null || jsonFacetResponse.toString().equals("{count=0}"))     return convertObjToString(dataList);
    extractValuesFromBuckets(jsonFacetResponse,"x","y",histogramData);
    Collection<VNameValue> vNameValues=new ArrayList<VNameValue>();
    List<VBarGraphData> graphDatas=new ArrayList<VBarGraphData>();
    for (    String level : logLevels) {
      boolean isLevelPresent=false;
      VBarGraphData vData1=null;
      for (      VBarGraphData vData2 : histogramData) {
        String name=vData2.getName();
        if (level.contains(name)) {
          isLevelPresent=true;
          vData1=vData2;
          break;
        }
        if (vNameValues.isEmpty()) {
          Collection<VNameValue> vNameValues2=vData2.getDataCount();
          for (          VNameValue value : vNameValues2) {
            VNameValue value2=new VNameValue();
            value2.setValue("0");
            value2.setName(value.getName());
            vNameValues.add(value2);
          }
        }
      }
      if (!isLevelPresent) {
        VBarGraphData vBarGraphData=new VBarGraphData();
        vBarGraphData.setName(level);
        vBarGraphData.setDataCounts(vNameValues);
        graphDatas.add(vBarGraphData);
      }
 else {
        graphDatas.add(vData1);
      }
    }
    dataList.setGraphData(graphDatas);
    return convertObjToString(dataList);
  }
 catch (  SolrServerException|SolrException|IOException e) {
    logger.error(e);
    throw restErrorUtil.createRESTException(e.getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
