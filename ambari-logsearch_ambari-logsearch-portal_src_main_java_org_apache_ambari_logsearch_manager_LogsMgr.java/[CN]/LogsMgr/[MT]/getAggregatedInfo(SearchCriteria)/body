{
  SolrQuery solrQuery=queryGenerator.commonServiceFilterQuery(searchCriteria);
  String hierarchy="host,type,level";
  VGraphInfo graphInfo=new VGraphInfo();
  try {
    queryGenerator.setMainQuery(solrQuery,null);
    queryGenerator.setFacetPivot(solrQuery,1,hierarchy);
    QueryResponse response=serviceLogsSolrDao.process(solrQuery);
    if (response == null) {
      return convertObjToString(graphInfo);
    }
    List<List<PivotField>> hirarchicalPivotField=new ArrayList<List<PivotField>>();
    List<VGraphData> dataList=new ArrayList<VGraphData>();
    NamedList<List<PivotField>> namedList=response.getFacetPivot();
    if (namedList != null) {
      hirarchicalPivotField=namedList.getAll(hierarchy);
    }
    if (!hirarchicalPivotField.isEmpty()) {
      dataList=buidGraphData(hirarchicalPivotField.get(0));
    }
    if (!dataList.isEmpty()) {
      graphInfo.setGraphData(dataList);
    }
    return convertObjToString(graphInfo);
  }
 catch (  SolrException|SolrServerException|IOException e) {
    logger.error("Error during solrQuery=" + solrQuery,e);
    throw restErrorUtil.createRESTException(MessageEnums.SOLR_ERROR.getMessage().getMessage(),MessageEnums.ERROR_SYSTEM);
  }
}
