{
  List<VNode> extensionTree=new ArrayList<VNode>();
  String hostQuery=null;
  if (pivotFields != null) {
    for (    PivotField pivotHost : pivotFields) {
      if (pivotHost != null) {
        VNode hostNode=new VNode();
        String name=(pivotHost.getValue() == null ? "" : "" + pivotHost.getValue());
        String value="" + pivotHost.getCount();
        if (!stringUtil.isEmpty(name)) {
          hostNode.setName(name);
        }
        if (!stringUtil.isEmpty(value)) {
          hostNode.setValue(value);
        }
        if (!stringUtil.isEmpty(firstPriority)) {
          hostNode.setType(firstPriority);
        }
        hostNode.setParent(true);
        hostNode.setRoot(true);
        PivotField hostPivot=null;
        for (        PivotField searchHost : pivotFieldHost) {
          if (!stringUtil.isEmpty(hostNode.getName()) && hostNode.getName().equals(searchHost.getValue())) {
            hostPivot=searchHost;
            break;
          }
        }
        List<PivotField> pivotLevelHost=hostPivot.getPivot();
        if (pivotLevelHost != null) {
          Collection<VNameValue> logLevelCount=new ArrayList<VNameValue>();
          for (          PivotField pivotLevel : pivotLevelHost) {
            if (pivotLevel != null) {
              VNameValue vnameValue=new VNameValue();
              String levelName=(pivotLevel.getValue() == null ? "" : "" + pivotLevel.getValue());
              vnameValue.setName(levelName.toUpperCase());
              vnameValue.setValue("" + pivotLevel.getCount());
              logLevelCount.add(vnameValue);
            }
          }
          hostNode.setLogLevelCount(logLevelCount);
        }
        query.addFilterQuery(hostQuery);
        List<PivotField> pivotComponents=pivotHost.getPivot();
        if (pivotComponents != null) {
          Collection<VNode> componentNodes=new ArrayList<VNode>();
          for (          PivotField pivotComp : pivotComponents) {
            if (pivotComp != null) {
              VNode compNode=new VNode();
              String compName=(pivotComp.getValue() == null ? "" : "" + pivotComp.getValue());
              compNode.setName(compName);
              if (!stringUtil.isEmpty(secondPriority)) {
                compNode.setType(secondPriority);
              }
              compNode.setValue("" + pivotComp.getCount());
              compNode.setParent(false);
              compNode.setRoot(false);
              List<PivotField> pivotLevels=pivotComp.getPivot();
              if (pivotLevels != null) {
                Collection<VNameValue> logLevelCount=new ArrayList<VNameValue>();
                for (                PivotField pivotLevel : pivotLevels) {
                  if (pivotLevel != null) {
                    VNameValue vnameValue=new VNameValue();
                    String compLevel=pivotLevel.getValue() == null ? "" : "" + pivotLevel.getValue();
                    vnameValue.setName((compLevel).toUpperCase());
                    vnameValue.setValue("" + pivotLevel.getCount());
                    logLevelCount.add(vnameValue);
                  }
                }
                compNode.setLogLevelCount(logLevelCount);
              }
              componentNodes.add(compNode);
            }
          }
          hostNode.setChilds(componentNodes);
        }
        extensionTree.add(hostNode);
      }
    }
  }
  return extensionTree;
}
