{
  Set<Map<String,Object>> requestProperties=createBlueprintRequestProperties(CLUSTER_NAME,BLUEPRINT_NAME);
  Map<String,Object> properties=requestProperties.iterator().next();
  expect(request.getProperties()).andReturn(requestProperties).anyTimes();
  expect(topologyFactory.createProvisionClusterRequest(properties)).andReturn(topologyRequest).once();
  expect(topologyManager.provisionCluster(topologyRequest)).andReturn(requestStatusResponse).once();
  expect(requestStatusResponse.getRequestId()).andReturn(5150L).anyTimes();
  replayAll();
  RequestStatus requestStatus=provider.createResources(request);
  assertEquals(5150L,requestStatus.getRequestResource().getPropertyValue(PropertyHelper.getPropertyId("Requests","id")));
  assertEquals(Resource.Type.Request,requestStatus.getRequestResource().getType());
  assertEquals("Accepted",requestStatus.getRequestResource().getPropertyValue(PropertyHelper.getPropertyId("Requests","status")));
  verifyAll();
}
