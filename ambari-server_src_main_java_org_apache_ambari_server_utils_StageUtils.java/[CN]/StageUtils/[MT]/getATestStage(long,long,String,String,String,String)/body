{
  Stage s=stageFactory.createNew(requestId,"/tmp","cluster1",1L,"context",clusterHostInfo,commandParamsStage,hostParamsStage);
  s.setStageId(stageId);
  long now=System.currentTimeMillis();
  s.addHostRoleExecutionCommand(hostname,Role.NAMENODE,RoleCommand.INSTALL,new ServiceComponentHostInstallEvent("NAMENODE",hostname,now,"HDP-1.2.0"),"cluster1","HDFS",false);
  ExecutionCommand execCmd=s.getExecutionCommandWrapper(hostname,"NAMENODE").getExecutionCommand();
  execCmd.setRequestAndStage(s.getRequestId(),s.getStageId());
  List<String> slaveHostList=new ArrayList<String>();
  slaveHostList.add(hostname);
  slaveHostList.add("host2");
  Map<String,String> hdfsSite=new TreeMap<String,String>();
  hdfsSite.put("dfs.block.size","2560000000");
  Map<String,Map<String,String>> configurations=new TreeMap<String,Map<String,String>>();
  configurations.put("hdfs-site",hdfsSite);
  execCmd.setConfigurations(configurations);
  Map<String,Map<String,Map<String,String>>> configurationAttributes=new TreeMap<String,Map<String,Map<String,String>>>();
  Map<String,Map<String,String>> hdfsSiteAttributes=new TreeMap<String,Map<String,String>>();
  Map<String,String> finalAttribute=new TreeMap<String,String>();
  finalAttribute.put("dfs.block.size","true");
  hdfsSiteAttributes.put("final",finalAttribute);
  configurationAttributes.put("hdfsSite",hdfsSiteAttributes);
  execCmd.setConfigurationAttributes(configurationAttributes);
  Map<String,String> params=new TreeMap<String,String>();
  params.put("jdklocation","/x/y/z");
  params.put("stack_version","1.2.0");
  params.put("stack_name","HDP");
  execCmd.setHostLevelParams(params);
  Map<String,String> roleParams=new TreeMap<String,String>();
  roleParams.put("format","false");
  execCmd.setRoleParams(roleParams);
  Map<String,String> commandParams=new TreeMap<String,String>();
  commandParams.put(ExecutionCommand.KeyNames.COMMAND_TIMEOUT,"600");
  execCmd.setCommandParams(commandParams);
  return s;
}
