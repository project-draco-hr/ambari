def pre_upgrade_restart(self, env, upgrade_type=None):
    import params
    env.set_params(params)
    upgrade.prestart(env, 'ranger-admin')
    if params.xml_configurations_supported:
        from setup_ranger_xml import ranger, setup_ranger_db, setup_java_patch
        ranger('ranger_admin', upgrade_type=upgrade_type)
        setup_ranger_db(upgrade_type=upgrade_type)
        setup_java_patch(upgrade_type=upgrade_type)
    self.set_ru_rangeradmin_in_progress(params.upgrade_marker_file)
