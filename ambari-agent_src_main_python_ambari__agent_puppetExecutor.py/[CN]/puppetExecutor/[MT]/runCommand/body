def runCommand(self, command, tmpoutfile, tmperrfile):
    result = {}
    taskId = 0
    if command.has_key('taskId'):
        taskId = command['taskId']
    puppetEnv = os.environ
    modulesdir = (self.puppetModule + '/modules')
    puppetFiles = self.deployRepos(command, self.tmpDir, modulesdir, taskId)
    siteppFileName = os.path.join(self.tmpDir, (('site-' + str(taskId)) + '.pp'))
    puppetFiles.append(siteppFileName)
    generateManifest(command, siteppFileName, modulesdir, self.config)
    for puppetFile in puppetFiles:
        self.runPuppetFile(puppetFile, result, puppetEnv, tmpoutfile, tmperrfile)
        if (not self.isSuccessfull(result['exitcode'])):
            break
    if self.isSuccessfull(result['exitcode']):
        self.reposInstalled = True
    logger.info(('ExitCode : ' + str(result['exitcode'])))
    return result
