{
  InputStream inputStream;
  resource=resource.queryParam("user.name",username).queryParam("doAs",doAs);
  if (doAs == null) {
    inputStream=context.getURLStreamProvider().readFrom(resource.toString(),method,body,headers);
  }
 else {
    inputStream=context.getURLStreamProvider().readAs(resource.toString(),method,body,headers,doAs);
  }
  return inputStream;
}
