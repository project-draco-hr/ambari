def action_create(self):
    with Environment.get_instance_copy() as env:
        repo_file_name = self.resource.repo_file_name
        repo_dir = repos_dirs[env.system.os_family]
        File(format('{repo_dir}/{repo_file_name}.repo'), content=InlineTemplate('[{{repo_id}}]\nname={{repo_file_name}}\n{% if mirror_list %}mirrorlist={{mirror_list}}{% else %}baseurl={{base_url}}{% endif %}\npath=/\nenabled=1\ngpgcheck=0', repo_id=self.resource.repo_id, repo_file_name=self.resource.repo_file_name, base_url=self.resource.base_url, mirror_list=self.resource.mirror_list))
