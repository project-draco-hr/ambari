{
  for (  TimelineMetric existingMetric : existingMetrics.getMetrics()) {
    if (removeAll) {
      existingMetric.setMetricValues(new TreeMap<Long,Double>());
    }
 else {
      Map<Long,Double> existingMetricValues=existingMetric.getMetricValues();
      LOG.trace("Existing metric: " + existingMetric.getMetricName() + " # "+ existingMetricValues.size());
      Iterator<Map.Entry<Long,Double>> valueIterator=existingMetricValues.entrySet().iterator();
      while (valueIterator.hasNext()) {
        Map.Entry<Long,Double> metricEntry=valueIterator.next();
        if (metricEntry.getKey() < requestedStartTime || metricEntry.getKey() > requestedEndTime) {
          valueIterator.remove();
        }
      }
    }
  }
}
