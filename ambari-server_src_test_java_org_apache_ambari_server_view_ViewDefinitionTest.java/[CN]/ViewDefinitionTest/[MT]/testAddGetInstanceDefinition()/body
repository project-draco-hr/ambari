{
  ViewDefinition viewDefinition=getViewDefinition();
  ViewInstanceDefinition definition=createNiceMock(ViewInstanceDefinition.class);
  expect(definition.getName()).andReturn("instance1");
  replay(definition);
  viewDefinition.addInstanceDefinition(definition);
  Assert.assertEquals(definition,viewDefinition.getInstanceDefinition("instance1"));
  Collection<ViewInstanceDefinition> definitions=viewDefinition.getInstanceDefinitions();
  Assert.assertEquals(1,definitions.size());
  Assert.assertTrue(definitions.contains(definition));
  verify(definition);
}
