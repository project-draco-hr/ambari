{
  ProviderModule providerModule=createNiceMock(ProviderModule.class);
  ResourceProvider resourceProvider=createNiceMock(ResourceProvider.class);
  expect(providerModule.getResourceProvider(Resource.Type.AlertHistory)).andReturn(resourceProvider).anyTimes();
  expect(resourceProvider.checkPropertyIds(Collections.singleton(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME))).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(resourceProvider.getResources(anyObject(Request.class),anyObject(Predicate.class))).andReturn(Collections.<Resource>emptySet()).anyTimes();
  PageRequest pageRequest=EasyMock.createStrictMock(PageRequest.class);
  replay(providerModule,resourceProvider,pageRequest);
  ClusterControllerImpl controller=new ClusterControllerImpl(providerModule);
  Set<String> propertyIds=new HashSet<String>();
  propertyIds.add(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME);
  Set<Resource> providerResources=new LinkedHashSet<Resource>();
  providerResources.add(createNiceMock(Resource.class));
  PageInfo pageInfo=new PageInfo(pageRequest);
  pageInfo.setResponsePaged(true);
  SortInfo sortInfo=null;
  Request request=PropertyHelper.getReadRequest(propertyIds,null,null,pageInfo,sortInfo);
  Predicate predicate=new PredicateBuilder().property(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME).equals("c6401.ambari.apache.org").toPredicate();
  PageResponse pageResponse=controller.getPage(Resource.Type.AlertHistory,providerResources,request,predicate,pageRequest,null);
  verify(providerModule,resourceProvider,pageRequest);
}
