{
  ProviderModule providerModule=createNiceMock(ProviderModule.class);
  ResourceProvider resourceProvider=createNiceMock(ResourceProvider.class);
  expect(providerModule.getResourceProvider(Resource.Type.AlertHistory)).andReturn(resourceProvider).anyTimes();
  expect(resourceProvider.checkPropertyIds(Collections.singleton(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME))).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(resourceProvider.getResources(anyObject(Request.class),anyObject(Predicate.class))).andReturn(Collections.<Resource>emptySet()).anyTimes();
  expect(resourceProvider.checkPropertyIds(EasyMock.anyObject(Set.class))).andReturn(new HashSet<String>()).anyTimes();
  PageRequest pageRequest=EasyMock.createStrictMock(PageRequest.class);
  SortRequest sortRequest=EasyMock.createStrictMock(SortRequest.class);
  expect(sortRequest.getPropertyIds()).andReturn(new ArrayList<String>()).atLeastOnce();
  replay(providerModule,resourceProvider,pageRequest,sortRequest);
  ClusterControllerImpl controller=new ClusterControllerImpl(providerModule);
  Set<String> propertyIds=new HashSet<String>();
  propertyIds.add(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME);
  Set<Resource> providerResources=new LinkedHashSet<Resource>();
  providerResources.add(new ResourceImpl(Resource.Type.AlertHistory));
  PageInfo pageInfo=new PageInfo(pageRequest);
  pageInfo.setResponsePaged(true);
  SortInfo sortInfo=new SortInfo(sortRequest);
  sortInfo.setResponseSorted(true);
  Request request=PropertyHelper.getReadRequest(propertyIds,null,null,pageInfo,sortInfo);
  Predicate predicate=new PredicateBuilder().property(AlertHistoryResourceProvider.ALERT_HISTORY_HOSTNAME).equals("c6401.ambari.apache.org").toPredicate();
  PageResponse pageResponse=controller.getPage(Resource.Type.AlertHistory,providerResources,request,predicate,pageRequest,sortRequest);
  verify(providerModule,resourceProvider,pageRequest,sortRequest);
}
