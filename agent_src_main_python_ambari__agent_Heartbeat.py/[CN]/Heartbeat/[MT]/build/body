def build(self, id='unknown'):
    global clusterId, clusterDefinitionRevision
    serverStatus = ServerStatus()
    timestamp = int((time.time() * 1000))
    heartbeat = {'responseId': id, 'timestamp': timestamp, 'hostname': socket.gethostname(), 'hardwareProfile': self.hardware.get(), 'actionResults': self.actionQueue.result(), 'installedRoleStates': serverStatus.build(), 'idle': self.actionQueue.isIdle(), }
    return heartbeat
