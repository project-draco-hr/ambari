{
  MetainfoDAO metainfoDAO=createMock(MetainfoDAO.class);
  MetainfoEntity metainfoEntity=new MetainfoEntity();
  metainfoEntity.setMetainfoName(Configuration.SERVER_VERSION_KEY);
  metainfoEntity.setMetainfoValue("0.0.0");
  expect(metainfoDAO.findByKey(Configuration.SERVER_VERSION_KEY)).andReturn(metainfoEntity);
  replay(metainfoDAO);
  AmbariServer ambariServer=new AmbariServer();
  ambariServer.metainfoDAO=metainfoDAO;
  ambariServer.ambariMetaInfo=ambariMetaInfo;
  try {
    ambariServer.checkDBVersion();
    fail();
  }
 catch (  AmbariException e) {
  }
}
