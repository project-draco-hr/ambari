def pre_rolling_restart(self, env):
    '\n    Performs the tasks surrounding the Oozie startup when a rolling upgrade\n    is in progress. This includes backing up the configuration, updating\n    the database, preparing the WAR, and installing the sharelib in HDFS.\n    :param env:\n    :return:\n    '
    import params
    env.set_params(params)
    if ((not params.version) or (compare_versions(format_hdp_stack_version(params.version), '2.2.0.0') < 0)):
        return
    Logger.info('Executing Oozie Server Rolling Upgrade pre-restart')
    oozie_server_upgrade.backup_configuration()
    oozie_server_upgrade.pre_hdp_select()
    Execute(format('hdp-select set oozie-server {version}'))
    oozie_server_upgrade.restore_configuration()
    oozie_server_upgrade.prepare_libext_directory()
    oozie_server_upgrade.upgrade_oozie()
