{
  if (cluster.getClusterState().equals(ClusterState.CLUSTER_STATE_ATTIC)) {
    return;
  }
  List<RoleToNodes> roleToNodes=cluster.getClusterDefinition(cluster.getLatestRevision()).getRoleToNodes();
  for (  RoleToNodes roleToNode : roleToNodes) {
    if (roleToNode.getRoleName().equals("GATEWAY")) {
      List<String> services=cluster.getLatestClusterDefinition().getActiveServices();
      for (      String service : services) {
        ComponentPlugin plugin=cluster.getComponentDefinition(service);
        if (components.isInstalled(service,"CLIENT")) {
          Action action=plugin.install(cluster.getName(),"CLIENT");
          addAction(action,actions);
          action=plugin.configure(cluster.getName(),"CLIENT");
          addAction(action,actions);
        }
      }
    }
  }
}
