{
  List<AgentRoleState> agentRoleStates=heartbeat.getInstalledRoleStates();
  List<Cluster> clustersNodeBelongsTo=new ArrayList<Cluster>();
  for (  AgentRoleState agentRoleState : agentRoleStates) {
    componentServers.recordRoleState(heartbeat.getHostname(),agentRoleState);
    Cluster c=Clusters.getInstance().getClusterByID(agentRoleState.getClusterId());
    clustersNodeBelongsTo.add(c);
  }
  checkActionResults(heartbeat,componentServers);
  return clustersNodeBelongsTo;
}
