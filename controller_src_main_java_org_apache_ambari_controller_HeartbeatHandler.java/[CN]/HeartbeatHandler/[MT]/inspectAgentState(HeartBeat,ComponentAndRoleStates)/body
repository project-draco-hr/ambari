{
  try {
    List<AgentRoleState> agentRoleStates=heartbeat.getInstalledRoleStates();
    if (agentRoleStates == null) {
      return;
    }
    List<Cluster> clustersNodeBelongsTo=new ArrayList<Cluster>();
    for (    AgentRoleState agentRoleState : agentRoleStates) {
      componentServers.recordRoleState(heartbeat.getHostname(),agentRoleState);
      Cluster c=Clusters.getInstance().getClusterByName(agentRoleState.getClusterId());
      clustersNodeBelongsTo.add(c);
    }
    checkActionResults(heartbeat,componentServers);
  }
 catch (  Exception e) {
    throw new IOException(e);
  }
}
