{
  for (  ServiceFSM service : clusterFsm.getServices()) {
    if (service.getServiceState() == ServiceState.STARTED) {
      String id=getActionIDForServiceAvailability(cluster,service);
      boolean serviceActivated=false;
      for (      ActionResult result : heartbeat.getActionResults()) {
        if (result.getId().equals(id)) {
          if (result.getCommandResult().getExitCode() == 0) {
            StateMachineInvoker.getAMBARIEventHandler().handle(new ServiceEvent(ServiceEventType.AVAILABLE_CHECK_SUCCESS,service));
            serviceActivated=true;
          }
          break;
        }
      }
    }
  }
}
