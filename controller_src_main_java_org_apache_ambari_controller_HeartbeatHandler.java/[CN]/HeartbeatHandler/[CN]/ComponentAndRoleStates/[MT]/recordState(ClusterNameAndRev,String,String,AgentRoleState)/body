{
  Map<String,Map<String,RoleStateTracker>> componentMap=null;
  if ((componentMap=componentRoleMap.get(clusterIdAndRev)) != null) {
    Map<String,RoleStateTracker> roles=componentMap.get(component);
    RoleStateTracker roleState=new RoleStateTracker(state.getServerStatus(),state.getClusterId(),state.getClusterDefinitionRevision());
    if (roles != null) {
      roles.put(roleServer,roleState);
    }
 else {
      roles=new HashMap<String,RoleStateTracker>();
      componentMap.put(component,roles);
    }
    return;
  }
  componentMap=new HashMap<String,Map<String,RoleStateTracker>>();
  componentRoleMap.put(clusterIdAndRev,componentMap);
  Map<String,RoleStateTracker> roleMap=new HashMap<String,RoleStateTracker>();
  roleMap.put(roleServer,new RoleStateTracker(state.getServerStatus(),state.getClusterId(),state.getClusterDefinitionRevision()));
  componentMap.put(component,roleMap);
}
