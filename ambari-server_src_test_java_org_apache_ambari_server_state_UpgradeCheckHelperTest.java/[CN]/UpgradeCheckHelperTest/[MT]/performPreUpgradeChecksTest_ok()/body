{
  final UpgradeCheckHelper helper=new UpgradeCheckHelper();
  helper.registry.clear();
  UpgradeCheckDescriptor descriptor=EasyMock.createNiceMock(UpgradeCheckDescriptor.class);
  descriptor.perform(EasyMock.<UpgradeCheck>anyObject(),EasyMock.<PreUpgradeCheckRequest>anyObject());
  EasyMock.expectLastCall().times(1);
  EasyMock.expect(descriptor.isApplicable(EasyMock.<PreUpgradeCheckRequest>anyObject())).andReturn(true);
  EasyMock.replay(descriptor);
  helper.registry.add(descriptor);
  helper.performPreUpgradeChecks(new PreUpgradeCheckRequest("cluster"));
  EasyMock.verify(descriptor);
}
