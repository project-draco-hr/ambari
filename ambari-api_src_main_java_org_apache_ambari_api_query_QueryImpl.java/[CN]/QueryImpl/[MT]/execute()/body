{
  initialize();
  Result result=createResult();
  Iterable<Resource> iterResource=getClusterController().getResources(m_resourceDefinition.getType(),createRequest(),m_predicate);
  List<Resource> listResources=new ArrayList<Resource>();
  for (  Resource resource : iterResource) {
    listResources.add(resource);
  }
  result.addResources("/",listResources);
  for (  Map.Entry<ResourceDefinition,Query> entry : m_mapSubQueries.entrySet()) {
    Query query=entry.getValue();
    ResourceDefinition resDef=entry.getKey();
    if (m_mapProperties.isEmpty() || m_mapProperties.containsKey(resDef.getId() == null ? resDef.getPluralName() : resDef.getSingularName())) {
      Map<String,List<Resource>> mapSubResults=query.execute().getResources();
      List<Resource> listSubResources=mapSubResults.get("/");
      String subResourceName=resDef.getId() == null ? resDef.getPluralName() : resDef.getSingularName();
      result.addResources(subResourceName,listSubResources);
    }
  }
  return result;
}
