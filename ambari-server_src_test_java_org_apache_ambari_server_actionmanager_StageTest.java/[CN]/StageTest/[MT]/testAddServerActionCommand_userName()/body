{
  final Stage stage=stageFactory.createNew((long)1,"/tmp","cluster1",(long)978,"context",CLUSTER_HOST_INFO,"{\"host_param\":\"param_value\"}","{\"stage_param\":\"param_value\"}");
  stage.addServerActionCommand(ConfigureAction.class.getName(),"user1",Role.AMBARI_SERVER_ACTION,RoleCommand.EXECUTE,"cluster1",SERVER_HOST_NAME,new ServiceComponentHostServerActionEvent(StageUtils.getHostName(),System.currentTimeMillis()),Collections.<String,String>emptyMap(),null,null,1200,false);
  List<ExecutionCommandWrapper> executionCommands=stage.getExecutionCommands(SERVER_HOST_NAME);
  assertEquals(1,executionCommands.size());
  String actionUserName=executionCommands.get(0).getExecutionCommand().getRoleParams().get(ServerAction.ACTION_USER_NAME);
  assertEquals("user1",actionUserName);
}
