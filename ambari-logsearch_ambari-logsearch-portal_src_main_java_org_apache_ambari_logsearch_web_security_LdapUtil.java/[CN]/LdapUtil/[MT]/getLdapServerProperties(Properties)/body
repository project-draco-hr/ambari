{
  LdapProperties ldapServerProperties=new LdapProperties();
  ldapServerProperties.setPrimaryUrl(properties.getProperty(LdapPropertyName.LDAP_PRIMARY_URL_KEY,LdapPropertyName.LDAP_PRIMARY_URL_DEFAULT));
  ldapServerProperties.setSecondaryUrl(properties.getProperty(LdapPropertyName.LDAP_SECONDARY_URL_KEY));
  ldapServerProperties.setUseSsl("true".equalsIgnoreCase(properties.getProperty(LdapPropertyName.LDAP_USE_SSL_KEY)));
  ldapServerProperties.setAnonymousBind("true".equalsIgnoreCase(properties.getProperty(LdapPropertyName.LDAP_BIND_ANONYMOUSLY_KEY,LdapPropertyName.LDAP_BIND_ANONYMOUSLY_DEFAULT)));
  ldapServerProperties.setManagerDn(properties.getProperty(LdapPropertyName.LDAP_MANAGER_DN_KEY));
  String ldapPasswordProperty=properties.getProperty(LdapPropertyName.LDAP_MANAGER_PASSWORD_KEY);
  ldapServerProperties.setManagerPassword(ldapPasswordProperty);
  ldapServerProperties.setBaseDN(properties.getProperty(LdapPropertyName.LDAP_BASE_DN_KEY,LdapPropertyName.LDAP_BASE_DN_DEFAULT));
  ldapServerProperties.setUsernameAttribute(properties.getProperty(LdapPropertyName.LDAP_USERNAME_ATTRIBUTE_KEY,LdapPropertyName.LDAP_USERNAME_ATTRIBUTE_DEFAULT));
  ldapServerProperties.setUserBase(properties.getProperty(LdapPropertyName.LDAP_USER_BASE_KEY,LdapPropertyName.LDAP_USER_BASE_DEFAULT));
  ldapServerProperties.setUserObjectClass(properties.getProperty(LdapPropertyName.LDAP_USER_OBJECT_CLASS_KEY,LdapPropertyName.LDAP_USER_OBJECT_CLASS_DEFAULT));
  ldapServerProperties.setDnAttribute(properties.getProperty(LdapPropertyName.LDAP_DN_ATTRIBUTE_KEY,LdapPropertyName.LDAP_DN_ATTRIBUTE_DEFAULT));
  ldapServerProperties.setGroupBase(properties.getProperty(LdapPropertyName.LDAP_GROUP_BASE_KEY,LdapPropertyName.LDAP_GROUP_BASE_DEFAULT));
  ldapServerProperties.setGroupObjectClass(properties.getProperty(LdapPropertyName.LDAP_GROUP_OBJECT_CLASS_KEY,LdapPropertyName.LDAP_GROUP_OBJECT_CLASS_DEFAULT));
  ldapServerProperties.setGroupMembershipAttr(properties.getProperty(LdapPropertyName.LDAP_GROUP_MEMEBERSHIP_ATTR_KEY,LdapPropertyName.LDAP_GROUP_MEMBERSHIP_ATTR_DEFAULT));
  ldapServerProperties.setGroupNamingAttr(properties.getProperty(LdapPropertyName.LDAP_GROUP_NAMING_ATTR_KEY,LdapPropertyName.LDAP_GROUP_NAMING_ATTR_DEFAULT));
  ldapServerProperties.setAdminGroupMappingRules(properties.getProperty(LdapPropertyName.LDAP_ADMIN_GROUP_MAPPING_RULES_KEY,LdapPropertyName.LDAP_ADMIN_GROUP_MAPPING_RULES_DEFAULT));
  ldapServerProperties.setGroupSearchFilter(properties.getProperty(LdapPropertyName.LDAP_GROUP_SEARCH_FILTER_KEY,LdapPropertyName.LDAP_GROUP_SEARCH_FILTER_DEFAULT));
  ldapServerProperties.setReferralMethod(properties.getProperty(LdapPropertyName.LDAP_REFERRAL_KEY,LdapPropertyName.LDAP_REFERRAL_DEFAULT));
  if (properties.containsKey(LdapPropertyName.LDAP_GROUP_BASE_KEY) || properties.containsKey(LdapPropertyName.LDAP_GROUP_OBJECT_CLASS_KEY) || properties.containsKey(LdapPropertyName.LDAP_GROUP_MEMEBERSHIP_ATTR_KEY)|| properties.containsKey(LdapPropertyName.LDAP_GROUP_NAMING_ATTR_KEY)|| properties.containsKey(LdapPropertyName.LDAP_ADMIN_GROUP_MAPPING_RULES_KEY)|| properties.containsKey(LdapPropertyName.LDAP_GROUP_SEARCH_FILTER_KEY)) {
    ldapServerProperties.setGroupMappingEnabled(true);
  }
  return ldapServerProperties;
}
