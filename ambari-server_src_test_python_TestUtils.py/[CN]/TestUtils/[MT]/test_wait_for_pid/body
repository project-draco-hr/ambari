@patch('time.time')
@patch.object(utils, 'pid_exists')
@patch('time.sleep')
def test_wait_for_pid(self, sleep_mock, pid_exists_mock, time_mock):
    pid_exists_mock.return_value = True
    time_mock.side_effect = [0, 0, 2]
    live_pids = utils.wait_for_pid([{'pid': '111', 'exe': '', 'cmd': '', }, {'pid': '222', 'exe': '', 'cmd': '', }], 1)
    self.assertEquals(2, live_pids)
