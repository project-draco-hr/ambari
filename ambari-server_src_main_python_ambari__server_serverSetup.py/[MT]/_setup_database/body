@OsFamilyFuncImpl(os_family=OSConst.WINSRV_FAMILY)
def _setup_database(options):
    properties = get_ambari_properties()
    if (properties == (-1)):
        raise FatalException((-1), 'Error getting ambari properties')
    options.default_database_host = 'localhost\\SQLEXPRESS'
    factory = DBMSConfigFactory()
    dbmsAmbari = factory.create(options, properties, 'Ambari')
    resultA = dbmsAmbari.configure_database(options, properties)
    options.default_database_host = dbmsAmbari.database_host
    dbmsMetrics = factory.create(options, properties, 'Metrics')
    resultM = dbmsMetrics.configure_database(options, properties)
    if (resultA or resultM):
        update_properties(properties)
        dbmsAmbari.setup_database()
        dbmsMetrics.setup_database()
