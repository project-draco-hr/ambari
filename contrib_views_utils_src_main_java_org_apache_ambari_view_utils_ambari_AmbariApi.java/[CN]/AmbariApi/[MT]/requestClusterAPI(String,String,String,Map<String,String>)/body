{
  String response;
  URLStreamProviderBasicAuth urlStreamProvider=getUrlStreamProviderBasicAuth();
  try {
    String url;
    if (isLocalCluster()) {
      url=String.format("/api/v1/clusters/%s/%s",getCluster().getName(),path);
    }
 else     if (isRemoteCluster()) {
      url=String.format("%s/%s",remoteUrlCluster,path);
    }
 else {
      throw new NoClusterAssociatedException("RA030 View is not associated with any cluster. No way to request Ambari.");
    }
    InputStream inputStream=urlStreamProvider.readFrom(url,method,data,headers);
    response=IOUtils.toString(inputStream);
  }
 catch (  IOException e) {
    throw new AmbariApiException("RA040 I/O error while requesting Ambari",e);
  }
  return response;
}
