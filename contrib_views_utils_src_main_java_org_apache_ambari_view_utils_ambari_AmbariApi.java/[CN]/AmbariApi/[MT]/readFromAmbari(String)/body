{
  String response;
  try {
    InputStream inputStream;
    if (isLocalCluster()) {
      AmbariStreamProvider ambariStreamProvider=context.getAmbariStreamProvider();
      String url=String.format("/api/v1/clusters/%s/%s",getCluster().getName(),method);
      inputStream=ambariStreamProvider.readFrom(url,"GET",(String)null,null,true);
    }
 else     if (isRemoteCluster()) {
      URLStreamProvider urlStreamProvider=getUrlStreamProviderBasicAuth();
      String url=String.format("%s/%s",remoteUrl,method);
      inputStream=urlStreamProvider.readFrom(url,"GET",(String)null,null);
    }
 else {
      throw new NoClusterAssociatedException("RA030 View is not associated with any cluster. No way to request Ambari.");
    }
    response=IOUtils.toString(inputStream);
  }
 catch (  IOException e) {
    throw new AmbariApiException("RA040 I/O error while requesting Ambari",e);
  }
  return response;
}
