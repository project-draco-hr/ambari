{
  List<AlertDefinitionEntity> entities=new ArrayList<AlertDefinitionEntity>();
  String clusterName=null;
  for (  Map<String,Object> requestMap : requestMaps) {
    AlertDefinitionEntity entity=new AlertDefinitionEntity();
    populateEntity(entity,requestMap);
    entities.add(entity);
    if (null == clusterName) {
      clusterName=(String)requestMap.get(ALERT_DEF_CLUSTER_NAME);
    }
  }
  Set<String> invalidatedHosts=new HashSet<String>();
  for (  AlertDefinitionEntity entity : entities) {
    alertDefinitionDAO.create(entity);
    invalidatedHosts.addAll(alertDefinitionHash.invalidateHosts(entity));
  }
  alertDefinitionHash.enqueueAgentCommands(clusterName,invalidatedHosts);
}
