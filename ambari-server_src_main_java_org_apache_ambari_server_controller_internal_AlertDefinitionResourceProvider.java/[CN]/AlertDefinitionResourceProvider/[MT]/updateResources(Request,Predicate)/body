{
  String clusterName=null;
  Set<String> invalidatedHosts=new HashSet<String>();
  Clusters clusters=getManagementController().getClusters();
  for (  Map<String,Object> requestPropMap : request.getProperties()) {
    for (    Map<String,Object> propertyMap : getPropertyMaps(requestPropMap,predicate)) {
      String stringId=(String)propertyMap.get(ALERT_DEF_ID);
      long id=Long.parseLong(stringId);
      AlertDefinitionEntity entity=alertDefinitionDAO.findById(id);
      if (null == entity) {
        continue;
      }
      if (null == clusterName) {
        try {
          Cluster cluster=clusters.getClusterById(entity.getClusterId());
          if (null != cluster) {
            clusterName=cluster.getClusterName();
          }
        }
 catch (        AmbariException ae) {
          throw new IllegalArgumentException("Invalid cluster ID",ae);
        }
      }
      try {
        populateEntity(entity,propertyMap);
        alertDefinitionDAO.merge(entity);
        invalidatedHosts.addAll(alertDefinitionHash.invalidateHosts(entity));
      }
 catch (      AmbariException ae) {
        LOG.error("Unable to find cluster when updating alert definition",ae);
      }
    }
  }
  enqueueAgentCommands(clusterName,invalidatedHosts);
  notifyUpdate(Resource.Type.AlertDefinition,request,predicate);
  return getRequestStatus(null);
}
