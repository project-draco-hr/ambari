def test_configure_secured(self):
    self.executeScript('1.3.2/services/ZOOKEEPER/package/scripts/zookeeper_client.py', classname='ZookeeperClient', command='configure', config_file='secured.json')
    self.assertResourceCalled('Directory', '/etc/zookeeper/conf', owner='zookeeper', group='hadoop', recursive=True)
    self.assertResourceCalled('File', '/etc/zookeeper/conf/zoo.cfg', owner='zookeeper', content=Template('zoo.cfg.j2'), group='hadoop')
    self.assertResourceCalled('File', '/etc/zookeeper/conf/zookeeper-env.sh', owner='zookeeper', content=Template('zookeeper-env.sh.j2'), group='hadoop')
    self.assertResourceCalled('File', '/etc/zookeeper/conf/configuration.xsl', owner='zookeeper', content=Template('configuration.xsl.j2'), group='hadoop')
    self.assertResourceCalled('Directory', '/var/run/zookeeper', owner='zookeeper', group='hadoop', recursive=True)
    self.assertResourceCalled('Directory', '/var/log/zookeeper', owner='zookeeper', group='hadoop', recursive=True)
    self.assertResourceCalled('Directory', '/hadoop/zookeeper', owner='zookeeper', group='hadoop', recursive=True)
    self.assertResourceCalled('File', '/etc/zookeeper/conf/log4j.properties', owner='zookeeper', group='hadoop', mode=420)
    self.assertResourceCalled('File', '/etc/zookeeper/conf/zookeeper_client_jaas.conf', owner='zookeeper', content=Template('zookeeper_client_jaas.conf.j2'), group='hadoop')
    self.assertResourceCalled('File', '/etc/zookeeper/conf/zoo_sample.cfg', owner='zookeeper', group='hadoop')
    self.assertNoMoreResources()
