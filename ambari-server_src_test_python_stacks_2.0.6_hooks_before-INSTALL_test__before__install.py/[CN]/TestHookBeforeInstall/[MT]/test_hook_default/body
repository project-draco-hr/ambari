def test_hook_default(self):
    self.executeScript('2.0.6/hooks/before-INSTALL/scripts/hook.py', classname='BeforeInstallHook', command='hook', config_file='default.json')
    self.assertResourceCalled('Repository', 'HDP-2.0._', action=['create'], base_url='http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.0.6.0', components=['HDP', 'main'], mirror_list=None, repo_file_name='HDP', repo_template='repo_suse_rhel.j2')
    self.assertResourceCalled('Package', 'unzip')
    self.assertResourceCalled('Package', 'curl')
    self.assertResourceCalled('Directory', '/tmp/AMBARI-artifacts/', recursive=True)
    self.assertResourceCalled('File', '/tmp/AMBARI-artifacts//jdk-7u67-linux-x64.tar.gz', content=DownloadSource('http://c6401.ambari.apache.org:8080/resources//jdk-7u67-linux-x64.tar.gz'))
    self.assertResourceCalled('Directory', '/usr/jdk64')
    self.assertResourceCalled('Execute', ('chmod', 'a+x', u'/usr/jdk64'), not_if='test -e /usr/jdk64/jdk1.7.0_45/bin/java', sudo=True)
    self.assertResourceCalled('Execute', 'mkdir -p /tmp/jdk && cd /tmp/jdk && tar -xf /tmp/AMBARI-artifacts//jdk-7u67-linux-x64.tar.gz && ambari-sudo.sh cp -rp /tmp/jdk/* /usr/jdk64', not_if='test -e /usr/jdk64/jdk1.7.0_45/bin/java')
    self.assertResourceCalled('File', '/usr/jdk64/jdk1.7.0_45/bin/java', mode=493, cd_access='a')
    self.assertResourceCalled('Execute', ('chgrp', '-R', u'hadoop', u'/usr/jdk64/jdk1.7.0_45'), sudo=True)
    self.assertResourceCalled('Execute', ('chown', '-R', 'some_user', u'/usr/jdk64/jdk1.7.0_45'), sudo=True)
    self.assertNoMoreResources()
