{
  Set<PropertyId> pkPropertyIds=getPKPropertyIds();
  Set<Map<PropertyId,String>> properties=new HashSet<Map<PropertyId,String>>();
  Set<Map<PropertyId,String>> predicateProperties=new HashSet<Map<PropertyId,String>>();
  if (predicate != null && pkPropertyIds.equals(PredicateHelper.getPropertyIds(predicate))) {
    predicateProperties.add(getProperties(predicate));
  }
 else {
    for (    Resource resource : getResources(PropertyHelper.getReadRequest(pkPropertyIds),predicate)) {
      predicateProperties.add(PropertyHelper.getProperties(resource));
    }
  }
  for (  Map<PropertyId,String> predicatePropertyMap : predicateProperties) {
    Map<PropertyId,String> propertyMap=requestPropertyMap == null ? new HashMap<PropertyId,String>() : new HashMap<PropertyId,String>(requestPropertyMap);
    setProperties(propertyMap,predicatePropertyMap,pkPropertyIds);
    properties.add(propertyMap);
  }
  return properties;
}
