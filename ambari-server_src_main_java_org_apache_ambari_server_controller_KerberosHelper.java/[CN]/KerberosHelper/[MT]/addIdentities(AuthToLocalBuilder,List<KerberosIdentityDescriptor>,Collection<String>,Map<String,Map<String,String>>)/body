{
  if (identities != null) {
    for (    KerberosIdentityDescriptor identity : identities) {
      if ((identityFilter == null) || identityFilter.contains(identity.getName())) {
        KerberosPrincipalDescriptor principalDescriptor=identity.getPrincipalDescriptor();
        if (principalDescriptor != null) {
          authToLocalBuilder.addRule(KerberosDescriptor.replaceVariables(principalDescriptor.getValue(),configurations),KerberosDescriptor.replaceVariables(principalDescriptor.getLocalUsername(),configurations));
        }
      }
    }
  }
}
