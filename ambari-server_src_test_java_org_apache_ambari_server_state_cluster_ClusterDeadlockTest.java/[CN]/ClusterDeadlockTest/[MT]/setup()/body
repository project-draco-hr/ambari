{
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster("c1");
  StackId stackId=new StackId("HDP-0.1");
  Cluster c1=clusters.getCluster("c1");
  c1.setDesiredStackVersion(stackId);
  helper.getOrCreateRepositoryVersion(stackId.getStackName(),stackId.getStackVersion());
  c1.createClusterVersion(stackId.getStackName(),stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  metaInfo.init();
  for (int i=0; i < 100; i++) {
    String hostName="c64-" + i;
    clusters.addHost(hostName);
    setOsFamily(clusters.getHost(hostName),"redhat","6.4");
    clusters.getHost(hostName).persist();
    clusters.mapHostToCluster(hostName,"c1");
  }
  createNewServiceComponentHost("HDFS","NAMENODE","c64-99",false);
  createNewServiceComponentHost("HDFS","HDFS_CLIENT","c64-99",true);
}
