{
  File recommendationsDir=temp.newFolder("recommendationDir");
  String stackAdvisorScript="echo";
  int requestId=0;
  StackAdvisorRunner saRunner=mock(StackAdvisorRunner.class);
  StackAdvisorCommand<TestResource> command=spy(new TestStackAdvisorCommand(recommendationsDir,stackAdvisorScript,requestId,saRunner));
  StackAdvisorRequest request=StackAdvisorRequestBuilder.forStack("stackName","stackVersion").build();
  String hostsJSON="{\"hosts\" : \"localhost\"";
  String servicesJSON="{\"services\" : \"HDFS\"";
  StackAdvisorData data=new StackAdvisorData(hostsJSON,servicesJSON);
  doReturn(hostsJSON).when(command).getHostsInformation(request);
  doReturn(servicesJSON).when(command).getServicesInformation(request);
  doReturn(data).when(command).adjust(any(StackAdvisorData.class),any(StackAdvisorRequest.class));
  when(saRunner.runScript(any(String.class),any(StackAdvisorCommandType.class),any(File.class))).thenReturn(false);
  command.invoke(request);
  assertTrue(false);
}
