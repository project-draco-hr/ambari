{
  if (!isOpen()) {
    throw new KerberosOperationException("This operation handler has not been opened");
  }
  if (principal == null) {
    throw new KerberosOperationException("principal is null");
  }
  NamingEnumeration<SearchResult> searchResultEnum=null;
  try {
    searchResultEnum=ldapContext.search(principalContainerDn,"(userPrincipalName=" + principal + ")",searchControls);
    if (searchResultEnum.hasMore()) {
      return true;
    }
  }
 catch (  NamingException ne) {
    throw new KerberosOperationException("can not check if principal exists: " + principal,ne);
  }
 finally {
    try {
      if (searchResultEnum != null) {
        searchResultEnum.close();
      }
    }
 catch (    NamingException ne) {
    }
  }
  return false;
}
