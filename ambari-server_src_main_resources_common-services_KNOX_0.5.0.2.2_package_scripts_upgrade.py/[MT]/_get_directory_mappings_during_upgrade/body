def _get_directory_mappings_during_upgrade():
    '\n  Gets a dictionary of directory to archive name that represents the\n  directories that need to be backed up and their output tarball archive targets\n  :return:  the dictionary of directory to tarball mappings\n  '
    import params
    if ((params.upgrade_direction is None) or (params.upgrade_direction != Direction.UPGRADE) or (params.upgrade_from_version is None) or (params.upgrade_from_version == '')):
        Logger.error('Function _get_directory_mappings_during_upgrade() can only be called during a Stack Upgrade in direction UPGRADE.')
        return {}
    knox_data_dir = '/var/lib/knox/data'
    if (params.stack_name and (params.stack_name.upper() == 'HDP') and (compare_versions(format_stack_version(params.upgrade_from_version), '2.3.0.0') > 0)):
        knox_data_dir = format('/usr/hdp/{upgrade_from_version}/knox/data')
    directories = {knox_data_dir: BACKUP_DATA_ARCHIVE, (params.knox_conf_dir + '/'): BACKUP_CONF_ARCHIVE, }
    Logger.info(format('Knox directories to backup:\n{directories}'))
    return directories
