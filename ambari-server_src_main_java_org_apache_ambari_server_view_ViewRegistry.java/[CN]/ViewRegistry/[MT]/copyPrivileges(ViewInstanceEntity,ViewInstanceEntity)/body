{
  LOG.debug("Copy all privileges from " + sourceInstanceEntity.getName() + " to "+ targetInstanceEntity.getName());
  List<PrivilegeEntity> targetInstancePrivileges=privilegeDAO.findByResourceId(targetInstanceEntity.getResource().getId());
  if (targetInstancePrivileges.size() > 0) {
    LOG.warn("Old privileges will be removed for " + targetInstanceEntity.getName());
    for (    PrivilegeEntity privilegeEntity : targetInstancePrivileges) {
      removePrivilegeEntity(privilegeEntity);
    }
  }
  List<PrivilegeEntity> sourceInstancePrivileges=privilegeDAO.findByResourceId(sourceInstanceEntity.getResource().getId());
  for (  PrivilegeEntity sourcePrivilege : sourceInstancePrivileges) {
    PrivilegeEntity targetPrivilege=new PrivilegeEntity();
    targetPrivilege.setPrincipal(sourcePrivilege.getPrincipal());
    targetPrivilege.setResource(targetInstanceEntity.getResource());
    targetPrivilege.setPermission(sourcePrivilege.getPermission());
    privilegeDAO.create(targetPrivilege);
    targetPrivilege.getPrincipal().getPrivileges().add(sourcePrivilege);
  }
}
