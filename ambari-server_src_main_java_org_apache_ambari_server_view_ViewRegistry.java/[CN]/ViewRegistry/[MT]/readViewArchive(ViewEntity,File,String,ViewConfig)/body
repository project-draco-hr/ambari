{
  setViewStatus(viewDefinition,ViewEntity.ViewStatus.LOADING,"Loading " + archivePath + ".");
  try {
    addDefinition(viewDefinition);
    ClassLoader cl=extractViewArchive(viewDefinition,archiveFile,helper.getFile(archivePath));
    viewConfig=helper.getViewConfigFromExtractedArchive(archivePath);
    setupViewDefinition(viewDefinition,viewConfig,cl);
    Set<ViewInstanceEntity> instanceDefinitions=new HashSet<ViewInstanceEntity>();
    for (    InstanceConfig instanceConfig : viewConfig.getInstances()) {
      ViewInstanceEntity instanceEntity=createViewInstanceDefinition(viewConfig,viewDefinition,instanceConfig);
      instanceEntity.setXmlDriven(true);
      instanceDefinitions.add(instanceEntity);
    }
    syncView(viewDefinition,instanceDefinitions);
    onDeploy(viewDefinition);
    for (    ViewInstanceEntity instanceEntity : instanceDefinitions) {
      addInstanceDefinition(viewDefinition,instanceEntity);
      handlerList.addViewInstance(instanceEntity);
    }
    setViewStatus(viewDefinition,ViewEntity.ViewStatus.LOADED,"Loaded " + archivePath + ".");
  }
 catch (  Exception e) {
    String msg="Caught exception loading view " + viewDefinition.getViewName() + " : "+ e.getMessage();
    setViewStatus(viewDefinition,ViewEntity.ViewStatus.ERROR,msg);
    LOG.error(msg,e);
  }
}
