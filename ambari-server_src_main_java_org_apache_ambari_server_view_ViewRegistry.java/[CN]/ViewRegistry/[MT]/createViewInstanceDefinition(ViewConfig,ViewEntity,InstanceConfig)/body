{
  ViewInstanceEntity viewInstanceDefinition=new ViewInstanceEntity(viewDefinition,instanceConfig);
  Masker masker=getMasker(viewConfig.getMaskerClass(viewDefinition.getClassLoader()));
  for (  PropertyConfig propertyConfig : instanceConfig.getProperties()) {
    ParameterConfig parameterConfig=null;
    for (    ParameterConfig paramConfig : viewConfig.getParameters()) {
      if (StringUtils.equals(paramConfig.getName(),propertyConfig.getKey())) {
        parameterConfig=paramConfig;
        break;
      }
    }
    if (parameterConfig != null && parameterConfig.isMasked()) {
      viewInstanceDefinition.putProperty(propertyConfig.getKey(),masker.mask(propertyConfig.getValue()));
    }
 else {
      viewInstanceDefinition.putProperty(propertyConfig.getKey(),propertyConfig.getValue());
    }
  }
  viewInstanceDefinition.validate(viewDefinition);
  bindViewInstance(viewDefinition,viewInstanceDefinition);
  return viewInstanceDefinition;
}
