{
  List<ResourceConfig> resourceConfigurations=viewConfig.getResources();
  ViewDefinition viewDefinition=new ViewDefinition(viewConfig);
  for (  ResourceConfig resourceConfiguration : resourceConfigurations) {
    BaseResourceDefinition resourceDefinition=new ViewSubResourceDefinition(viewDefinition,resourceConfiguration);
    viewDefinition.addResourceDefinition(resourceDefinition);
    Resource.Type type=resourceDefinition.getType();
    ResourceInstanceFactoryImpl.addResourceDefinition(type,resourceDefinition);
    viewDefinition.addResourceConfiguration(type,resourceConfiguration);
    Class<?> clazz=resourceConfiguration.getResourceClass(cl);
    String idProperty=resourceConfiguration.getIdProperty();
    viewDefinition.addResourceProvider(type,new ViewSubResourceProvider(type,clazz,idProperty,viewDefinition));
  }
  ViewRegistry.getInstance().addDefinition(viewDefinition);
  return viewDefinition;
}
