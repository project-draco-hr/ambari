{
  Request request=createNiceMock(Request.class);
  ResourceProvider provider=createProvider();
  BlueprintEntity entity=((BlueprintResourceProvider)provider).toEntity(getTestProperties().iterator().next());
  List<BlueprintEntity> results=new ArrayList<BlueprintEntity>();
  results.add(entity);
  expect(dao.findAll()).andReturn(results);
  replay(dao,request);
  Set<Resource> setResults=provider.getResources(request,null);
  assertEquals(1,setResults.size());
  verify(dao);
  validateResource(setResults.iterator().next(),false);
}
