{
  Request request=createNiceMock(Request.class);
  ResourceProvider provider=createProvider();
  Set<Map<String,Object>> testProperties=getTestProperties();
  setConfigurationProperties(testProperties);
  BlueprintEntity entity=((BlueprintResourceProvider)provider).toEntity(testProperties.iterator().next());
  List<BlueprintEntity> results=new ArrayList<BlueprintEntity>();
  results.add(entity);
  expect(dao.findAll()).andReturn(results);
  replay(dao,request);
  Set<Resource> setResults=provider.getResources(request,null);
  assertEquals(1,setResults.size());
  verify(dao);
  validateResource(setResults.iterator().next(),true);
}
