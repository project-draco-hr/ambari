{
  String chukwaPath=System.getenv("AMBARI_HOME");
  StringBuffer pidFilesb=new StringBuffer();
  String pidDir=System.getenv("AMBARI_PID_DIR");
  if (pidDir == null) {
    pidDir=chukwaPath + File.separator + "var"+ File.separator+ "run";
  }
  pidFilesb.append(pidDir).append(File.separator).append(name).append(".pid");
  String pidFileName=pidFilesb.toString();
  File pidFile=new File(pidFileName);
  if (!pidFile.exists()) {
    log.error("Delete pid file, No such file or directory: " + pidFileName);
  }
 else {
    try {
      serverSocket.close();
    }
 catch (    IOException e) {
      log.error("Unable to release file lock: " + pidFileName);
    }
  }
  boolean result=pidFile.delete();
  if (!result) {
    log.error("Delete pid file failed, " + pidFileName);
  }
}
