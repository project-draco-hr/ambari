@lazy_property
def platform(self):
    operatingsystem = self.os
    if (operatingsystem == 'linux'):
        lsb = self.lsb
        if (not lsb):
            if os.path.exists('/etc/redhat-release'):
                return 'redhat'
            if os.path.exists('/etc/fedora-release'):
                return 'fedora'
            if os.path.exists('/etc/debian_version'):
                return 'debian'
            if os.path.exists('/etc/gentoo-release'):
                return 'gentoo'
            if os.path.exists('/etc/system-release'):
                with open('/etc/system-release', 'rb') as fp:
                    release = fp.read()
                if ('Amazon Linux' in release):
                    return 'amazon'
            return 'unknown'
        return lsb['id'].lower()
    elif (operatingsystem == 'darwin'):
        out = Popen('/usr/bin/sw_vers', stdout=PIPE).communicate()[0]
        sw_vers = dict(([y.strip() for y in x.split(':', 1)] for x in out.strip().split('\n')))
        return sw_vers['ProductName'].lower().replace(' ', '_')
    else:
        return 'unknown'
