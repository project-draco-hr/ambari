{
  if (category == null && property.equals("*")) {
    addAllProperties(temporalInfo);
  }
 else   if (m_mapAllProperties.containsKey(category) && m_mapAllProperties.get(category).contains(property)) {
    Set<String> setProps=m_mapQueryProperties.get(category);
    if (setProps == null) {
      setProps=new HashSet<String>();
      m_mapQueryProperties.put(category,setProps);
    }
    setProps.add(property);
    if (temporalInfo != null) {
      m_mapPropertyTemporalInfo.put(PropertyHelper.getPropertyId(category,property),temporalInfo);
    }
  }
 else   if (!addCategory(category,property,temporalInfo)) {
    boolean success=addPropertyToSubResource(category,property,temporalInfo);
    if (!success) {
      String propString=category == null ? property : property == null ? category : category + '/' + property;
      throw new IllegalArgumentException("An invalid resource property was requested.  Resource: " + m_resource.getResourceDefinition().getType() + ", Property: "+ propString);
    }
  }
}
