{
  if (category == null && property.equals("*")) {
    addAllProperties(temporalInfo);
  }
 else   if (m_mapAllProperties.containsKey(category) && m_mapAllProperties.get(category).contains(property)) {
    Set<String> setProps=m_mapQueryProperties.get(category);
    if (setProps == null) {
      setProps=new HashSet<String>();
      m_mapQueryProperties.put(category,setProps);
    }
    setProps.add(property);
    if (temporalInfo != null) {
      m_mapPropertyTemporalInfo.put(PropertyHelper.getPropertyId(property,category,true),temporalInfo);
    }
  }
 else   if (!addCategory(category,property,temporalInfo)) {
    boolean success=addPropertyToSubResource(category,property,temporalInfo);
    if (!success) {
      throw new RuntimeException("Attempted to add invalid property to resource.  Resource=" + m_resourceDefinition.getType() + ", Property: Category="+ category+ " Field="+ property);
    }
  }
}
