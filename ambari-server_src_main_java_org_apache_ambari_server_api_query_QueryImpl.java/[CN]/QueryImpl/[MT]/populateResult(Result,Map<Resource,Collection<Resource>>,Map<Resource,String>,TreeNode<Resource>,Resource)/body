{
  TreeNode<Resource> tree;
  if (node == null) {
    tree=result.getResultTree();
    if (m_resource.getIds().get(getResourceType()) == null) {
      tree.setProperty("isCollection","true");
    }
  }
 else {
    tree=new TreeNodeImpl<Resource>(null,null,null);
  }
  if (node != null) {
    tree.setProperty("isCollection","false");
    tree.setName(resourceNames.get(parent));
    node.addChild(tree);
  }
  int count=1;
  for (  Resource resource : resourceTree.get(parent)) {
    TreeNode<Resource> subNode=tree.addChild(resource,resource.getType() + ":" + count++);
    if (resourceTree.containsKey(resource)) {
      populateResult(result,resourceTree,resourceNames,subNode,resource);
    }
  }
}
