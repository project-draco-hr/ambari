{
  Map<String,Predicate> predicateMap=new HashMap<String,Predicate>();
  for (  Resource resource : resources) {
    for (    Map.Entry<String,QueryImpl> entry : querySubResourceSet.entrySet()) {
      QueryImpl subResourceInstance=entry.getValue();
      String subResCategory=entry.getKey();
      Set<Map<Resource.Type,String>> resourceKeyValueMaps=getKeyValueMaps(resource,keyValueMaps);
      for (      Map<Resource.Type,String> map : resourceKeyValueMaps) {
        Predicate predicate=predicateMap.get(subResCategory);
        predicateMap.put(subResCategory,predicate == null ? subResourceInstance.createPredicate(map) : new OrPredicate(predicate,subResourceInstance.createPredicate(map)));
      }
      subResourceInstance.keyValueMaps.addAll(resourceKeyValueMaps);
    }
  }
  return predicateMap;
}
