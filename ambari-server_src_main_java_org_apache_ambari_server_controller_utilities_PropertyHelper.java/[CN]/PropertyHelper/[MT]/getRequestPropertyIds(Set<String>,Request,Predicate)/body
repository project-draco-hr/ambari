{
  Set<String> propertyIds=request.getPropertyIds();
  if (propertyIds == null || propertyIds.isEmpty()) {
    providerPropertyIds=new HashSet<String>(providerPropertyIds);
    return providerPropertyIds;
  }
  propertyIds=new HashSet<String>(propertyIds);
  if (predicate != null) {
    propertyIds.addAll(PredicateHelper.getPropertyIds(predicate));
  }
  propertyIds.retainAll(providerPropertyIds);
  return propertyIds;
}
