def test_recommendAmsConfigurations(self):
    configurations = {}
    clusterData = {}
    services = {'services': [{'StackServices': {'service_name': 'AMBARI_METRICS', }, 'components': [{'StackServiceComponents': {'component_name': 'METRICS_COLLECTOR', 'hostnames': ['host1'], }, }], }], }
    hosts = {'items': [{'Hosts': {'host_name': 'host1', }, }], }
    expected = {'ams-hbase-env': {'properties': {'hbase_master_heapsize': '1024m', 'hbase_regionserver_heapsize': '1024m', }, }, 'ams-env': {'properties': {'metrics_collector_heapsize': '512m', }, }, 'ams-hbase-site': {'properties': {'hbase.regionserver.global.memstore.lowerLimit': '0.4', 'hbase.regionserver.global.memstore.upperLimit': '0.5', 'hfile.block.cache.size': '0.3', }, }, 'ams-site': {'properties': {'timeline.metrics.host.aggregator.ttl': '86400', }, }, }
    self.stackAdvisor.recommendAmsConfigurations(configurations, clusterData, services, hosts)
    self.assertEquals(configurations, expected)
