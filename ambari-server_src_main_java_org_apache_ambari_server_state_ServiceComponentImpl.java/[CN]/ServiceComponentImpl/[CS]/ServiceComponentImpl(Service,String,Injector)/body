{
  injector.injectMembers(this);
  this.service=service;
  this.desiredStateEntity=new ServiceComponentDesiredStateEntity();
  desiredStateEntity.setComponentName(componentName);
  desiredStateEntity.setDesiredState(State.INIT);
  this.desiredConfigs=new HashMap<String,String>();
  setDesiredStackVersion(service.getDesiredStackVersion());
  this.hostComponents=new HashMap<String,ServiceComponentHost>();
  StackId stackId=service.getDesiredStackVersion();
  ComponentInfo compInfo=ambariMetaInfo.getComponentCategory(stackId.getStackName(),stackId.getStackVersion(),service.getName(),componentName);
  if (compInfo == null) {
    throw new RuntimeException("Trying to create a ServiceComponent" + " not recognized in stack info" + ", clusterName=" + service.getCluster().getClusterName() + ", serviceName="+ service.getName()+ ", componentName="+ componentName+ ", stackInfo="+ stackId.getStackId());
  }
  this.isClientComponent=compInfo.isClient();
  init();
}
