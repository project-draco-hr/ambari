def os_run_os_command(cmd, env=None):
    if isinstance(cmd, basestring):
        cmd = cmd.replace('\\', '\\\\')
        cmd = shlex.split(cmd)
    process = subprocess.Popen(cmd, stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE, env=env)
    (stdoutdata, stderrdata) = process.communicate()
    return (process.returncode, stdoutdata, stderrdata)
