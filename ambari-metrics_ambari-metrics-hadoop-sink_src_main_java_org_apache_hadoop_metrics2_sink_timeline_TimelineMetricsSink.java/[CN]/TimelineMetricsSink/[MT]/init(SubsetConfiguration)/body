{
  super.init(conf);
  int maxRowCacheSize=conf.getInt(MAX_METRIC_ROW_CACHE_SIZE,TimelineMetricsCache.MAX_RECS_PER_NAME_DEFAULT);
  int metricsSendInterval=conf.getInt(METRICS_SEND_INTERVAL,TimelineMetricsCache.MAX_EVICTION_TIME_MILLIS);
  metricsCache=new TimelineMetricsCache(maxRowCacheSize,metricsSendInterval);
  conf.setListDelimiter(',');
  Iterator<String> it=(Iterator<String>)conf.getKeys();
  while (it.hasNext()) {
    String propertyName=it.next();
    if (propertyName != null && propertyName.startsWith(TAGS_FOR_PREFIX_PROPERTY_PREFIX)) {
      String contextName=propertyName.substring(TAGS_FOR_PREFIX_PROPERTY_PREFIX.length());
      String[] tags=conf.getStringArray(propertyName);
      boolean useAllTags=false;
      Set<String> set=null;
      if (tags.length > 0) {
        set=new HashSet<String>();
        for (        String tag : tags) {
          tag=tag.trim();
          useAllTags|=tag.equals("*");
          if (tag.length() > 0) {
            set.add(tag);
          }
        }
        if (useAllTags) {
          set=null;
        }
      }
      useTagsMap.put(contextName,set);
    }
  }
}
