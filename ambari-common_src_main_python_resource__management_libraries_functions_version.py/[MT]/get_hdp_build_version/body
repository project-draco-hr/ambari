def get_hdp_build_version(hdp_stack_version):
    '\n  Used to check hdp_stack_version for stacks >= 2.2\n  :param hdp_stack_version: version for stacks >= 2.2\n  :return: checked hdp_version (or UnknownConfiguration for stacks < 2.2)\n  '
    HDP_SELECT = '/usr/bin/hdp-select'
    if ((hdp_stack_version != '') and (compare_versions(hdp_stack_version, '2.2.0.0') >= 0) and os.path.exists(HDP_SELECT)):
        (code, out) = shell.call('{0} status'.format(HDP_SELECT))
        matches = re.findall('([\\d\\.]+\\-\\d+)', out)
        hdp_version = (matches[0] if (matches and (len(matches) > 0)) else None)
        if (not hdp_version):
            raise Fail(('Could not parse HDP version from output of hdp-select: %s' % str(out)))
        return hdp_version
    else:
        return UnknownConfiguration('hdp_version')
