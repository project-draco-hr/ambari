{
  String bindAddress=metricConfiguration.getWebappAddress();
  LOG.info("Instantiating AHSWebApp at " + bindAddress);
  try {
    webApp=WebApps.$for("applicationhistory",ApplicationHistoryClientService.class,ahsClientService,"ws").with(getConfig()).withHttpSpnegoPrincipalKey(YarnConfiguration.TIMELINE_SERVICE_PRINCIPAL).withHttpSpnegoKeytabKey(YarnConfiguration.TIMELINE_SERVICE_KEYTAB).at(bindAddress).start(new AHSWebApp(historyManager,timelineStore,timelineMetricStore));
  }
 catch (  Exception e) {
    String msg="AHSWebApp failed to start.";
    LOG.error(msg,e);
    throw new YarnRuntimeException(msg,e);
  }
}
