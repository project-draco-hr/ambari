{
  ViewConfig res=null;
  InputStream configStream=null;
  try {
    ClassLoader cl=URLClassLoader.newInstance(new URL[]{archiveFile.toURI().toURL()});
    configStream=cl.getResourceAsStream(VIEW_XML);
    if (configStream == null) {
      configStream=cl.getResourceAsStream(WEB_INF_VIEW_XML);
    }
    JAXBContext jaxbContext=JAXBContext.newInstance(ViewConfig.class);
    Unmarshaller jaxbUnmarshaller=jaxbContext.createUnmarshaller();
    res=(ViewConfig)jaxbUnmarshaller.unmarshal(configStream);
  }
  finally {
    if (configStream != null) {
      configStream.close();
    }
  }
  return res;
}
