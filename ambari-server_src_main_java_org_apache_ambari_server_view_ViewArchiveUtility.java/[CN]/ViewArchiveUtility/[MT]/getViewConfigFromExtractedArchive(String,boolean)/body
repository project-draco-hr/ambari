{
  ViewConfig res=null;
  InputStream configStream=null;
  try {
    File configFile=new File(archivePath + File.separator + VIEW_XML);
    if (!configFile.exists()) {
      configFile=new File(archivePath + File.separator + WEB_INF_VIEW_XML);
    }
    if (validate) {
      validateConfig(new FileInputStream(configFile));
    }
    configStream=new FileInputStream(configFile);
    JAXBContext jaxbContext=JAXBContext.newInstance(ViewConfig.class);
    Unmarshaller jaxbUnmarshaller=jaxbContext.createUnmarshaller();
    res=(ViewConfig)jaxbUnmarshaller.unmarshal(configStream);
  }
  finally {
    if (configStream != null) {
      configStream.close();
    }
  }
  return res;
}
