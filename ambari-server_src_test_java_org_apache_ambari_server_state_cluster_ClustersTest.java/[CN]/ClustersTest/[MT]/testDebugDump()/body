{
  String c1="c1";
  String c2="c2";
  String h1="h1";
  String h2="h2";
  String h3="h3";
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(c1,stackId);
  clusters.addCluster(c2,stackId);
  Cluster cluster1=clusters.getCluster(c1);
  Cluster cluster2=clusters.getCluster(c2);
  Assert.assertNotNull(clusters.getCluster(c1));
  Assert.assertNotNull(clusters.getCluster(c2));
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster1.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  cluster1.transitionClusterVersion(stackId,stackId.getStackVersion(),RepositoryVersionState.CURRENT);
  cluster2.setDesiredStackVersion(stackId);
  cluster2.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  cluster2.transitionClusterVersion(stackId,stackId.getStackVersion(),RepositoryVersionState.CURRENT);
  clusters.addHost(h1);
  clusters.addHost(h2);
  clusters.addHost(h3);
  setOsFamily(clusters.getHost(h1),"redhat","6.4");
  setOsFamily(clusters.getHost(h2),"redhat","5.9");
  setOsFamily(clusters.getHost(h3),"redhat","6.4");
  clusters.getHost(h1).persist();
  clusters.getHost(h2).persist();
  clusters.getHost(h3).persist();
  clusters.mapHostToCluster(h1,c1);
  clusters.mapHostToCluster(h2,c1);
  StringBuilder sb=new StringBuilder();
  clusters.debugDump(sb);
}
