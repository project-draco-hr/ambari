{
  Guice.createInjector(new TestModule());
  ClusterDefinition clusterDef=mock(ClusterDefinition.class);
  List<String> services=new ArrayList<String>();
  services.add("service1");
  when(clusterDef.getEnabledServices()).thenReturn(services);
  Cluster cluster=mock(Cluster.class);
  when(cluster.getClusterDefinition(anyInt())).thenReturn(clusterDef);
  String[] roles={"role1"};
  ComponentPlugin compDef=mock(ComponentPlugin.class);
  when(compDef.getActiveRoles()).thenReturn(roles);
  when(cluster.getComponentDefinition(anyString())).thenReturn(compDef);
  clusterImpl=new ClusterImpl(cluster,1);
  service=(ServiceImpl)clusterImpl.getServices().get(0);
  role=(RoleImpl)service.getRoles().get(0);
}
