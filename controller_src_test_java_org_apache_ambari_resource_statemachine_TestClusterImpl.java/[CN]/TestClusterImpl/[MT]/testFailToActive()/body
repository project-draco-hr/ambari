{
  doAnswer(new Answer<Void>(){
    public Void answer(    InvocationOnMock invocation) throws Throwable {
      ClusterState cs=(ClusterState)invocation.getArguments()[0];
      assertTrue(cs.getState().equals(ClusterState.CLUSTER_STATE_ACTIVE));
      numUpdateClusterMethodCalls++;
      return null;
    }
  }
).when(cluster).updateClusterState(clsState);
  verifyTransitions(ClusterStateFSM.FAIL,startEvents,startStates);
  assertTrue(numUpdateClusterMethodCalls == 1);
}
