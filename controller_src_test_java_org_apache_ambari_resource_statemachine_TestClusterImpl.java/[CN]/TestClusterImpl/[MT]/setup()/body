{
  Guice.createInjector(new TestModule());
  ClusterDefinition clusterDef=mock(ClusterDefinition.class);
  when(clusterDef.getEnabledServices()).thenReturn(new ArrayList<String>());
  cluster=mock(Cluster.class);
  clsState=new ClusterState();
  when(cluster.getClusterDefinition(anyInt())).thenReturn(clusterDef);
  when(cluster.getClusterState()).thenReturn(clsState);
  clusterImpl=new ClusterImpl(cluster,1);
  numUpdateClusterMethodCalls=0;
}
