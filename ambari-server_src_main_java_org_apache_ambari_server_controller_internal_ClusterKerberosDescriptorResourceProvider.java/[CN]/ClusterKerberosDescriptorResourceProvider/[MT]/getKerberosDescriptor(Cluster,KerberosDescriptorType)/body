{
  KerberosDescriptor stackDescriptor=(type == KerberosDescriptorType.STACK || type == KerberosDescriptorType.COMPOSITE) ? getKerberosDescriptorFromStack(cluster.getCurrentStackVersion()) : null;
  KerberosDescriptor userDescriptor=(type == KerberosDescriptorType.USER || type == KerberosDescriptorType.COMPOSITE) ? getKerberosDescriptorUpdates(cluster.getClusterName()) : null;
  if (stackDescriptor == null) {
    if (userDescriptor == null) {
      return new KerberosDescriptor();
    }
 else {
      return userDescriptor;
    }
  }
 else {
    if (userDescriptor != null) {
      stackDescriptor.update(userDescriptor);
    }
    return stackDescriptor;
  }
}
