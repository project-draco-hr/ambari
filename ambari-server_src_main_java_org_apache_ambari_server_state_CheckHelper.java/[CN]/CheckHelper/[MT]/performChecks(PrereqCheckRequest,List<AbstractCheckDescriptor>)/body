{
  final String clusterName=request.getClusterName();
  final List<PrerequisiteCheck> prerequisiteCheckResults=new ArrayList<PrerequisiteCheck>();
  for (  AbstractCheckDescriptor checkDescriptor : checksRegistry) {
    final PrerequisiteCheck prerequisiteCheck=new PrerequisiteCheck(checkDescriptor.getDescription(),clusterName);
    try {
      if (!checkDescriptor.isApplicable(request)) {
        continue;
      }
      checkDescriptor.perform(prerequisiteCheck,request);
      prerequisiteCheckResults.add(prerequisiteCheck);
      request.addResult(checkDescriptor.getDescription(),prerequisiteCheck.getStatus());
    }
 catch (    ClusterNotFoundException ex) {
      prerequisiteCheck.setStatus(PrereqCheckStatus.FAIL);
      prerequisiteCheck.setFailReason("Cluster with name " + clusterName + " doesn't exists");
      prerequisiteCheckResults.add(prerequisiteCheck);
      request.addResult(checkDescriptor.getDescription(),prerequisiteCheck.getStatus());
    }
catch (    Exception ex) {
      LOG.error("Check " + checkDescriptor.getDescription().name() + " failed",ex);
      prerequisiteCheck.setStatus(PrereqCheckStatus.FAIL);
      prerequisiteCheck.setFailReason("Unexpected server error happened");
      prerequisiteCheckResults.add(prerequisiteCheck);
      request.addResult(checkDescriptor.getDescription(),prerequisiteCheck.getStatus());
    }
  }
  return prerequisiteCheckResults;
}
