{
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster("C1");
  clusters.addHost("h1");
  setOsFamily(clusters.getHost("h1"),"redhat","5.9");
  clusters.getHost("h1").persist();
  StackId stackId=new StackId("HDP-0.1");
  Cluster c1=clusters.getCluster("C1");
  c1.setDesiredStackVersion(stackId);
  helper.getOrCreateRepositoryVersion(stackId.getStackName(),stackId.getStackVersion());
  c1.createClusterVersion(stackId.getStackName(),stackId.getStackVersion(),"admin",RepositoryVersionState.CURRENT);
  metaInfo.init();
  clusters.mapHostToCluster("h1","C1");
}
