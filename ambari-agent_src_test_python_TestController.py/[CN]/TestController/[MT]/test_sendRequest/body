@patch('urllib2.Request')
@patch.object(Controller, 'security')
def test_sendRequest(self, security_mock, requestMock):
    conMock = MagicMock()
    conMock.request.return_value = 'response'
    security_mock.CachedHTTPSConnection.return_value = conMock
    url = 'url'
    data = 'data'
    requestMock.return_value = 'request'
    self.controller.cachedconnect = None
    self.assertEqual('response', self.controller.sendRequest(url, data))
    security_mock.CachedHTTPSConnection.assert_called_once_with(self.controller.config)
    requestMock.called_once_with(url, data, {'Content-Type': 'application/json', })
