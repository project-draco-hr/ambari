{
  Iterator<Map<String,Object>> iterator=request.getProperties().iterator();
  if (iterator.hasNext()) {
    Map<String,Object> updateProperties=iterator.next();
    ensureClusters();
    List<StageEntity> entities=dao.findAll(request,predicate);
    for (    StageEntity entity : entities) {
      String stageStatus=(String)updateProperties.get(STAGE_STATUS);
      if (stageStatus != null) {
        StageStatus desiredStatus=StageStatus.valueOf(stageStatus);
        updateStageStatus(entity,desiredStatus);
      }
    }
  }
  notifyUpdate(Resource.Type.Stage,request,predicate);
  return getRequestStatus(null);
}
