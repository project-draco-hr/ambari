{
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  dao=injector.getInstance(UpgradeDAO.class);
  requestDAO=injector.getInstance(RequestDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
  UpgradeEntity entity=new UpgradeEntity();
  entity.setClusterId(Long.valueOf(1));
  entity.setRequestId(Long.valueOf(1));
  entity.setFromVersion("");
  entity.setToVersion("");
  entity.setUpgradeType(UpgradeType.ROLLING);
  entity.setUpgradePackage("test-upgrade");
  entity.setDowngradeAllowed(true);
  UpgradeGroupEntity group=new UpgradeGroupEntity();
  group.setName("group_name");
  group.setTitle("group title");
  List<UpgradeItemEntity> items=new ArrayList<UpgradeItemEntity>();
  UpgradeItemEntity item=new UpgradeItemEntity();
  item.setState(UpgradeState.IN_PROGRESS);
  item.setStageId(Long.valueOf(1L));
  items.add(item);
  item=new UpgradeItemEntity();
  item.setState(UpgradeState.COMPLETE);
  item.setStageId(Long.valueOf(1L));
  items.add(item);
  group.setItems(items);
  entity.setUpgradeGroups(Collections.singletonList(group));
  dao.create(entity);
}
