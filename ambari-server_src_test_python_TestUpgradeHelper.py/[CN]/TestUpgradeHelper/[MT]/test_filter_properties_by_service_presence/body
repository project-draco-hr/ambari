@patch.object(upgradeHelper, 'is_services_exists')
def test_filter_properties_by_service_presence(self, is_service_exists_mock):
    catalog_factory = UpgradeCatalogFactoryMock(self.test_catalog)
    catalog = catalog_factory.get_catalog(self.catalog_from, self.catalog_to)
    cfg_type = self.catalog_cfg_type
    is_service_exists_mock.return_value = True
    old_services = upgradeHelper.Options.SERVICES
    upgradeHelper.Options.SERVICES = set([self.required_service])
    actual_result = upgradeHelper.filter_properties_by_service_presence(cfg_type, catalog, catalog.get_properties(self.catalog_cfg_type))
    upgradeHelper.Options.SERVICES = old_services
    self.assertEqual(catalog.get_properties(self.catalog_cfg_type), actual_result)
