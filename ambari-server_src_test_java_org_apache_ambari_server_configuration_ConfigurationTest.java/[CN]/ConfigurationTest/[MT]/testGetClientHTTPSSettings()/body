{
  File passFile=File.createTempFile("https.pass.","txt");
  passFile.deleteOnExit();
  String password="pass12345";
  FileUtils.writeStringToFile(passFile,password);
  Properties ambariProperties=new Properties();
  ambariProperties.setProperty(Configuration.API_USE_SSL,"true");
  ambariProperties.setProperty(Configuration.CLIENT_API_SSL_KSTR_DIR_NAME_KEY,passFile.getParent());
  ambariProperties.setProperty(Configuration.CLIENT_API_SSL_CRT_PASS_FILE_NAME_KEY,passFile.getName());
  Configuration conf=new Configuration(ambariProperties);
  Assert.assertTrue(conf.getApiSSLAuthentication());
  Assert.assertFalse(conf.getConfigsMap().get(Configuration.KSTR_NAME_KEY).equals(conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_KSTR_NAME_KEY)));
  Assert.assertFalse(conf.getConfigsMap().get(Configuration.SRVR_CRT_NAME_KEY).equals(conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_NAME_KEY)));
  Assert.assertEquals("https.keystore.p12",conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_KSTR_NAME_KEY));
  Assert.assertEquals(passFile.getName(),conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_PASS_FILE_NAME_KEY));
  Assert.assertEquals(password,conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_PASS_KEY));
}
