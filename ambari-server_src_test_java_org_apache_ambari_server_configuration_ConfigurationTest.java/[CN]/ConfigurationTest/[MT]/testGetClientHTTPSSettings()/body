{
  File passFile=File.createTempFile("https.pass.","txt");
  passFile.deleteOnExit();
  String password="pass12345";
  FileUtils.writeStringToFile(passFile,password);
  Properties ambariProperties=new Properties();
  ambariProperties.setProperty(Configuration.API_USE_SSL,"true");
  ambariProperties.setProperty(Configuration.CLIENT_API_SSL_KSTR_DIR_NAME_KEY,passFile.getParent());
  ambariProperties.setProperty(Configuration.CLIENT_API_SSL_CRT_PASS_FILE_NAME_KEY,passFile.getName());
  String oneWayPort=RandomStringUtils.randomNumeric(4);
  String twoWayPort=RandomStringUtils.randomNumeric(4);
  ambariProperties.setProperty(Configuration.SRVR_TWO_WAY_SSL_PORT_KEY,twoWayPort.toString());
  ambariProperties.setProperty(Configuration.SRVR_ONE_WAY_SSL_PORT_KEY,oneWayPort.toString());
  Configuration conf=new Configuration(ambariProperties);
  Assert.assertTrue(conf.getApiSSLAuthentication());
  Assert.assertFalse(conf.getConfigsMap().get(Configuration.KSTR_NAME_KEY).equals(conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_KSTR_NAME_KEY)));
  Assert.assertFalse(conf.getConfigsMap().get(Configuration.SRVR_CRT_NAME_KEY).equals(conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_NAME_KEY)));
  Assert.assertEquals("keystore.p12",conf.getConfigsMap().get(Configuration.KSTR_NAME_KEY));
  Assert.assertEquals("PKCS12",conf.getConfigsMap().get(Configuration.KSTR_TYPE_KEY));
  Assert.assertEquals("keystore.p12",conf.getConfigsMap().get(Configuration.TSTR_NAME_KEY));
  Assert.assertEquals("PKCS12",conf.getConfigsMap().get(Configuration.TSTR_TYPE_KEY));
  Assert.assertEquals("https.keystore.p12",conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_KSTR_NAME_KEY));
  Assert.assertEquals("PKCS12",conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_KSTR_TYPE_KEY));
  Assert.assertEquals("https.keystore.p12",conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_TSTR_NAME_KEY));
  Assert.assertEquals("PKCS12",conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_TSTR_TYPE_KEY));
  Assert.assertEquals(passFile.getName(),conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_PASS_FILE_NAME_KEY));
  Assert.assertEquals(password,conf.getConfigsMap().get(Configuration.CLIENT_API_SSL_CRT_PASS_KEY));
  Assert.assertEquals(Integer.parseInt(twoWayPort),conf.getTwoWayAuthPort());
  Assert.assertEquals(Integer.parseInt(oneWayPort),conf.getOneWayAuthPort());
}
