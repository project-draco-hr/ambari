{
  Request request=PropertyHelper.getReadRequest(AlertNoticeResourceProvider.ALERT_NOTICE_CLUSTER_NAME,AlertNoticeResourceProvider.ALERT_NOTICE_ID,AlertNoticeResourceProvider.ALERT_NOTICE_HISTORY_ID,AlertNoticeResourceProvider.ALERT_NOTICE_SERVICE_NAME,AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_ID,AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_NAME,AlertNoticeResourceProvider.ALERT_NOTICE_STATE);
  AmbariManagementController amc=createMock(AmbariManagementController.class);
  Predicate predicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_CLUSTER_NAME).equals("c1").toPredicate();
  expect(m_dao.findAllNotices(EasyMock.anyObject(AlertNoticeRequest.class))).andReturn(getMockEntities());
  replay(amc,m_dao);
  AlertNoticeResourceProvider provider=createProvider();
  Set<Resource> results=provider.getResources(request,predicate);
  assertEquals(1,results.size());
  Resource r=results.iterator().next();
  Assert.assertEquals("Administrators",r.getPropertyValue(AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_NAME));
  Assert.assertEquals(NotificationState.FAILED,r.getPropertyValue(AlertNoticeResourceProvider.ALERT_NOTICE_STATE));
  verify(amc,m_dao);
}
