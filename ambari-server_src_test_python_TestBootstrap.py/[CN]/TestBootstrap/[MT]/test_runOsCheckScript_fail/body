@patch.object(PSSH, 'run')
@patch.object(PSSH, 'getstatus')
def test_runOsCheckScript_fail(self, getstatus_method, run_method):
    good_stats = {'hostname': {'exitstatus': 1, 'log': '', }, }
    getstatus_method.return_value = good_stats
    os.environ[AMBARI_PASSPHRASE_VAR_NAME] = ''
    bootstrap = BootStrap(['hostname'], 'user', 'sshKeyFile', 'scriptDir', 'bootdir', 'setupAgentFile', 'ambariServer', 'centos6', None, '8440')
    bootstrap.statuses = good_stats
    bootstrap.runOsCheckScript()
    self.assertTrue(run_method.called)
    self.assertTrue(getstatus_method.called)
    self.assertTrue(('hostname' not in bootstrap.successive_hostlist))
    pass
