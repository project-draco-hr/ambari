def test_return_failed_status_for_hanging_scp_threads_after_timeout(self):
    bootstrap.HOST_BOOTSTRAP_TIMEOUT = 1
    forever_hanging_timeout = 5
    SCP.run = (lambda self: time.sleep(forever_hanging_timeout))
    pscp = PSCP(['hostname'], 'root', 'sshKeyFile', 'inputfile', 'remote', 'bootdir')
    self.assertTrue((pscp.ret == {}))
    starttime = time.time()
    pscp.run()
    self.assertTrue((pscp.ret != {}))
    self.assertTrue(((time.time() - starttime) < forever_hanging_timeout))
    self.assertTrue((pscp.ret['hostname']['log'] == 'FAILED'))
    self.assertTrue((pscp.ret['hostname']['exitstatus'] == (-1)))
