@patch.object(bootstrap, 'get_difference')
@patch.object(SCP, 'writeLogToFile')
@patch.object(SSH, 'writeLogToFile')
@patch.object(Popen, 'communicate')
@patch.object(BootStrap, 'createDoneFiles')
@patch.object(BootStrap, 'getRunSetupWithPasswordCommand')
@patch.object(BootStrap, 'getMoveRepoFileWithPasswordCommand')
def test_commands_with_password_are_called_for_user_with_password(self, getMoveRepoFileWithPasswordCommand_method, getRunSetupWithPasswordCommand_method, createDoneFiles_method, communicate_method, SSH_writeLogToFile_method, SCP_writeLogToFile_method, get_difference_mock):
    SCP_writeLogToFile_method.return_value = None
    SSH_writeLogToFile_method.return_value = None
    get_difference_mock.return_value = None
    communicate_method.return_value = ('', '')
    createDoneFiles_method.return_value = None
    getRunSetupWithPasswordCommand_method.return_value = ''
    getMoveRepoFileWithPasswordCommand_method.return_value = ''
    os.environ[AMBARI_PASSPHRASE_VAR_NAME] = ''
    hosts = ['hostname']
    bootstrap_obj = BootStrap(['hostname'], 'user', 'sshKeyFile', 'scriptDir', 'bootdir', 'setupAgentFile', 'ambariServer', 'centos6', None, '8440', 'passwordFile')
    bootstrap_obj.successive_hostlist = hosts
    bootstrap_obj.copyOsCheckScript()
    bootstrap_obj.successive_hostlist = hosts
    bootstrap_obj.copyNeededFiles()
    bootstrap_obj.successive_hostlist = hosts
    bootstrap_obj.runSetupAgent()
    self.assertTrue(getRunSetupWithPasswordCommand_method.called)
    self.assertTrue(getMoveRepoFileWithPasswordCommand_method.called)
    getRunSetupWithPasswordCommand_method.reset()
    getMoveRepoFileWithPasswordCommand_method.reset()
    getRunSetupWithPasswordCommand_method.reset()
    getMoveRepoFileWithPasswordCommand_method.reset()
    bootstrap_obj.successive_hostlist = None
    bootstrap_obj.copyOsCheckScript()
    self.assertTrue(getRunSetupWithPasswordCommand_method.called)
    self.assertTrue(getMoveRepoFileWithPasswordCommand_method.called)
