{
  final Set<ServiceComponentHostRequest> requests=new HashSet<ServiceComponentHostRequest>();
  RequestStatusResponse response=null;
  final boolean runSmokeTest="true".equals(getQueryParameterValue(QUERY_PARAMETERS_RUN_SMOKE_TEST_ID,predicate)) ? true : false;
  Iterator<Map<String,Object>> iterator=request.getProperties().iterator();
  if (iterator.hasNext()) {
    for (    Map<String,Object> propertyMap : getPropertyMaps(request.getProperties().iterator().next(),predicate)) {
      requests.add(getRequest(propertyMap));
    }
    response=modifyResources(new Command<RequestStatusResponse>(){
      @Override public RequestStatusResponse invoke() throws AmbariException {
        return getManagementController().updateHostComponents(requests,request.getRequestInfoProperties(),runSmokeTest);
      }
    }
);
    notifyUpdate(Resource.Type.HostComponent,request,predicate);
  }
  return getRequestStatus(response);
}
