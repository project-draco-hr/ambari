def test_infinit_registration_retries(self):
    netutil = NetUtil()
    netutil.CONNECT_SERVER_RETRY_INTERVAL_SEC = 0.1
    thread = Thread(target=netutil.try_to_connect, args=(BAD_URL, (-1)))
    thread.start()
    time.sleep(0.5)
    threadWasAlive = thread.isAlive()
    netutil.DEBUG_STOP_RETRIES_FLAG = True
    time.sleep(1)
    self.assertEquals(threadWasAlive, True, 'Thread should still be retrying to connect')
    self.assertEquals(thread.isAlive(), False, 'Thread should stop now')
