{
  TestResourceDefinition resourceDefinition=new TestResourceDefinition();
  ResourceDefinition.PostProcessor processor=resourceDefinition.getPostProcessors().iterator().next();
  TreeNode<Resource> node=new TreeNodeImpl<Resource>(new TreeNodeImpl<Resource>(null,null,null),null,"test");
  String href="/stacks/HDP/versions/1.3.2/stackServices/foo";
  processor.process(null,node,href);
  assertEquals("/stacks/HDP/versions/1.3.2/services/foo",node.getProperty("href"));
  href="/stacks2/HDP/versions/1.3.2/stackServices/foo";
  processor.process(null,node,href);
  assertEquals("/stacks2/HDP/versions/1.3.2/stackServices/foo",node.getProperty("href"));
  href="/stacks/HDP/versions/1.3.2/stackServices/foo/serviceComponents";
  processor.process(null,node,href);
  assertEquals("/stacks/HDP/versions/1.3.2/services/foo/components",node.getProperty("href"));
  href="/stacks2/HDP/versions/1.3.2/stackServices/foo/serviceComponents";
  processor.process(null,node,href);
  assertEquals("/stacks2/HDP/versions/1.3.2/stackServices/foo/serviceComponents",node.getProperty("href"));
  href="/stacks/HDP/versions/1.3.2/operatingSystems";
  processor.process(null,node,href);
  assertEquals("/stacks/HDP/versions/1.3.2/operating_systems",node.getProperty("href"));
  href="/stacks2/HDP/versions/1.3.2/operatingSystems";
  processor.process(null,node,href);
  assertEquals("/stacks2/HDP/versions/1.3.2/operatingSystems",node.getProperty("href"));
}
