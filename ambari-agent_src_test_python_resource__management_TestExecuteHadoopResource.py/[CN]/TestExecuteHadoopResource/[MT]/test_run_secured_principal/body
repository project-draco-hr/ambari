@patch('resource_management.core.providers.system.ExecuteProvider')
def test_run_secured_principal(self, execute_mock):
    '\n    Test with "principal" argument\n    '
    with Environment('/') as env:
        ExecuteHadoop('command', action='run', kinit_path_local='path', conf_dir='conf_dir', user='user', tries=1, keytab='keytab', security_enabled=True, kinit_override=False, try_sleep=0, logoutput=True, principal='principal')
        self.assertEqual(execute_mock.call_count, 2)
        self.assertEqual(execute_mock.call_args_list[0][0][0].command, 'path -kt keytab principal')
        self.assertEqual(execute_mock.call_args_list[1][0][0].command, 'hadoop --config conf_dir command')
