{
  HiveQueryId hiveQueryId1=getSampleHiveQueryId("ENTITY-NAME");
  hiveQueryId1.operationId=Aggregator.hexStringToUrlSafeBase64("1a1b");
  Job job1=getSampleViewJob("1");
  StoredOperationHandle operationHandle1=getSampleOperationHandle("5","1");
  operationHandle1.setGuid("1a1b");
  HiveQueryId hiveQueryId2=getSampleHiveQueryId("ENTITY-NAME2");
  hiveQueryId2.operationId=Aggregator.hexStringToUrlSafeBase64("2a2a");
  Job job3=getSampleViewJob("3");
  StoredOperationHandle operationHandle3=getSampleOperationHandle("6","3");
  operationHandle3.setGuid("3c3d");
  MockATSParser atsParser=getMockATSWithQueries(hiveQueryId1,hiveQueryId2);
  MockJobResourceManager jobResourceManager=getJobResourceManagerWithJobs(job1,job3);
  MockOperationHandleResourceManager operationHandleRM=getOperationHandleRMWithEntities(operationHandle1,operationHandle3);
  Aggregator aggregator=new Aggregator(jobResourceManager,operationHandleRM,atsParser);
  List<Job> aggregated=aggregator.readAll("luke");
  Assert.assertEquals(3,aggregated.size());
}
