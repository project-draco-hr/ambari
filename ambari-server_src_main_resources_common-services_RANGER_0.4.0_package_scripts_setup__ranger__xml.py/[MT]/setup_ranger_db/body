def setup_ranger_db():
    import params
    File(params.downloaded_custom_connector, content=DownloadSource(params.driver_curl_source))
    Directory(params.java_share_dir, mode=493)
    if (not os.path.isfile(params.driver_curl_target)):
        Execute(('cp', '--remove-destination', params.downloaded_custom_connector, params.driver_curl_target), path=['/bin', '/usr/bin/'], not_if=format('test -f {driver_curl_target}'), sudo=True)
    if (not os.path.isfile(os.path.join(params.ranger_home, 'ews', 'lib', params.jdbc_jar_name))):
        Execute(('cp', '--remove-destination', params.downloaded_custom_connector, os.path.join(params.ranger_home, 'ews', 'lib')), path=['/bin', '/usr/bin/'], sudo=True)
    ModifyPropertiesFile(format('{ranger_home}/install.properties'), properties=params.config['configurations']['admin-properties'])
    dba_setup = format('python {ranger_home}/dba_script.py -q')
    db_setup = format('python {ranger_home}/db_setup.py')
    Execute(dba_setup, environment={'RANGER_ADMIN_HOME': params.ranger_home, 'JAVA_HOME': params.java_home, }, logoutput=True)
    Execute(db_setup, environment={'RANGER_ADMIN_HOME': params.ranger_home, 'JAVA_HOME': params.java_home, }, logoutput=True)
