def test_disabled_definitions(self):
    test_file_path = os.path.join('ambari_agent', 'dummy_files')
    test_stack_path = os.path.join('ambari_agent', 'dummy_files')
    test_common_services_path = os.path.join('ambari_agent', 'dummy_files')
    test_host_scripts_path = os.path.join('ambari_agent', 'dummy_files')
    cluster_configuration = self.__get_cluster_configuration()
    ash = AlertSchedulerHandler(test_file_path, test_stack_path, test_common_services_path, test_host_scripts_path, cluster_configuration, self.config, None)
    ash.start()
    self.assertEquals(1, ash.get_job_count())
    definition_json = self._get_port_alert_definition()
    alert = PortAlert(definition_json, definition_json['source'], self.config)
    ash.schedule_definition(alert)
    self.assertEquals(2, ash.get_job_count())
    definition_json['enabled'] = False
    alert = PortAlert(definition_json, definition_json['source'], self.config)
    ash.schedule_definition(alert)
    self.assertEquals(2, ash.get_job_count())
    definition_json['enabled'] = True
    pa = PortAlert(definition_json, definition_json['source'], self.config)
    ash.schedule_definition(pa)
    self.assertEquals(3, ash.get_job_count())
