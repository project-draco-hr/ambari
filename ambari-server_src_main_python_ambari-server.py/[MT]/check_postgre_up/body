def check_postgre_up():
    pg_status = get_postgre_status()
    if (pg_status == PG_STATUS_RUNNING):
        print_info_msg('PostgreSQL is running')
        return 0
    else:
        if (OS != OS_UBUNTU):
            print 'Running initdb: This may take upto a minute.'
            (retcode, out, err) = run_os_command(PG_INITDB_CMD)
            if (retcode == 0):
                print out
        print 'About to start PostgreSQL'
        try:
            process = subprocess.Popen(PG_START_CMD.split(' '), stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)
            time.sleep(20)
            result = process.poll()
            print_info_msg(('Result of postgres start cmd: ' + str(result)))
            if (result is None):
                process.kill()
                pg_status = get_postgre_status()
                if (pg_status == PG_STATUS_RUNNING):
                    print_info_msg('Postgres process is running. Returning...')
                    return 0
            else:
                retcode = result
        except Exception as e:
            pg_status = get_postgre_status()
            if (pg_status == PG_STATUS_RUNNING):
                return 0
            else:
                print_error_msg(('Postgres start failed. ' + str(e)))
                return 1
        return retcode
