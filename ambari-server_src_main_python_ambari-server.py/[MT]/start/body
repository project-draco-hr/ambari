def start(args):
    if os.path.exists(((PID_DIR + os.sep) + PID_NAME)):
        f = open(((PID_DIR + os.sep) + PID_NAME), 'r')
        pid = int(f.readline())
        f.close()
        try:
            os.kill(pid, 0)
            print 'Server is already running.'
            return
        except OSError as e:
            print_info_msg('Server is not running, continue.')
    conf_dir = get_conf_dir()
    jdk_path = find_jdk()
    if (jdk_path is None):
        print_error_msg(('No JDK found, please run the "setup" command to install a JDK automatically or install any JDK manually to ' + JDK_INSTALL_DIR))
        return (-1)
    retcode = check_postgre_up()
    if (not (retcode == 0)):
        print_error_msg('Unable to start PostgreSQL server. Exiting')
        sys.exit(retcode)
    print 'Checking iptables...'
    (retcode, out) = check_iptables()
    if ((not (retcode == 0)) and (out == IP_TBLS_ENABLED)):
        print_error_msg('Failed to stop iptables. Exiting')
        sys.exit(retcode)
    command = SERVER_START_CMD.format(jdk_path, conf_dir, get_ambari_jars())
    print ('Running server: ' + command)
    server_process = subprocess.Popen(['/bin/sh', '-c', command])
    f = open(((PID_DIR + os.sep) + PID_NAME), 'w')
    f.write(str(server_process.pid))
    f.close()
