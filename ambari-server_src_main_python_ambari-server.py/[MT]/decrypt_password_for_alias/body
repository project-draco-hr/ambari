def decrypt_password_for_alias(alias):
    properties = get_ambari_properties()
    if (properties == (-1)):
        raise FatalException(1, None)
    isSecure = properties.get_property(SECURITY_IS_ENCRYPTION_ENABLED)
    if (isSecure and (isSecure.lower() == 'true')):
        keyLocation = get_master_key_location(properties)
        masterKeyFile = search_file(SECURITY_MASTER_KEY_FILENAME, keyLocation)
        masterKey = None
        if (not masterKeyFile):
            masterKey = get_validated_string_input(('Please provide master key ' + 'for unlocking credential store: '), '', '.*', '', False, False)
        return read_passwd_for_alias(alias, masterKey)
    else:
        return alias
