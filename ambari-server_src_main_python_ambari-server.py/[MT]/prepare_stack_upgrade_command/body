def prepare_stack_upgrade_command(args, stackId):
    db_index = DATABASE_NAMES.index(args.database)
    tool = DATABASE_CLI_TOOLS_DESC[db_index]
    scriptPath = DATABASE_STACK_UPGRADE_SCRIPTS[db_index]
    (stack_name, stack_version) = stackId.split(STACK_NAME_VER_SEP)
    if (args.database == 'oracle'):
        sid_or_sname = 'sid'
        if ((hasattr(args, 'sid_or_sname') and (args.sid_or_sname == 'sname')) or (hasattr(args, 'jdbc_url') and args.jdbc_url and re.match(ORACLE_SNAME_PATTERN, args.jdbc_url))):
            print_info_msg('using SERVICE_NAME instead of SID for Oracle')
            sid_or_sname = 'service_name'
        command = '{0} {1}'.format(tool, ORACLE_UPGRADE_STACK_ARGS.format(args.database_username, args.database_password, args.database_host, args.database_port, args.database_name, scriptPath, sid_or_sname, stack_name, stack_version)).strip()
        return command
    elif (args.database == 'mysql'):
        command = '{0} {1}'.format(tool, MYSQL_UPGRADE_STACK_ARGS.format(args.database_host, args.database_port, args.database_username, args.database_password, args.database_name, scriptPath, stack_name, stack_version)).strip()
        return command
    pass
