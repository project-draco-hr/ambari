def configure_pg_hba_ambaridb_users():
    args = optparse.Values()
    configurePostgresUsernamePassword(args)
    with open(PG_HBA_CONF_FILE, 'a') as pgHbaConf:
        pgHbaConf.write('\n')
        pgHbaConf.write((('local  all  ' + args.postgres_username) + ',mapred md5'))
        pgHbaConf.write('\n')
        pgHbaConf.write((('host  all   ' + args.postgres_username) + ',mapred 0.0.0.0/0  md5'))
        pgHbaConf.write('\n')
        pgHbaConf.write((('host  all   ' + args.postgres_username) + ',mapred ::/0 md5'))
        pgHbaConf.write('\n')
    command = PG_HBA_RELOAD_CMD.format(PG_HBA_DIR)
    (retcode, out, err) = run_os_command(command)
    if (not (retcode == 0)):
        print err
        sys.exit(retcode)
