def run_stack_upgrade(stackName, stackVersion, repo_url, repo_url_os):
    jdk_path = find_jdk()
    if (jdk_path is None):
        return (1, '', ('No JDK found, please run the "setup"                     command to install a JDK automatically or install any                     JDK manually to ' + JDK_INSTALL_DIR))
    stackId = {}
    stackId[stackName] = stackVersion
    if (repo_url is not None):
        stackId['repo_url'] = repo_url
    if (repo_url_os is not None):
        stackId['repo_url_os'] = repo_url_os
    command = STACK_UPGRADE_HELPER_CMD.format(jdk_path, get_conf_dir(), get_ambari_classpath(), 'updateStackId', (("'" + json.dumps(stackId)) + "'"))
    return run_os_command(command)
