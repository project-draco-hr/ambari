def setup_https(args):
    if (not is_root()):
        err = 'ambari-server setup-https should be run with root-level privileges'
        raise FatalException(4, err)
    args.exit_message = None
    if (not SILENT):
        properties = get_ambari_properties()
        try:
            security_server_keys_dir = properties.get_property(SSL_KEY_DIR)
            client_api_ssl_port = (DEFAULT_SSL_API_PORT if (properties.get_property(SSL_API_PORT) in '') else properties.get_property(SSL_API_PORT))
            api_ssl = (properties.get_property(SSL_API) in ['true'])
            cert_was_imported = False
            cert_must_import = True
            if api_ssl:
                if get_YN_input('Do you want to disable HTTPS [y/n] (n)? ', False):
                    properties.process_pair(SSL_API, 'false')
                    cert_must_import = False
                else:
                    properties.process_pair(SSL_API_PORT, get_validated_string_input((('SSL port [' + str(client_api_ssl_port)) + '] ? '), str(client_api_ssl_port), '^[0-9]{1,5}$', 'Invalid port.', False, validatorFunction=is_valid_https_port))
                    cert_was_imported = import_cert_and_key_action(security_server_keys_dir, properties)
            elif get_YN_input('Do you want to configure HTTPS [y/n] (y)? ', True):
                properties.process_pair(SSL_API_PORT, get_validated_string_input((('SSL port [' + str(client_api_ssl_port)) + '] ? '), str(client_api_ssl_port), '^[0-9]{1,5}$', 'Invalid port.', False, validatorFunction=is_valid_https_port))
                cert_was_imported = import_cert_and_key_action(security_server_keys_dir, properties)
            else:
                return
            if (cert_must_import and (not cert_was_imported)):
                print 'Setup of HTTPS failed. Exiting.'
                return
            conf_file = find_properties_file()
            f = open(conf_file, 'w')
            properties.store(f, "Changed by 'ambari-server setup-https' command")
            if is_server_runing():
                print ('NOTE: Restart Ambari Server to apply changes' + ' ("ambari-server restart|stop|start")')
        except KeyError as e:
            err = ((('Property ' + str(e)) + ' is not defined at ') + conf_file)
            raise FatalException(1, err)
    else:
        print 'setup-https is not enabled in silent mode.'
    ambari_user = read_ambari_user()
    if ambari_user:
        adjust_directory_permissions(ambari_user)
