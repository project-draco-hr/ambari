def restart_postgres():
    print 'Restarting PostgreSQL'
    process = subprocess.Popen(PG_RESTART_CMD.split(' '), stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)
    time.sleep(5)
    result = process.poll()
    if ((result == 'None') or (result == '-N')):
        printInfoMsg('Killing restart PostgresSQL process')
        process.kill()
        pg_status = get_postgre_status()
        if ((pg_status == 'unused') or (pg_status == 'stopped')):
            printInfoMsg('PostgreSQL is stopped. Restarting ...')
            (retcode, out, err) = run_os_command(PG_START_CMD)
            return retcode
    return 0
