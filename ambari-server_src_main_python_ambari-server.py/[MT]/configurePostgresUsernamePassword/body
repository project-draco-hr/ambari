def configurePostgresUsernamePassword(args):
    conf_file = search_file(AMBARI_PROPERTIES_FILE, get_conf_dir())
    properties = Properties()
    try:
        properties.load(open(conf_file))
    except Exception as e:
        print ('Could not read "%s": %s' % (conf_file, e))
        return (-1)
    username = properties[JDBC_USER_NAME_PROPERTY]
    passFilePath = properties[JDBC_PASSWORD_FILE_PROPERTY]
    if (username and passFilePath):
        printInfoMsg('Database username + password already configured - skipping')
        args.postgres_username = username
        with open(passFilePath) as passFile:
            args.postgres_password = passFile.read()
        return 1
    usernameDefault = 'ambari-server'
    usernamePrompt = (('Username [' + usernameDefault) + ']: ')
    usernamePattern = '^[a-zA-Z_][a-zA-Z0-9_\\-]*$'
    usernameDescr = 'Invalid characters in username. Start with _ or alpha followed by alphanumeric or _ or - characters'
    username = usernameDefault
    password = PG_DEFAULT_PASSWORD
    ok = getYNInput('Enter advanced database configuration [y/n] (n)? ', False)
    if (ok == True):
        username = getValidatedStringInput(usernamePrompt, usernameDefault, usernamePattern, usernameDescr, False)
        print ('Database username set to: ' + username)
        password = configurePostgresPassword()
    passFilePath = os.path.join(os.path.dirname(conf_file), JDBC_PASSWORD_FILENAME)
    printInfoMsg(('Database username set to: ' + username))
    printInfoMsg(('Database password set to: ' + password))
    writeProperty(JDBC_USER_NAME_PROPERTY, username)
    with open(passFilePath, 'w+') as passFile:
        passFile.write(password)
        pass
    os.chmod(passFilePath, (stat.S_IREAD | stat.S_IWRITE))
    writeProperty(JDBC_PASSWORD_FILE_PROPERTY, passFilePath)
    args.postgres_username = username
    args.postgres_password = password
