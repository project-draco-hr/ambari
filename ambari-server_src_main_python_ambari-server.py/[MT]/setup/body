def setup(args):
    retcode = check_sudo()
    if (not (retcode == 0)):
        printErrorMsg('ERROR: sudo command not found on host. Please install sudo and re-run ambari-server setup. Exiting.')
        sys.exit(retcode)
    print 'Checking SELinux...'
    retcode = check_selinux()
    if (not (retcode == 0)):
        printErrorMsg('Failed to disable SELinux. Exiting.')
        sys.exit(retcode)
    print 'Checking iptables...'
    (retcode, out) = check_iptables()
    if ((not (retcode == 0)) and (out == IP_TBLS_ENABLED)):
        printErrorMsg('Failed to stop iptables. Exiting.')
        sys.exit(retcode)
    print 'Checking PostgreSQL...'
    retcode = check_postgre_up()
    if (not (retcode == 0)):
        printErrorMsg('Unable to start PostgreSQL server. Exiting')
        sys.exit(retcode)
    print 'Configuring database...'
    retcode = setup_db(args)
    if (not (retcode == 0)):
        printErrorMsg('Running database init script was failed. Exiting.')
        sys.exit(retcode)
    print 'Configuring PostgreSQL...'
    retcode = configure_postgres()
    if (not (retcode == 0)):
        printErrorMsg('Unable to configure PostgreSQL server. Exiting')
        sys.exit(retcode)
    print 'Checking JDK...'
    retcode = download_jdk(args)
    if (not (retcode == 0)):
        printErrorMsg('Downloading or installing JDK failed. Exiting.')
        sys.exit(retcode)
    print 'Completing setup...'
    retcode = configure_os_settings()
    if (not (retcode == 0)):
        printErrorMsg('Configure of OS settings in ambari.properties failed. Exiting.')
        sys.exit(retcode)
    print "Ambari Server 'setup' finished successfully"
