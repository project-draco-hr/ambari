@retry(times=30, sleep_time=30, err_class=Fail)
def call_and_match(cmd, user, regex, regex_search_flags):
    if (not is_region_server_process_running()):
        Logger.info('RegionServer process is not running')
        raise Fail('RegionServer process is not running')
    (code, out) = shell.call(cmd, user=user)
    if (not (out and re.search(regex, out, regex_search_flags))):
        raise Fail('Could not verify RS available')
