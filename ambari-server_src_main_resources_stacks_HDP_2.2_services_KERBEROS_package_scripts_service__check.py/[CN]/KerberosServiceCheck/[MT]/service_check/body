def service_check(self, env):
    import params
    if ((params.smoke_test_principal is not None) and (params.smoke_test_keytab_file is not None) and os.path.isfile(params.smoke_test_keytab_file)):
        print ('Performing kinit using smoke test user: %s' % params.smoke_test_principal)
        (code, out) = self.test_kinit({'principal': params.smoke_test_principal, 'keytab_file': params.smoke_test_keytab_file, })
        test_performed = True
    elif (params.test_principal is not None):
        print ('Performing kinit using test user: %s' % params.test_principal)
        (code, out) = self.test_kinit({'principal': params.test_principal, 'keytab_file': params.test_keytab_file, 'keytab': params.test_keytab, 'password': params.test_password, })
        test_performed = True
    else:
        code = 0
        out = ''
        test_performed = False
    if test_performed:
        if (code == 0):
            print 'Test executed successfully.'
        else:
            print ('Test failed with error code %d: %s.' % (code, out))
    else:
        print 'Test not performed - no test principal was available'
