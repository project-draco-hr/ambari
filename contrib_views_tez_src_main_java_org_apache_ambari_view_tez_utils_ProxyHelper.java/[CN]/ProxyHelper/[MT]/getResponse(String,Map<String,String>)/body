{
  LOG.debug("Fetching the result from the URL: {} using proxy",url);
  InputStream inputStream=null;
  try {
    URLConnectionProvider provider=viewContext.getURLConnectionProvider();
    HttpURLConnection connection=provider.getConnectionAsCurrent(url,"GET",(String)null,headers);
    if (connection.getResponseCode() != Response.Status.OK.getStatusCode()) {
      LOG.error("Failure in fetching results for the URL: {}. Status: {}",url,connection.getResponseCode());
      inputStream=connection.getErrorStream();
      String trace=IOUtils.toString(inputStream);
      throw new ProxyException("Failed to fetch results by the proxy from url: " + url,connection.getResponseCode(),trace);
    }
    inputStream=connection.getInputStream();
    return IOUtils.toString(inputStream);
  }
 catch (  IOException e) {
    LOG.error("Cannot access the url: {}",url,e);
    throw new ProxyException("Failed to fetch results by the proxy from url: " + url + ".Internal Error.",Response.Status.INTERNAL_SERVER_ERROR.getStatusCode(),e.getMessage());
  }
 finally {
    if (inputStream != null) {
      try {
        inputStream.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
