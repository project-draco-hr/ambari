def write_stack_version(self, component, newVersion):
    self._lock.acquire()
    try:
        try:
            values = self.read_all_stack_versions()
            values[component] = newVersion
            logger.info('Backing up old stack versions file')
            backup = os.path.join(self.versionsFileDir, (self.VER_FILE + '.bak'))
            shutil.move(self.versionsFilePath, backup)
            logger.info('Writing new stack versions file')
            with open(self.versionsFilePath, 'w') as f:
                for key in values:
                    f.write(('%s\t%s\n' % (key, values)))
        except Exception as err:
            logger.error(("Can't write new stack version (%s %s) :%s " % (component, newVersion, err.message)))
            traceback.print_exc()
    finally:
        self._lock.release()
