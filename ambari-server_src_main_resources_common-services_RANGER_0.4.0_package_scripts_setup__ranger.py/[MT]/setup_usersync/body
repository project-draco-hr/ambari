def setup_usersync():
    import params
    file_path = format('{usersync_home}/install.properties')
    write_properties_to_file(file_path, usersync_properties())
    cmd = (format('cd {usersync_home} && ') + as_sudo([format('{usersync_home}/setup.sh')]))
    Execute(cmd, environment={'JAVA_HOME': params.java_home, }, logoutput=True)
    Execute(('chown', params.unix_user, params.usersync_start), sudo=True)
    Execute(('chown', params.unix_user, params.usersync_stop), sudo=True)
    File(params.usersync_services_file, mode=493)
