def setup_ranger(env):
    import params
    env.set_params(params)
    if check_db_connnection(env):
        file_path = (params.ranger_home + '/install.properties')
        if os.path.isfile(file_path):
            shutil.copyfile(file_path, (params.ranger_home + '/install-bk.properties'))
        else:
            raise Fail('Ranger admin install.properties file doesnot exist')
        write_properties_to_file(file_path, params.config['configurations']['admin-properties'])
        cmd = format('cd {ranger_home} && {ranger_home}/setup.sh')
        try:
            opt = Execute(cmd, environment={'JAVA_HOME': params.java_home, }, logoutput=True)
        except Exception as e:
            if os.path.isfile((params.ranger_home + '/install-bk.properties')):
                os.remove(file_path)
                os.rename((params.ranger_home + '/install-bk.properties'), file_path)
            raise Fail('Ranger installation Failed, {0}'.format(str(e)))
        if os.path.isfile((params.ranger_home + '/install-bk.properties')):
            os.remove(file_path)
            os.rename((params.ranger_home + '/install-bk.properties'), file_path)
        else:
            raise Fail('Ranger admin install.properties backup file doesnot exist')
