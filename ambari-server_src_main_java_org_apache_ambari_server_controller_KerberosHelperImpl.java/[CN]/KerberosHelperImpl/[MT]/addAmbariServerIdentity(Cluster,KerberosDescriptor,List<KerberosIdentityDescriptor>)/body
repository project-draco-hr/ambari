{
  try {
    KerberosDetails kerberosDetails=getKerberosDetails(cluster,null);
    if (kerberosDetails.createAmbariPrincipal()) {
      KerberosIdentityDescriptor ambariServerIdentity=kerberosDescriptor.getIdentity(KerberosHelper.AMBARI_IDENTITY_NAME);
      if (ambariServerIdentity != null) {
        identities.add(ambariServerIdentity);
      }
    }
  }
 catch (  KerberosInvalidConfigurationException e) {
    LOG.warn("Unable to append Ambari server principal: {}",e);
  }
}
