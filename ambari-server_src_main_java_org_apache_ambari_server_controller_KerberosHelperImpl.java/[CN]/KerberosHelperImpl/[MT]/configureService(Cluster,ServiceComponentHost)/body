{
  String serviceName=serviceComponentHost.getServiceName();
  String hostName=serviceComponentHost.getHostName();
  Map<String,Map<String,String>> existingConfigurations=calculateExistingConfigurations(cluster,hostName);
  Map<String,Map<String,String>> updates=getServiceConfigurationUpdates(cluster,existingConfigurations,Collections.singleton(serviceName),serviceAlreadyExists(cluster,serviceComponentHost));
  for (  Map.Entry<String,Map<String,String>> entry : updates.entrySet()) {
    configHelper.updateConfigType(cluster,ambariManagementController,entry.getKey(),entry.getValue(),null,ambariManagementController.getAuthName(),String.format("Enabling Kerberos for %s",serviceName));
  }
}
