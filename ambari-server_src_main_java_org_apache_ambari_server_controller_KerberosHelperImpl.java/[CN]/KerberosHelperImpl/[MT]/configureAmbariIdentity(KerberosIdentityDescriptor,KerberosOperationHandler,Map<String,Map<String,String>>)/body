{
  boolean created=false;
  KerberosPrincipalDescriptor principalDescriptor=ambariServerIdentity.getPrincipalDescriptor();
  if (principalDescriptor != null) {
    String principal=variableReplacementHelper.replaceVariables(principalDescriptor.getValue(),configurations);
    if (kerberosPrincipalDAO.exists(principal)) {
      KerberosKeytabDescriptor keytabDescriptor=ambariServerIdentity.getKeytabDescriptor();
      String keytabFilePath=variableReplacementHelper.replaceVariables(keytabDescriptor.getFile(),configurations);
      if (keytabDescriptor != null) {
        injector.getInstance(ConfigureAmbariIndetityServerAction.class).createAndConfigureAmbariKeytab(principal,kerberosOperationHandler,keytabFilePath,keytabDescriptor.getOwnerName(),keytabDescriptor.getOwnerAccess(),null);
      }
    }
  }
  return created;
}
