def _preexec_fn(resource):

    def preexec():
        if resource.group:
            gid = _coerce_gid(resource.group)
            os.setgid(gid)
            os.setegid(gid)
        if resource.user:
            uid = _coerce_uid(resource.user)
            os.setuid(uid)
            os.seteuid(uid)
    return preexec
