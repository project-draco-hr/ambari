def action_run(self):
    if self.resource.creates:
        if os.path.exists(self.resource.creates):
            return
    Logger.debug(('Executing %s' % self.resource))
    if (self.resource.path != []):
        if (not self.resource.environment):
            self.resource.environment = {}
        self.resource.environment['PATH'] = os.pathsep.join(self.resource.path)
    for i in range(0, self.resource.tries):
        try:
            shell.checked_call(self.resource.command, logoutput=self.resource.logoutput, cwd=self.resource.cwd, env=self.resource.environment, preexec_fn=_preexec_fn(self.resource), user=self.resource.user)
            break
        except Fail as ex:
            if (i == (self.resource.tries - 1)):
                raise ex
            else:
                Logger.info('Retrying after %d seconds. Reason: %s', self.resource.try_sleep, str(ex))
                time.sleep(self.resource.try_sleep)
