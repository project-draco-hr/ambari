{
  TestStreamProvider streamProvider=new TestStreamProvider("nagios_alerts.txt");
  NagiosPropertyProvider npp=new NagiosPropertyProvider(Resource.Type.Service,streamProvider,"ServiceInfo/cluster_name","ServiceInfo/service_name");
  npp.forceReset();
  Resource resource=new ResourceImpl(Resource.Type.Service);
  resource.setProperty("ServiceInfo/cluster_name",null);
  resource.setProperty("ServiceInfo/service_name","HBASE");
  Request request=PropertyHelper.getReadRequest(Collections.<String>emptySet(),new HashMap<String,TemporalInfo>());
  Set<Resource> set=npp.populateResources(Collections.singleton(resource),request,null);
  Assert.assertEquals(1,set.size());
}
