{
  module=new GuiceModule();
  injector=Guice.createInjector(module);
  NagiosPropertyProvider.init(injector);
  clusters=injector.getInstance(Clusters.class);
  Cluster cluster=createMock(Cluster.class);
  expect(cluster.getAlerts()).andReturn(Collections.<Alert>emptySet()).anyTimes();
  expect(clusters.getCluster("c1")).andReturn(cluster).anyTimes();
  Service nagiosService=createMock(Service.class);
  expect(cluster.getService("NAGIOS")).andReturn(nagiosService).anyTimes();
  ServiceComponent nagiosServiceComponent=createMock(ServiceComponent.class);
  expect(nagiosService.getServiceComponent("NAGIOS_SERVER")).andReturn(nagiosServiceComponent).anyTimes();
  ServiceComponentHost nagiosScHost=createMock(ServiceComponentHost.class);
  Map<String,ServiceComponentHost> map1=new HashMap<String,ServiceComponentHost>();
  map1.put(HOST,nagiosScHost);
  expect(nagiosServiceComponent.getServiceComponentHosts()).andReturn(map1).anyTimes();
  replay(clusters,cluster,nagiosService,nagiosServiceComponent);
}
