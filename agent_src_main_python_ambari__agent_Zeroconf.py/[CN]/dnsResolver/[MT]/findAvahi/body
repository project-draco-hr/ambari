def findAvahi(self, type):
    address = []
    shell = shellRunner()
    script = []
    script.append('/etc/init.d/avahi-daemon')
    script.append('status')
    result = shell.run(script)
    if (result['exit_code'] != 0):
        logger.info('Starting Avahi daemon.')
        script = []
        script.append('/etc/init.d/avahi-daemon')
        script.append('start')
        result = shell.run(script)
        if (result['exit_code'] == 0):
            logger.info('Avahi daemon started.')
        else:
            logger.error(result['output'])
        time.sleep(2)
    script = []
    script.append('avahi-browse')
    script.append('-t')
    script.append('-r')
    script.append(type)
    result = shell.run(script)
    list = result['output'].rsplit('\n')
    ip = ''
    port = '2181'
    for line in list:
        if ('address = ' in line):
            start = (line.find('[') + 1)
            end = line.find(']')
            ip = line[start:end]
        if ('port = ' in line):
            start = (line.find('[') + 1)
            end = line.find(']')
            port = line[start:end]
            address.append(((ip + ':') + port))
    return ','.join(address)
