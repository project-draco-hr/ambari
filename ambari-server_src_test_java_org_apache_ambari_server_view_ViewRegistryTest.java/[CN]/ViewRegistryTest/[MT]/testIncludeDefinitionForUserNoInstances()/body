{
  ViewRegistry viewRegistry=ViewRegistry.getInstance();
  ViewEntity viewEntity=createNiceMock(ViewEntity.class);
  SecurityHelper securityHelper=createNiceMock(SecurityHelper.class);
  viewRegistry.setSecurityHelper(securityHelper);
  Collection<GrantedAuthority> authorities=new ArrayList<GrantedAuthority>();
  Collection<ViewInstanceEntity> instances=new ArrayList<ViewInstanceEntity>();
  securityHelper.getCurrentAuthorities();
  EasyMock.expectLastCall().andReturn(authorities);
  expect(viewEntity.getInstances()).andReturn(instances);
  replay(securityHelper,viewEntity);
  Assert.assertFalse(viewRegistry.includeDefinition(viewEntity));
  verify(securityHelper,viewEntity);
}
