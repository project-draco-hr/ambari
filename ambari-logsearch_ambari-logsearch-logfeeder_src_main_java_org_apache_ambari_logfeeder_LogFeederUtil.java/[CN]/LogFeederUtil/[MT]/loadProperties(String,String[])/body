{
  logger.info("Loading properties. propFile=" + propFile);
  props=new Properties(System.getProperties());
  boolean propLoaded=false;
  String propertiesFilePath=System.getProperty("properties");
  if (propertiesFilePath != null && !propertiesFilePath.isEmpty()) {
    File propertiesFile=new File(propertiesFilePath);
    if (propertiesFile.exists() && propertiesFile.isFile()) {
      logger.info("Properties file path set in environment. Loading properties file=" + propertiesFilePath);
      FileInputStream fileInputStream=null;
      try {
        fileInputStream=new FileInputStream(propertiesFile);
        props.load(fileInputStream);
        propLoaded=true;
      }
 catch (      Throwable t) {
        logger.error("Error loading properties file. properties file=" + propertiesFile.getAbsolutePath());
      }
 finally {
        if (fileInputStream != null) {
          try {
            fileInputStream.close();
          }
 catch (          Throwable t) {
          }
        }
      }
    }
 else {
      logger.error("Properties file path set in environment, but file not found. properties file=" + propertiesFilePath);
    }
  }
  if (!propLoaded) {
    BufferedInputStream fileInputStream=(BufferedInputStream)LogFeeder.class.getClassLoader().getResourceAsStream(propFile);
    if (fileInputStream != null) {
      logger.info("Loading properties file " + propFile + " from classpath");
      props.load(fileInputStream);
      propLoaded=true;
    }
 else {
      logger.fatal("Properties file not found in classpath. properties file name= " + propFile);
    }
  }
  if (!propLoaded) {
    logger.fatal("Properties file is not loaded.");
    throw new Exception("Properties not loaded");
  }
 else {
    updatePropertiesFromMap(propNVList);
  }
}
