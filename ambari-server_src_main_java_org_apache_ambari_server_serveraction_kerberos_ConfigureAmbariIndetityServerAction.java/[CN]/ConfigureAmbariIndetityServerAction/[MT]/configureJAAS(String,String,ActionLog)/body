{
  String jaasConfPath=System.getProperty(KerberosChecker.JAVA_SECURITY_AUTH_LOGIN_CONFIG);
  File jaasConfigFile=new File(jaasConfPath);
  try {
    String jaasConfig=FileUtils.readFileToString(jaasConfigFile);
    File oldJaasConfigFile=new File(jaasConfPath + ".bak");
    FileUtils.writeStringToFile(oldJaasConfigFile,jaasConfig);
    jaasConfig=jaasConfig.replaceFirst(KEYTAB_PATTERN,"keyTab=\"" + keytabFilePath + "\"");
    jaasConfig=jaasConfig.replaceFirst(PRINCIPAL_PATTERN,"principal=\"" + evaluatedPrincipal + "\"");
    FileUtils.writeStringToFile(jaasConfigFile,jaasConfig);
    String message=String.format("JAAS config file %s modified successfully for principal %s.",jaasConfigFile.getName(),evaluatedPrincipal);
    if (actionLog != null) {
      actionLog.writeStdOut(message);
    }
  }
 catch (  IOException e) {
    String message=String.format("Failed to configure JAAS file %s for %s - %s",jaasConfigFile,evaluatedPrincipal,e.getMessage());
    if (actionLog != null) {
      actionLog.writeStdErr(message);
    }
    LOG.error(message,e);
  }
}
