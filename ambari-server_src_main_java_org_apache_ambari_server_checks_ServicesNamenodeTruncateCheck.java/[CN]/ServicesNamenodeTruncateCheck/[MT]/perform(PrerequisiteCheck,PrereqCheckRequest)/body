{
  final String clusterName=request.getClusterName();
  final Cluster cluster=clustersProvider.get().getCluster(clusterName);
  Config config=cluster.getDesiredConfigByType("hdfs-site");
  String truncateEnabled=config.getProperties().get("dfs.allow.truncate");
  if (Boolean.valueOf(truncateEnabled)) {
    prerequisiteCheck.getFailedOn().add("HDFS");
    PrereqCheckStatus checkStatus=PrereqCheckStatus.FAIL;
    if ("HDP".equals(request.getSourceStackId().getStackName())) {
      if (VersionUtils.compareVersions(request.getSourceStackId().getStackVersion(),"2.3.0.0") >= 0 && VersionUtils.compareVersions(request.getTargetStackId().getStackVersion(),"2.3.0.0") >= 0 && VersionUtils.compareVersions(request.getSourceStackId().getStackVersion(),request.getTargetStackId().getStackVersion()) < 0) {
        checkStatus=PrereqCheckStatus.PASS;
      }
    }
    prerequisiteCheck.setStatus(checkStatus);
    prerequisiteCheck.setFailReason(getFailReason(prerequisiteCheck,request));
  }
}
