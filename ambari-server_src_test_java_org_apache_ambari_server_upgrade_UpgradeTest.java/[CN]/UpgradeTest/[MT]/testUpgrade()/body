{
  String targetVersion=getLastVersion();
  List<String> failedVersions=new ArrayList<String>();
  for (  String version : VERSIONS) {
    injector=Guice.createInjector(new ControllerModule(properties));
    try {
      createSourceDatabase(version);
      performUpgrade(targetVersion);
      testUpgradedSchema();
    }
 catch (    Exception e) {
      failedVersions.add(version);
      e.printStackTrace();
    }
    dropDatabase();
  }
  assertTrue("Upgrade test failed for version: " + failedVersions,failedVersions.isEmpty());
}
