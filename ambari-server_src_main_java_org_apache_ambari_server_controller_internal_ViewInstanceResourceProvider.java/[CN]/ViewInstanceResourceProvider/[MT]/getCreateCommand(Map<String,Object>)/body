{
  return new Command<Void>(){
    @Override public Void invoke() throws AmbariException {
      try {
        ViewRegistry viewRegistry=ViewRegistry.getInstance();
        ViewInstanceEntity instanceEntity=toEntity(properties);
        if (viewRegistry.instanceExists(instanceEntity)) {
          throw new DuplicateResourceException("The instance " + instanceEntity.getName() + " already exists.");
        }
        viewRegistry.installViewInstance(instanceEntity);
      }
 catch (      org.apache.ambari.view.SystemException e) {
        throw new AmbariException("Caught exception trying to create view instance.",e);
      }
      return null;
    }
  }
;
}
