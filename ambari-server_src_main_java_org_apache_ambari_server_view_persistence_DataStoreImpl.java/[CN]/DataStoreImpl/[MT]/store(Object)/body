{
  checkInitialize();
  EntityManager em=getEntityManager();
  try {
    em.getTransaction().begin();
    try {
      persistEntity(entity,em,new HashSet<DynamicEntity>());
      em.getTransaction().commit();
    }
 catch (    Exception e) {
      if (em.getTransaction() != null) {
        em.getTransaction().rollback();
      }
      throwPersistenceException("Caught exception trying to store view entity " + entity,e);
    }
  }
  finally {
    em.close();
  }
}
