def os_setup_local_database(options):
    is_user_changed = is_jdbc_user_changed(options)
    print 'Default properties detected. Using built-in database.'
    os_store_local_properties(options)
    print 'Checking PostgreSQL...'
    (pg_status, retcode, out, err) = check_postgre_up()
    if (not (retcode == 0)):
        err = 'Unable to start PostgreSQL server. Status {0}. {1}. Exiting'.format(pg_status, err)
        raise FatalException(retcode, err)
    print 'Configuring local database...'
    (retcode, outdata, errdata) = setup_db(options)
    if (not (retcode == 0)):
        err = 'Running database init script was failed. {0}. Exiting.'.format(errdata)
        raise FatalException(retcode, err)
    if is_user_changed:
        remove_file(PG_HBA_CONF_FILE_BACKUP)
    print 'Configuring PostgreSQL...'
    (retcode, out, err) = configure_postgres()
    if (not (retcode == 0)):
        err = 'Unable to configure PostgreSQL server. {0} Exiting'.format(err)
        raise FatalException(retcode, err)
    pass
