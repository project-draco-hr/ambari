{
  Result result;
  try {
    RequestStatus status=getPersistenceManager().update(r,properties);
    result=createResult(status);
    if (result.isSynchronous()) {
      result.setResultStatus(new ResultStatus(ResultStatus.STATUS.OK));
    }
 else {
      result.setResultStatus(new ResultStatus(ResultStatus.STATUS.ACCEPTED));
    }
  }
 catch (  UnsupportedPropertyException e) {
    result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.BAD_REQUEST,e));
  }
catch (  NoSuchParentResourceException e) {
    result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.NOT_FOUND,e));
  }
catch (  NoSuchResourceException e) {
    if (r.isCollectionResource()) {
      result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.OK,e));
    }
 else {
      result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.NOT_FOUND,e));
    }
  }
catch (  SystemException e) {
    result=new ResultImpl(new ResultStatus(ResultStatus.STATUS.SERVER_ERROR,e));
  }
  return result;
}
