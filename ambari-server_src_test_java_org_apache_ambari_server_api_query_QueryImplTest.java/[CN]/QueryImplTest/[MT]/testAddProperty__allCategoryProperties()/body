{
  ResourceInstance resource=createNiceMock(ResourceInstance.class);
  ResourceDefinition resourceDefinition=createNiceMock(ResourceDefinition.class);
  Schema schema=createNiceMock(Schema.class);
  expect(resource.getResourceDefinition()).andReturn(resourceDefinition).anyTimes();
  expect(resource.getSubResources()).andReturn(Collections.<String,ResourceInstance>emptyMap()).anyTimes();
  expect(resourceDefinition.getType()).andReturn(Resource.Type.Service).anyTimes();
  expect(m_controller.getSchema(Resource.Type.Service)).andReturn(schema).anyTimes();
  replay(m_controller,resource,resourceDefinition,schema);
  Query query=new TestQuery(resource,null);
  query.addProperty("category","*",null);
  assertEquals(1,query.getProperties().size());
  assertTrue(query.getProperties().contains("category"));
  verify(m_controller,resource,resourceDefinition,schema);
}
