@patch('os.killpg')
@patch('time.sleep')
def test_kill_stale_process(self, timeSleepMock, os_killPgMock):
    temp_path = (AmbariConfig().getConfig().get('stack', 'installprefix') + '/9999.pid')
    file = open(temp_path, 'w')
    file.close()
    shell.killstaleprocesses()
    self.assertFalse(os.path.exists(temp_path))
