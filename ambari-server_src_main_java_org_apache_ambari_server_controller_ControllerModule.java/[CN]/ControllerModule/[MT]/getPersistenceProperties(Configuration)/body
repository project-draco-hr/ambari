{
  Properties properties=new Properties();
  Map<String,String> custom=configuration.getDatabaseCustomProperties();
  if (0 != custom.size()) {
    for (    Entry<String,String> entry : custom.entrySet()) {
      properties.setProperty("eclipselink.jdbc.property." + entry.getKey(),entry.getValue());
    }
  }
switch (configuration.getPersistenceType()) {
case IN_MEMORY:
    properties.setProperty(JDBC_URL,Configuration.JDBC_IN_MEMORY_URL);
  properties.setProperty(JDBC_DRIVER,Configuration.JDBC_IN_MEMROY_DRIVER);
properties.setProperty(DDL_GENERATION,DROP_AND_CREATE);
properties.setProperty(THROW_EXCEPTIONS,"true");
case REMOTE:
properties.setProperty(JDBC_URL,configuration.getDatabaseUrl());
properties.setProperty(JDBC_DRIVER,configuration.getDatabaseDriver());
break;
case LOCAL:
properties.setProperty(JDBC_URL,configuration.getLocalDatabaseUrl());
properties.setProperty(JDBC_DRIVER,Configuration.JDBC_LOCAL_DRIVER);
break;
}
return properties;
}
