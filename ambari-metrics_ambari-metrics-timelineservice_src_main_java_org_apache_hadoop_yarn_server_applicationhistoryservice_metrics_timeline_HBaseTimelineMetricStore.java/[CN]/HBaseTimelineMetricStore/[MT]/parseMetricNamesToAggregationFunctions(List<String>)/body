{
  HashMap<String,List<Function>> metricsFunctions=new HashMap<String,List<Function>>();
  for (  String metricName : metricNames) {
    Function function=Function.DEFAULT_VALUE_FUNCTION;
    String cleanMetricName=metricName;
    try {
      function=Function.fromMetricName(metricName);
      int functionStartIndex=metricName.indexOf("._");
      if (functionStartIndex > 0) {
        cleanMetricName=metricName.substring(0,functionStartIndex);
      }
    }
 catch (    Function.FunctionFormatException ffe) {
    }
    addFunctionToMetricName(metricsFunctions,cleanMetricName,function);
  }
  return metricsFunctions;
}
