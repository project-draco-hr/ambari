def get_content(self):
    filepath = os.path.basename(urlparse.urlparse(self.url).path)
    content = None
    if ((not self.cache) or (not os.path.exists(os.path.join(self.env.config.download_path, filepath)))):
        web_file = urllib2.urlopen(self.url)
        content = web_file.read()
    else:
        update = False
        with open(os.path.join(self.env.config.download_path, filepath)) as fp:
            content = fp.read()
        if self.md5sum:
            m = hashlib.md5(content)
            md5 = m.hexdigest()
            if (md5 != self.md5sum):
                web_file = urllib2.urlopen(self.url)
                content = web_file.read()
                update = True
        if (self.cache and update):
            with open(os.path.join(self.env.config.download_path, filepath), 'w') as fp:
                fp.write(content)
    return content
