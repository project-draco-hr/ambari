{
  AmbariManagementController amc=createMock(AmbariManagementController.class);
  Capture<List<AlertTargetEntity>> listCapture=new Capture<List<AlertTargetEntity>>();
  m_dao.createTargets(capture(listCapture));
  expectLastCall();
  replay(amc,m_dao);
  AlertTargetResourceProvider provider=createProvider(amc);
  Map<String,Object> requestProps=new HashMap<String,Object>();
  requestProps.put(AlertTargetResourceProvider.ALERT_TARGET_NAME,ALERT_TARGET_NAME);
  requestProps.put(AlertTargetResourceProvider.ALERT_TARGET_DESCRIPTION,ALERT_TARGET_DESC);
  requestProps.put(AlertTargetResourceProvider.ALERT_TARGET_NOTIFICATION_TYPE,ALERT_TARGET_TYPE);
  Request request=PropertyHelper.getCreateRequest(Collections.singleton(requestProps),null);
  provider.createResources(request);
  Assert.assertTrue(listCapture.hasCaptured());
  AlertTargetEntity entity=listCapture.getValue().get(0);
  Assert.assertNotNull(entity);
  Assert.assertEquals(ALERT_TARGET_NAME,entity.getTargetName());
  Assert.assertEquals(ALERT_TARGET_DESC,entity.getDescription());
  Assert.assertEquals(ALERT_TARGET_TYPE,entity.getNotificationType());
  verify(amc,m_dao);
}
