{
  Request request=PropertyHelper.getReadRequest(AlertTargetResourceProvider.ALERT_TARGET_DESCRIPTION,AlertTargetResourceProvider.ALERT_TARGET_ID,AlertTargetResourceProvider.ALERT_TARGET_NAME,AlertTargetResourceProvider.ALERT_TARGET_NOTIFICATION_TYPE);
  Predicate predicate=new PredicateBuilder().property(AlertTargetResourceProvider.ALERT_TARGET_ID).equals(ALERT_TARGET_ID.toString()).toPredicate();
  expect(m_dao.findTargetById(ALERT_TARGET_ID.longValue())).andReturn(getMockEntities().get(0)).atLeastOnce();
  replay(m_amc,m_dao);
  AlertTargetResourceProvider provider=createProvider(m_amc);
  Set<Resource> results=provider.getResources(request,predicate);
  assertEquals(1,results.size());
  Resource resource=results.iterator().next();
  Assert.assertEquals(ALERT_TARGET_ID,resource.getPropertyValue(AlertTargetResourceProvider.ALERT_TARGET_ID));
  Assert.assertEquals(ALERT_TARGET_NAME,resource.getPropertyValue(AlertTargetResourceProvider.ALERT_TARGET_NAME));
  Map<String,String> properties=(Map<String,String>)resource.getPropertyValue(AlertTargetResourceProvider.ALERT_TARGET_PROPERTIES);
  Assert.assertNull(properties);
  request=PropertyHelper.getReadRequest();
  results=provider.getResources(request,predicate);
  assertEquals(1,results.size());
  resource=results.iterator().next();
  properties=(Map<String,String>)resource.getPropertyValue(AlertTargetResourceProvider.ALERT_TARGET_PROPERTIES);
  assertEquals("bar",properties.get("foo"));
  assertEquals("baz",properties.get("foobar"));
  verify(m_amc,m_dao);
}
