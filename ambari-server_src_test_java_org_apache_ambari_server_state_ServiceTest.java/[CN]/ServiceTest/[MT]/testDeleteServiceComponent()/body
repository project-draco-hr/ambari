{
  Service hdfs=cluster.addService("HDFS");
  Service mapReduce=cluster.addService("MAPREDUCE");
  hdfs.persist();
  ServiceComponent nameNode=hdfs.addServiceComponent("NAMENODE");
  nameNode.persist();
  ServiceComponent jobTracker=mapReduce.addServiceComponent("JOBTRACKER");
  assertEquals(2,cluster.getServices().size());
  assertEquals(1,hdfs.getServiceComponents().size());
  assertEquals(1,mapReduce.getServiceComponents().size());
  assertTrue(hdfs.isPersisted());
  assertFalse(mapReduce.isPersisted());
  hdfs.deleteServiceComponent("NAMENODE");
  assertEquals(0,hdfs.getServiceComponents().size());
  assertEquals(1,mapReduce.getServiceComponents().size());
  mapReduce.deleteServiceComponent("JOBTRACKER");
  assertEquals(0,hdfs.getServiceComponents().size());
  assertEquals(0,mapReduce.getServiceComponents().size());
}
