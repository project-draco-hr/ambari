{
  injector.injectMembers(this);
  clusterGlobalLock=cluster.getClusterGlobalLock();
  serviceEntity=new ClusterServiceEntity();
  serviceEntity.setClusterId(cluster.getClusterId());
  serviceEntity.setServiceName(serviceName);
  serviceDesiredStateEntity=new ServiceDesiredStateEntity();
  serviceDesiredStateEntity.setServiceName(serviceName);
  serviceDesiredStateEntity.setClusterId(cluster.getClusterId());
  serviceDesiredStateEntityPK=getServiceDesiredStateEntityPK(serviceDesiredStateEntity);
  serviceEntityPK=getServiceEntityPK(serviceEntity);
  serviceDesiredStateEntity.setClusterServiceEntity(serviceEntity);
  serviceEntity.setServiceDesiredStateEntity(serviceDesiredStateEntity);
  this.cluster=cluster;
  components=new HashMap<String,ServiceComponent>();
  StackId stackId=cluster.getDesiredStackVersion();
  setDesiredStackVersion(stackId);
  ServiceInfo sInfo=ambariMetaInfo.getService(stackId.getStackName(),stackId.getStackVersion(),serviceName);
  isClientOnlyService=sInfo.isClientOnlyService();
  init();
}
