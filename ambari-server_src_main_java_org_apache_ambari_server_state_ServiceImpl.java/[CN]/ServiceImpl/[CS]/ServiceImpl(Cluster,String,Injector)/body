{
  injector.injectMembers(this);
  clusterGlobalLock=cluster.getClusterGlobalLock();
  serviceEntity=new ClusterServiceEntity();
  serviceEntity.setServiceName(serviceName);
  serviceDesiredStateEntity=new ServiceDesiredStateEntity();
  serviceDesiredStateEntity.setClusterServiceEntity(serviceEntity);
  serviceEntity.setServiceDesiredStateEntity(serviceDesiredStateEntity);
  this.cluster=cluster;
  this.components=new HashMap<String,ServiceComponent>();
  StackId stackId=cluster.getDesiredStackVersion();
  setDesiredStackVersion(stackId);
  ServiceInfo sInfo=ambariMetaInfo.getServiceInfo(stackId.getStackName(),stackId.getStackVersion(),serviceName);
  this.isClientOnlyService=sInfo.isClientOnlyService();
  init();
}
