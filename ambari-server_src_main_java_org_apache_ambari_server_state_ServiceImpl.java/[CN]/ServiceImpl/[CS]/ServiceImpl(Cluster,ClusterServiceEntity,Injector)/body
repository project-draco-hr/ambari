{
  this.injector=injector;
  injector.injectMembers(this);
  this.serviceEntity=serviceEntity;
  this.cluster=cluster;
  this.serviceDesiredStateEntity=serviceEntity.getServiceDesiredStateEntity();
  this.desiredConfigs=new HashMap<String,String>();
  this.components=new HashMap<String,ServiceComponent>();
  this.configs=new HashMap<String,Config>();
  if (!serviceEntity.getServiceComponentDesiredStateEntities().isEmpty()) {
    for (    ServiceComponentDesiredStateEntity serviceComponentDesiredStateEntity : serviceEntity.getServiceComponentDesiredStateEntities()) {
      components.put(serviceComponentDesiredStateEntity.getComponentName(),serviceComponentFactory.createExisting(this,serviceComponentDesiredStateEntity));
    }
  }
  for (  ServiceConfigMappingEntity mappingEntity : serviceEntity.getServiceConfigMappings()) {
    desiredConfigs.put(mappingEntity.getConfigType(),mappingEntity.getVersionTag());
  }
  persisted=true;
}
