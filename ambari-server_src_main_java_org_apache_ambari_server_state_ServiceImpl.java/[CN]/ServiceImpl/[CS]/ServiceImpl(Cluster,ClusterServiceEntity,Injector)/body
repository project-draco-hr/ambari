{
  this.injector=injector;
  injector.injectMembers(this);
  this.serviceEntity=serviceEntity;
  this.cluster=cluster;
  this.serviceDesiredStateEntity=serviceEntity.getServiceDesiredStateEntity();
  this.desiredConfigs=new HashMap<String,Config>();
  this.components=new HashMap<String,ServiceComponent>();
  if (!serviceEntity.getServiceComponentDesiredStateEntities().isEmpty()) {
    for (    ServiceComponentDesiredStateEntity serviceComponentDesiredStateEntity : serviceEntity.getServiceComponentDesiredStateEntities()) {
      components.put(serviceComponentDesiredStateEntity.getComponentName(),serviceComponentFactory.createExisting(this,serviceComponentDesiredStateEntity));
    }
  }
  persisted=true;
}
