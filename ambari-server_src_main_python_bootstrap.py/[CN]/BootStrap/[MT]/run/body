def run(self):
    ' Copy files and run commands on remote hosts '
    ret1 = self.copyOsCheckScript()
    logging.info('Copying os type check script finished')
    ret2 = self.runOsCheckScript()
    logging.info('Running os type check  finished')
    ret3 = self.checkSudoPackage()
    logging.info("Checking 'sudo' package finished")
    ret4 = 0
    ret5 = 0
    if self.hasPassword():
        ret4 = self.copyPasswordFile()
        logging.info('Copying password file finished')
        ret5 = self.changePasswordFileModeOnHost()
        logging.info('Change password file mode on host finished')
    ret6 = self.copyNeededFiles()
    logging.info('Copying files finished')
    ret7 = self.runSetupAgent()
    logging.info('Running ssh command finished')
    ret8 = 0
    if (self.hasPassword() and (self.hostlist_to_remove_password_file is not None)):
        ret8 = self.deletePasswordFile()
        logging.info('Deleting password file finished')
    retcode = max(ret1, ret2, ret3, ret4, ret5, ret6, ret7, ret8)
    self.createDoneFiles()
    return retcode
    pass
