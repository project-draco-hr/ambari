{
  Map<String,Object> mergedMap=new HashMap<String,Object>();
  if (parent == null) {
    mergedMap=child;
  }
 else   if (child == null) {
    mergedMap.putAll(parent);
  }
 else {
    mergedMap.putAll(parent);
    for (    Map.Entry<String,Object> entry : child.entrySet()) {
      String key=entry.getKey();
      Object childValue=entry.getValue();
      if (childValue == null) {
        mergedMap.remove(key);
      }
 else       if (!mergedMap.containsKey(key) || !(childValue instanceof Map)) {
        mergedMap.put(key,childValue);
      }
 else {
        Object parentValue=mergedMap.get(key);
        if (!(parentValue instanceof Map)) {
          mergedMap.put(key,childValue);
        }
 else {
          mergedMap.put(key,mergedMap((Map<String,Object>)parentValue,(Map<String,Object>)childValue));
        }
      }
    }
  }
  return mergedMap;
}
