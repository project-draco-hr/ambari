{
  Set<Map<String,Object>> hostGroups=(Set<Map<String,Object>>)getRequestProperty(request,BLUEPRINT_HOST_GROUPS_PROPERTY);
  Set<Map<String,Object>> bindingHostGroups=(Set<Map<String,Object>>)getRequestProperty(request,BINDING_HOST_GROUPS_PROPERTY);
  Map<String,Set<String>> componentHostsMap=new HashMap<String,Set<String>>();
  if (null != bindingHostGroups && null != hostGroups) {
    Map<String,Set<String>> hgComponentsMap=calculateHostGroupComponentsMap(hostGroups);
    Map<String,Set<String>> hgHostsMap=calculateHostGroupHostsMap(bindingHostGroups);
    for (    Map.Entry<String,Set<String>> hgComponents : hgComponentsMap.entrySet()) {
      String hgName=hgComponents.getKey();
      Set<String> components=hgComponents.getValue();
      Set<String> hosts=hgHostsMap.get(hgName);
      for (      String component : components) {
        Set<String> componentHosts=componentHostsMap.get(component);
        if (componentHosts == null) {
          componentHosts=new HashSet<String>();
          componentHostsMap.put(component,componentHosts);
        }
        componentHosts.addAll(hosts);
      }
    }
  }
  return componentHostsMap;
}
