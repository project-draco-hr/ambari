def _get_current_hiveserver_version():
    '\n  Runs an "hdp-select status hive-server2" check and parses the result in order\n  to obtain the current version of hive.\n\n  :return:  the hiveserver2 version, such as "hdp-select status hive-server2"\n  '
    import params
    try:
        command = 'hdp-select status hive-server2'
        (return_code, hdp_output) = call(command, user=params.hive_user)
    except Exception as e:
        Logger.error(str(e))
        raise Fail('Unable to execute hdp-select command to retrieve the hiveserver2 version.')
    if (return_code != 0):
        raise Fail('Unable to determine the current HiveServer2 version because of a non-zero return code of {0}'.format(str(return_code)))
    current_hive_server_version = re.sub('hive-server2 - ', '', hdp_output)
    match = re.match('[0-9]+.[0-9]+.[0-9]+.[0-9]+-[0-9]+', current_hive_server_version)
    if match:
        return current_hive_server_version
    else:
        raise Fail('The extracted hiveserver2 version "{0}" does not matching any known pattern'.format(current_hive_server_version))
