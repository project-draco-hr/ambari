def _get_current_hiveserver_version():
    '\n  Runs "hive --version" and parses the result in order\n  to obtain the current version of hive.\n\n  :return:  the hiveserver2 version, returned by "hive --version"\n  '
    import params
    try:
        command = 'hive --version'
        (return_code, hdp_output) = shell.call(command, user=params.hive_user, path=params.execute_path)
    except Exception as e:
        Logger.error(str(e))
        raise Fail('Unable to execute hive --version command to retrieve the hiveserver2 version.')
    if (return_code != 0):
        raise Fail('Unable to determine the current HiveServer2 version because of a non-zero return code of {0}'.format(str(return_code)))
    match = re.search('^(Hive) ([0-9]+.[0-9]+.\\S+)', hdp_output, re.MULTILINE)
    if match:
        current_hive_server_version = match.group(2)
        return current_hive_server_version
    else:
        raise Fail('The extracted hiveserver2 version "{0}" does not matching any known pattern'.format(hdp_output))
