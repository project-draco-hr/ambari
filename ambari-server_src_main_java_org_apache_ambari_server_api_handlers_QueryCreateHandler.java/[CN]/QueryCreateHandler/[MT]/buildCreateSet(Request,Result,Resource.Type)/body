{
  Set<Map<String,Object>> setRequestProps=request.getHttpBodyProperties();
  Set<Map<String,Object>> setCreateProps=new HashSet<Map<String,Object>>(setRequestProps.size());
  ResourceInstance resource=request.getResource();
  Resource.Type type=resource.getResourceDefinition().getType();
  ClusterController controller=getClusterController();
  String resourceKeyProperty=controller.getSchema(type).getKeyPropertyId(type);
  String createKeyProperty=controller.getSchema(createType).getKeyPropertyId(type);
  TreeNode<Resource> tree=queryResult.getResultTree();
  Collection<TreeNode<Resource>> treeChildren=tree.getChildren();
  for (  TreeNode<Resource> node : treeChildren) {
    Resource r=node.getObject();
    Object keyVal=r.getPropertyValue(resourceKeyProperty);
    for (    Map<String,Object> mapProps : setRequestProps) {
      Map<String,Object> mapResourceProps=new HashMap<String,Object>(mapProps);
      mapResourceProps.put(createKeyProperty,keyVal);
      setCreateProps.add(mapResourceProps);
    }
  }
  return setCreateProps;
}
