@patch('traceback.print_exc')
@patch.object(ActionDependencyManager, 'read_dependencies')
@patch.object(ActionQueue, 'execute_command')
def test_execute_command_safely(self, execute_command_mock, read_dependencies_mock, print_exc_mock):
    actionQueue = ActionQueue(AmbariConfig().getConfig(), 'dummy_controller')
    actionQueue.execute_command_safely('command')

    def side_effect(self):
        raise Exception('TerribleException')
    execute_command_mock.side_effect = side_effect
    actionQueue.execute_command_safely('command')
    self.assertTrue(print_exc_mock.called)
