@patch.object(ActionDependencyManager, 'read_dependencies')
@patch.object(ActionDependencyManager, 'get_next_action_group')
@patch.object(ActionQueue, 'process_portion_of_actions')
def test_ActionQueueStartStop(self, process_portion_of_actions_mock, get_next_action_group_mock, read_dependencies_mock):
    actionQueue = ActionQueue(AmbariConfig().getConfig(), 'dummy_controller')
    actionQueue.start()
    time.sleep(0.1)
    actionQueue.stop()
    actionQueue.join()
    self.assertEqual(actionQueue.stopped(), True, 'Action queue is not stopped.')
    self.assertTrue((get_next_action_group_mock.call_count > 1))
    self.assertTrue((process_portion_of_actions_mock.call_count > 1))
