@patch.object(ActionQueue, 'stopped')
@patch.object(AQM.logger, 'warn')
def test_run_unrecognized_command(self, logger_method, stopped_method):
    config = AmbariConfig().getConfig()
    actionQueue = ActionQueue(config)
    command = {'serviceName': 'HDFS', 'commandType': 'SOME_UNRECOGNIZED_COMMAND', 'clusterName': '', 'componentName': 'DATANODE', 'configurations': {}, }
    actionQueue.commandQueue.put(command)
    actionQueue.stopped = stopped_method
    stopped_method.side_effect = [False, False, True, True, True]
    actionQueue.IDLE_SLEEP_TIME = 0.001
    actionQueue.run()
    self.assertTrue(logger_method.call_args[0][0].startswith('Unrecognized command'))
