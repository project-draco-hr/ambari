{
  List<Map<String,Map<String,String>>> configList=new ArrayList<Map<String,Map<String,String>>>();
  Map<String,Object> desiredConfigMap=clusterNode.getObject().getPropertiesMap().get("Clusters/desired_configs");
  TreeNode<Resource> configNode=clusterNode.getChild("configurations");
  for (  TreeNode<Resource> config : configNode.getChildren()) {
    Configuration configuration=new Configuration(config);
    DesiredConfig desiredConfig=(DesiredConfig)desiredConfigMap.get(configuration.getType());
    if (desiredConfig != null && desiredConfig.getTag().equals(configuration.getTag())) {
      Map<String,Map<String,String>> properties=Collections.singletonMap(configuration.getType(),configuration.getProperties());
      BlueprintConfigurationProcessor updater=new BlueprintConfigurationProcessor(properties);
      properties=updater.doUpdateForBlueprintExport(hostGroups);
      configList.add(properties);
    }
  }
  return configList;
}
