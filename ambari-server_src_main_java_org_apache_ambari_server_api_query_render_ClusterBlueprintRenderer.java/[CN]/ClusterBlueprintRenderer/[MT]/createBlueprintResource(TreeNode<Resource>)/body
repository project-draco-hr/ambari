{
  Resource clusterResource=clusterNode.getObject();
  Resource blueprintResource=new ResourceImpl(Resource.Type.Cluster);
  String[] stackTokens=((String)clusterResource.getPropertyValue(PropertyHelper.getPropertyId("Clusters","version"))).split("-");
  blueprintResource.setProperty("Blueprints/stack_name",stackTokens[0]);
  blueprintResource.setProperty("Blueprints/stack_version",stackTokens[1]);
  Collection<HostGroupImpl> hostGroups=processHostGroups(clusterNode.getChild("hosts"));
  List<Map<String,Object>> groupList=formatGroupsAsList(hostGroups);
  blueprintResource.setProperty("host_groups",groupList);
  determinePropertiesToStrip(clusterNode.getChild("services"),stackTokens[0],stackTokens[1]);
  blueprintResource.setProperty("configurations",processConfigurations(clusterNode,hostGroups));
  return blueprintResource;
}
