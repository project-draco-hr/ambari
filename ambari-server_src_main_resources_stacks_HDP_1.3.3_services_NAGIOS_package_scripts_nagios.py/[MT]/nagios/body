def nagios():
    import params
    File(params.nagios_httpd_config_file, owner=params.nagios_user, group=params.nagios_group, content=Template('nagios.conf.j2'), mode=420)
    Execute('service snmpd start; chkconfig snmpd on', path='/usr/local/bin/:/bin/:/sbin/')
    Directory(params.conf_dir, owner=params.nagios_user, group=params.nagios_group)
    Directory([params.plugins_dir, params.nagios_obj_dir])
    Directory(params.nagios_pid_dir, owner=params.nagios_user, group=params.nagios_group, mode=493, recursive=True)
    Directory([params.nagios_var_dir, params.check_result_path, params.nagios_rw_dir], owner=params.nagios_user, group=params.nagios_group, recursive=True)
    Directory([params.nagios_log_dir, params.nagios_log_archives_dir], owner=params.nagios_user, group=params.nagios_group, mode=493)
    nagios_server_config()
    set_web_permisssions()
    File(format('{conf_dir}/command.cfg'), owner=params.nagios_user, group=params.nagios_group)
