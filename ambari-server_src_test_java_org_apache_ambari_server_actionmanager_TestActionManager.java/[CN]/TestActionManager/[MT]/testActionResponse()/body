{
  ActionDBAccessor db=new ActionDBInMemoryImpl();
  ActionManager am=new ActionManager(5000,1200000,new ActionQueue(),new ClustersImpl(),db);
  String hostname="host1";
  populateActionDB(db,hostname);
  List<CommandReport> reports=new ArrayList<CommandReport>();
  CommandReport cr=new CommandReport();
  cr.setActionId(StageUtils.getActionId(requestId,stageId));
  cr.setRole("HBASE_MASTER");
  cr.setStatus("COMPLETED");
  cr.setExitCode(215);
  reports.add(cr);
  am.actionResponse(hostname,reports);
  assertEquals(215,am.getAction(requestId,stageId).getHostAction(hostname).getRoleCommands().get(0).getExitCode());
  assertEquals(HostRoleStatus.COMPLETED,am.getAction(requestId,stageId).getHostAction(hostname).getRoleCommands().get(0).getStatus());
}
