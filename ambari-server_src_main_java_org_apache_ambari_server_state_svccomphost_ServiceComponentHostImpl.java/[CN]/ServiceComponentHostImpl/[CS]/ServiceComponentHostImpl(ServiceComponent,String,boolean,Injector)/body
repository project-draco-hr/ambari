{
  super();
  injector.injectMembers(this);
  if (isClient) {
    this.stateMachine=clientStateMachineFactory.make(this);
  }
 else {
    this.stateMachine=daemonStateMachineFactory.make(this);
  }
  ReadWriteLock rwLock=new ReentrantReadWriteLock();
  this.readLock=rwLock.readLock();
  this.writeLock=rwLock.writeLock();
  this.serviceComponent=serviceComponent;
  stateEntity=new HostComponentStateEntity();
  stateEntity.setCurrentState(stateMachine.getCurrentState());
  stateEntity.setCurrentStackVersion(gson.toJson(new StackVersion("")));
  desiredStateEntity=new HostComponentDesiredStateEntity();
  desiredStateEntity.setDesiredStackVersion(gson.toJson(new StackVersion("")));
  try {
    this.host=clusters.getHost(hostName);
  }
 catch (  AmbariException e) {
    LOG.error("Host '{}' was not found",hostName);
    throw new RuntimeException(e);
  }
  this.resetLastOpInfo();
  this.desiredConfigs=new HashMap<String,Config>();
  this.configs=new HashMap<String,Config>();
}
