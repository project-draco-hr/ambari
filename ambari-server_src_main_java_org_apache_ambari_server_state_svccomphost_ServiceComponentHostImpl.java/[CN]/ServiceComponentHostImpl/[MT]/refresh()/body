{
  clusterGlobalLock.readLock().lock();
  try {
    writeLock.lock();
    try {
      if (isPersisted()) {
        HostComponentStateEntityPK pk=new HostComponentStateEntityPK();
        HostComponentDesiredStateEntityPK dpk=new HostComponentDesiredStateEntityPK();
        pk.setClusterId(getClusterId());
        pk.setComponentName(getServiceComponentName());
        pk.setServiceName(getServiceName());
        pk.setHostName(getHostName());
        dpk.setClusterId(getClusterId());
        dpk.setComponentName(getServiceComponentName());
        dpk.setServiceName(getServiceName());
        dpk.setHostName(getHostName());
        stateEntity=hostComponentStateDAO.findByPK(pk);
        desiredStateEntity=hostComponentDesiredStateDAO.findByPK(dpk);
        hostComponentStateDAO.refresh(stateEntity);
        hostComponentDesiredStateDAO.refresh(desiredStateEntity);
      }
    }
  finally {
      writeLock.unlock();
    }
  }
  finally {
    clusterGlobalLock.readLock().unlock();
  }
}
