{
  if (isPersisted()) {
    final HostEntity host=hostDAO.findById(stateEntity.getHostId());
    Collection<HostComponentStateEntity> hostComponentStateEntities=host.getHostComponentStateEntities();
    for (    HostComponentStateEntity hostComponentStateEntity : hostComponentStateEntities) {
      String serviceName=stateEntity.getServiceName();
      String componentName=stateEntity.getComponentName();
      Long clusterId=stateEntity.getClusterId();
      Long hostId=stateEntity.getHostId();
      if (StringUtils.equals(hostComponentStateEntity.getServiceName(),serviceName) && StringUtils.equals(hostComponentStateEntity.getComponentName(),componentName) && hostComponentStateEntity.getClusterId() == clusterId && hostComponentStateEntity.getHostId() == hostId) {
        stateEntity=hostComponentStateEntity;
        return stateEntity;
      }
    }
  }
  return stateEntity;
}
