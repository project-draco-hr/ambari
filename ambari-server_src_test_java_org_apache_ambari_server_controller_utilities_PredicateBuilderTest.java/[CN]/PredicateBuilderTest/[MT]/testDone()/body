{
  PropertyId p1=new PropertyIdImpl("prop1","cat1",false);
  Resource resource=new ResourceImpl(Resource.Type.Cluster);
  resource.setProperty(p1,"foo");
  PredicateBuilder pb=new PredicateBuilder();
  Predicate predicate=pb.property(p1).equals("foo").toPredicate();
  try {
    pb.property(p1).equals("foo").toPredicate();
    Assert.fail("Expected IllegalStateException.");
  }
 catch (  IllegalStateException e) {
  }
  Assert.assertSame(predicate,pb.toPredicate());
}
