@patch.object(shutil, 'rmtree')
@patch.object(os.path, 'exists')
@patch.object(os.path, 'isdir')
def test_delete_directory(self, isdir_mock, os_path_exists_mock, rmtree_mock):
    os_path_exists_mock.return_value = True
    isdir_mock.return_value = True
    with Environment('/') as env:
        Directory('/a/b/c/d', action='delete')
    rmtree_mock.assert_called_with('/a/b/c/d')
