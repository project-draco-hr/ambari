def upload_configuration_dir_to_zk(config_set, random_num):
    import params
    tmp_config_set_folder = format('{tmp_dir}/solr_config_{config_set}_{random_num}')
    zk_cli_prefix = format('export JAVA_HOME={java64_home} ; {cloud_scripts}/zkcli.sh -zkhost {zookeeper_quorum}{logsearch_solr_znode}')
    Execute(format('{zk_cli_prefix} -cmd downconfig -confdir {tmp_config_set_folder} -confname {config_set}'), only_if=format('{zk_cli_prefix} -cmd get /configs/{config_set}'))
    Execute(format('{zk_cli_prefix} -cmd upconfig -confdir {logsearch_server_conf}/solr_configsets/{config_set}/conf -confname {config_set}'), not_if=format('test -d {tmp_config_set_folder}'))
