{
  List<Stack> stacks=getStackList(stackName,stackRevision);
  Stack result=new Stack(stacks.get(stacks.size() - 1));
  result.setParentName(null);
  result.setPackageRepositories(flattenRepositories(stacks));
  List<Component> components=new ArrayList<Component>();
  result.setComponents(components);
  for (  String componentName : getComponents(stacks)) {
    components.add(flattenComponent(componentName,stacks));
  }
  result.setConfiguration(buildClientConfiguration(stacks));
  return result;
}
