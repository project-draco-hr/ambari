{
  Map<String,Map<String,Property>> newConfig=new TreeMap<String,Map<String,Property>>();
  for (  Stack stack : stacks) {
    mergeInConfiguration(newConfig,stack.getConfiguration());
    for (    Component component : stack.getComponents()) {
      if (component.getName().equals(componentName)) {
        mergeInConfiguration(newConfig,component.getConfiguration());
        List<Role> roleList=component.getRoles();
        if (roleList != null) {
          for (          Role role : roleList) {
            if (role.getName().equals(roleName)) {
              mergeInConfiguration(newConfig,role.getConfiguration());
            }
          }
        }
      }
    }
  }
  return buildConfig(newConfig);
}
