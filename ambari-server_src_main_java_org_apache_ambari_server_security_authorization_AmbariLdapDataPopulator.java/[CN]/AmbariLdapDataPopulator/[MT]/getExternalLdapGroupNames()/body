{
  final Set<String> groups=new HashSet<String>();
  final LdapTemplate ldapTemplate=loadLdapTemplate();
  final EqualsFilter equalsFilter=new EqualsFilter("objectClass",ldapServerProperties.getGroupObjectClass());
  String baseDn=ldapServerProperties.getBaseDN();
  ldapTemplate.search(baseDn,equalsFilter.encode(),new AttributesMapper(){
    public Object mapFromAttributes(    Attributes attributes) throws NamingException {
      groups.add(attributes.get(ldapServerProperties.getGroupNamingAttr()).get().toString().toLowerCase());
      return null;
    }
  }
);
  return groups;
}
