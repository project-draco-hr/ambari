{
  List<ServiceInfo> services=new ArrayList<ServiceInfo>();
  File servicesFolder=new File(stackRoot.getAbsolutePath() + File.separator + stackInfo.getName()+ File.separator+ stackInfo.getVersion()+ File.separator+ AmbariMetaInfo.SERVICES_FOLDER_NAME);
  if (!servicesFolder.exists()) {
    LOG.info("No services defined for stack: " + stackInfo.getName() + "-"+ stackInfo.getVersion());
  }
 else {
    File[] servicesFolders=servicesFolder.listFiles(AmbariMetaInfo.FILENAME_FILTER);
    if (servicesFolders != null) {
      for (      File serviceFolder : servicesFolders) {
        ServiceInfo serviceInfo=new ServiceInfo();
        serviceInfo.setName(serviceFolder.getName());
        File metainfoFile=new File(serviceFolder.getAbsolutePath() + File.separator + AmbariMetaInfo.SERVICE_METAINFO_FILE_NAME);
        setMetaInfo(metainfoFile,serviceInfo);
        services.add(serviceInfo);
        File serviceConfigFolder=new File(serviceFolder.getAbsolutePath() + File.separator + AmbariMetaInfo.SERVICE_CONFIG_FOLDER_NAME);
        File[] configFiles=serviceConfigFolder.listFiles(AmbariMetaInfo.FILENAME_FILTER);
        if (configFiles != null) {
          for (          File config : configFiles) {
            if (config.getName().endsWith(AmbariMetaInfo.SERVICE_CONFIG_FILE_NAME_POSTFIX)) {
              serviceInfo.getProperties().addAll(getProperties(config));
            }
          }
        }
      }
    }
  }
  stackInfo.getServices().addAll(services);
}
