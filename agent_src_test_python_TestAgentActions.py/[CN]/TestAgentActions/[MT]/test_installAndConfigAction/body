def test_installAndConfigAction(self):
    action = {'id': 'tttt', }
    actionQueue = ActionQueue(AmbariConfig().getConfig())
    path = actionQueue.getInstallFilename(action['id'])
    configFile = {'data': 'test', 'owner': os.getuid(), 'group': os.getgid(), 'permission': 448, 'path': path, 'umask': 18, }
    path = getFilePath(action, path)
    action = {'id': 'tttt', 'kind': 'INSTALL_AND_CONFIG_ACTION', 'workDirComponent': 'abc-hdfs', 'file': configFile, 'clusterDefinitionRevision': 12, 'command': ['/bin/ls', path], }
    result = {}
    actionQueue = ActionQueue(AmbariConfig().getConfig())
    result = actionQueue.installAndConfigAction(action)
    self.assertEqual(result['exitCode'], 0, ('installAndConfigAction test failed. Returned %d ' % result['exitCode']))
    self.assertEqual(result['output'], (path + '\n'), ('installAndConfigAction test failed Returned %s ' % result['output']))
