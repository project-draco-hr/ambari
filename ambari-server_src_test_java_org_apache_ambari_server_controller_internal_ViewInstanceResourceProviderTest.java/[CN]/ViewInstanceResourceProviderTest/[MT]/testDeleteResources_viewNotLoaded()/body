{
  ViewInstanceResourceProvider provider=new ViewInstanceResourceProvider();
  Set<Map<String,Object>> properties=new HashSet<Map<String,Object>>();
  Map<String,Object> propertyMap=new HashMap<String,Object>();
  propertyMap.put(ViewInstanceResourceProvider.VIEW_NAME_PROPERTY_ID,"V1");
  propertyMap.put(ViewInstanceResourceProvider.VIEW_VERSION_PROPERTY_ID,"1.0.0");
  propertyMap.put(ViewInstanceResourceProvider.INSTANCE_NAME_PROPERTY_ID,"I1");
  properties.add(propertyMap);
  PredicateBuilder predicateBuilder=new PredicateBuilder();
  Predicate predicate=predicateBuilder.property(ViewInstanceResourceProvider.VIEW_NAME_PROPERTY_ID).equals("V1").toPredicate();
  ViewEntity viewEntity=new ViewEntity();
  viewEntity.setName("V1{1.0.0}");
  viewEntity.setStatus(ViewDefinition.ViewStatus.DEPLOYING);
  ViewInstanceEntity viewInstanceEntity=new ViewInstanceEntity();
  viewInstanceEntity.setViewName("V1{1.0.0}");
  viewInstanceEntity.setName("I1");
  viewInstanceEntity.setViewEntity(viewEntity);
  expect(singleton.getDefinitions()).andReturn(Collections.singleton(viewEntity));
  replay(singleton);
  provider.deleteResources(predicate);
  verify(singleton);
}
