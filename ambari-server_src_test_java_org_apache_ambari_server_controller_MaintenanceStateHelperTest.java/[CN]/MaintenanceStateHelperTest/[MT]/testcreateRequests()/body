{
  Injector injector=createStrictMock(Injector.class);
  MaintenanceStateHelper maintenanceStateHelper=createMockBuilder(MaintenanceStateHelper.class).withConstructor(injector).createNiceMock();
  replay(maintenanceStateHelper);
  RequestStatusResponse rsrMock=EasyMock.createMock(RequestStatusResponse.class);
  AmbariManagementController amcMock=EasyMock.createMock(AmbariManagementController.class);
  Capture<Map<String,String>> rpCapture=new Capture<Map<String,String>>();
  Capture<ExecuteActionRequest> actReqCapture=new Capture<ExecuteActionRequest>();
  expect(amcMock.createAction(capture(actReqCapture),capture(rpCapture))).andReturn(rsrMock);
  replay(amcMock,rsrMock);
  Map<String,String> requestProperties=new HashMap<String,String>();
  requestProperties.put("context","some.request.description");
  maintenanceStateHelper.createRequests(amcMock,requestProperties,"dummy_cluster");
  verify(amcMock);
  Assert.assertEquals(rpCapture.getValue().get("context"),MaintenanceStateHelper.UPDATE_NAGIOS_REQUEST_NAME);
}
