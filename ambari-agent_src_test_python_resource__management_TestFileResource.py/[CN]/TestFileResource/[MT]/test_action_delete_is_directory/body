@patch.object(sudo, 'unlink')
@patch.object(os.path, 'exists')
@patch.object(os.path, 'isdir')
def test_action_delete_is_directory(self, isdir_mock, exist_mock, unlink_mock):
    "\n    Tests if 'delete' action fails when path is directory\n    "
    isdir_mock.return_value = True
    try:
        with Environment('/') as env:
            File('/directory/file', action='delete', mode=511, backup=False, content='new-content')
        self.fail('Should fail when deleting directory')
    except Fail:
        pass
    self.assertEqual(isdir_mock.call_count, 1)
    self.assertEqual(exist_mock.call_count, 0)
    self.assertEqual(unlink_mock.call_count, 0)
