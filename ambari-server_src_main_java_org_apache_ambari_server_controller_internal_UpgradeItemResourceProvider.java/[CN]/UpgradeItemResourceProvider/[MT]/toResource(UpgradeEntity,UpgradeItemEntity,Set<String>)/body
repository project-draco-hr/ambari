{
  ResourceImpl resource=new ResourceImpl(Resource.Type.UpgradeItem);
  setResourceProperty(resource,UPGRADE_ID,upgrade.getId(),requestedIds);
  setResourceProperty(resource,UPGRADE_ITEM_ID,item.getId(),requestedIds);
  if (isPropertyRequested(UPGRADE_ITEM_STATE,requestedIds)) {
    UpgradeState state=calculateState(upgrade,item);
    setResourceProperty(resource,UPGRADE_ITEM_STATE,state,requestedIds);
  }
  setResourceProperty(resource,UPGRADE_ITEM_TEXT,item.getText(),requestedIds);
  return resource;
}
