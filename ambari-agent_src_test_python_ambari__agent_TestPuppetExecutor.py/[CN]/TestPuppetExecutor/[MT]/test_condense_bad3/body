def test_condense_bad3(self):
    puppetexecutor = PuppetExecutor('/tmp', '/x', '/y', '/z', AmbariConfig().getConfig())
    grep = Grep()
    puppetexecutor.grep = grep
    string_err = open((('ambari_agent' + os.sep) + 'dummy_puppet_output_error3.txt'), 'r').read().replace('\n', os.linesep)
    result = puppetexecutor.condenseOutput(string_err, '', 1)
    stripped_string = string_err.strip()
    lines = stripped_string.splitlines(True)
    d = lines[0:31]
    d = grep.cleanByTemplate(''.join(d).strip(), 'warning').splitlines(True)
    result_check = True
    for l in d:
        result_check &= (grep.filterMarkup(l) in result)
    self.assertEquals(result_check, True, 'Failed to condence fail log')
    self.assertEquals(('warning' in result.lower()), False, 'Failed to condence fail log')
    self.assertEquals(len(result.splitlines(True)), 19, 'Failed to condence fail log')
