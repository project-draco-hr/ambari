{
  final String regexp="(\\{\\{.*?\\}\\})";
  String task=upgradeItem.getTasks();
  if (task != null && !task.isEmpty()) {
    Matcher m=Pattern.compile(regexp).matcher(task);
    while (m.find()) {
      String origVar=m.group(1);
      String formattedVar=origVar.substring(2,origVar.length() - 2).trim();
      int posConfigFile=formattedVar.indexOf("/");
      if (posConfigFile > 0) {
        String configType=formattedVar.substring(0,posConfigFile);
        String propertyName=formattedVar.substring(posConfigFile + 1,formattedVar.length());
        try {
          String configValue=configHelper.getPropertyValueFromStackDefinitions(cluster,configType,propertyName);
          task=task.replace(origVar,configValue);
        }
 catch (        Exception err) {
          LOG.error(String.format("Exception trying to retrieve property %s/%s. Error: %s",configType,propertyName,err.getMessage()));
        }
      }
    }
    upgradeItem.setTasks(task);
  }
}
