{
  boolean updated=false;
  if (StringUtils.isNotBlank(newVersion)) {
    final String previousVersion=scHost.getVersion();
    if (!StringUtils.equals(previousVersion,newVersion)) {
      scHost.setVersion(newVersion);
      scHost.setStackVersion(cluster.getDesiredStackVersion());
      if (previousVersion != null && !previousVersion.equalsIgnoreCase(State.UNKNOWN.toString())) {
        scHost.setUpgradeState(UpgradeState.COMPLETE);
      }
      updated=true;
    }
  }
  if (updated || alwaysPublish) {
    HostComponentVersionEvent event=new HostComponentVersionEvent(cluster,scHost);
    versionEventPublisher.publish(event);
  }
}
