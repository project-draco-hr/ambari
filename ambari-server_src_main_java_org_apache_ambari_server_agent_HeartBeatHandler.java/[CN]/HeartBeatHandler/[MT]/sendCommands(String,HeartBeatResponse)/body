{
  List<AgentCommand> cmds=actionQueue.dequeueAll(hostname);
  if (cmds != null && !cmds.isEmpty()) {
    for (    AgentCommand ac : cmds) {
      try {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Sending command string = " + StageUtils.jaxbToString(ac));
        }
      }
 catch (      Exception e) {
        throw new AmbariException("Could not get jaxb string for command",e);
      }
switch (ac.getCommandType()) {
case BACKGROUND_EXECUTION_COMMAND:
case EXECUTION_COMMAND:
{
          response.addExecutionCommand((ExecutionCommand)ac);
          break;
        }
case STATUS_COMMAND:
{
        response.addStatusCommand((StatusCommand)ac);
        break;
      }
case CANCEL_COMMAND:
{
      response.addCancelCommand((CancelCommand)ac);
      break;
    }
case ALERT_DEFINITION_COMMAND:
{
    response.addAlertDefinitionCommand((AlertDefinitionCommand)ac);
    break;
  }
default :
LOG.error("There is no action for agent command =" + ac.getCommandType().name());
}
}
}
}
